import{x as o,y as m,z as d,A as i,a1 as h,C as _,U as u,au as p,Y as c,F as t,D as r,av as g}from"./index.736f15ad.js";import{Q as D,d as f}from"./QItem.d24e4b18.js";import{k as b}from"./QSelect.3d6bb424.js";import{Q as C}from"./QPage.9f6909a2.js";const y={style:{"margin-top":"10px"}},k=t("thead",null,[t("tr",null,[t("th",null,"ID#"),t("th",null,"Name"),t("th",null,"Created at"),t("th",null,"Updated at"),t("th",null,"Printed at")])],-1),F=Object.assign({name:"DashboardPage",components:{},data:function(){return{departments:[],selections:[],selectedDepartment:null,items:[]}},methods:{getColorStatus(e){return e.created_at&&!e.printed_at?"incomplete":e.created_at&&e.printed_at?"complete":"nacc"},getIdCardsDataCaptured(){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getIdCardsDataCaptured:!0,selectedDepartment:this.selectedDepartment}).then(({data:e})=>{console.log(e),this.items=e})},async getDepartments(){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getDepartments:!0}).then(({data:e})=>{console.log("departments: ",e),this.departments=e})},filterFn(e,a){if(e===""){a(()=>{this.selections=this.departments});return}a(()=>{const n=e.toLowerCase();this.selections=this.departments.filter(s=>s.label.toLowerCase().indexOf(n)>-1)})}},created(){},mounted(){this.getDepartments().then(()=>{this.getIdCardsDataCaptured()})}},{__name:"Dashboard",setup(e){return(a,n)=>(o(),m(C,{class:"q-pa-md",style:{"background-color":"#e8e8e852",position:"relative"}},{default:d(()=>[i(h,{color:"white","text-color":"black",label:"Back",to:"/"}),i(b,{clearable:"",class:"q-ma-md",filled:"",modelValue:a.selectedDepartment,"onUpdate:modelValue":[n[0]||(n[0]=s=>a.selectedDepartment=s),n[1]||(n[1]=s=>a.getIdCardsDataCaptured())],"use-input":"","input-debounce":"0",label:"Sort by Department",options:a.selections,onFilter:a.filterFn,behavior:"menu"},{"no-option":d(()=>[i(D,null,{default:d(()=>[i(f,{class:"text-grey"},{default:d(()=>[_(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"]),(o(!0),u(c,null,p(a.items,s=>(o(),u("div",{key:s.id,class:"deptCard"},[t("h5",null,r(`${s.department} (${s.alias})`),1),t("table",y,[k,t("tbody",null,[(o(!0),u(c,null,p(s.employees,l=>(o(),u("tr",{key:l.id,class:g(a.getColorStatus(l))},[t("td",null,r(l.empno),1),t("td",null,r(l.full_name),1),t("td",null,r(l.created_at),1),t("td",null,r(l.updated_at),1),t("td",null,r(l.printed_at),1)],2))),128))])])]))),128))]),_:1}))}});export{F as default};
