import{u as Rt,f as Dt,c as yi,g as Si,b as bi,a as wi,h as xi,d as To,e as Ti,Q as Co}from"./QItem.56f4b044.js";import{i as Ci,r as ue,o as ft,w as he,j as F,e as _i,a as ze,M as _o,g as Ue,N as ko,O as yn,P as Io,L as je,d as Ee,R as Pt,S as Sn,h as $,T as Ye,Q as vt,U as ki,q as Qe,V as $t,c as We,W as Ii,X as Ri,Y as Di,Z as Pi,_ as Ei,$ as Mi,K as Yt,a0 as Vn,a1 as Ui,l as Xe,a2 as Ai,a3 as Lt,u as Oi,a4 as Vi,a5 as Fi,a6 as Bi,a7 as bn,a8 as Ze,a9 as qi,aa as Ro,ab as Fn,ac as Hi,n as Li,ad as $i,ae as zi,af as xt,ag as ot,ah as Do,v as Ni,p as ji,x as it,ai as ct,F as X,D as Ce,aj as Ut,A as J,C as et,z as we,ak as Wi,al as Ki,am as wn,an as Gi,ao as Qi,ap as Ji,aq as Po,ar as He,as as Xi,at as Bn,B as Yi,y as Zi}from"./index.714d32d1.js";import{Q as er}from"./QPage.3d42b097.js";let on,At=0;const Fe=new Array(256);for(let e=0;e<256;e++)Fe[e]=(e+256).toString(16).substring(1);const tr=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let o=t;o>0;o--)n.push(Math.floor(Math.random()*256));return n}})(),qn=4096;function fn(){(on===void 0||At+16>qn)&&(At=0,on=tr(qn));const e=Array.prototype.slice.call(on,At,At+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,Fe[e[0]]+Fe[e[1]]+Fe[e[2]]+Fe[e[3]]+"-"+Fe[e[4]]+Fe[e[5]]+"-"+Fe[e[6]]+Fe[e[7]]+"-"+Fe[e[8]]+Fe[e[9]]+"-"+Fe[e[10]]+Fe[e[11]]+Fe[e[12]]+Fe[e[13]]+Fe[e[14]]+Fe[e[15]]}function nr(e){return e==null?null:e}function Hn(e,t){return e==null?t===!0?`f_${fn()}`:null:e}function or({getValue:e,required:t=!0}={}){if(Ci.value===!0){const n=e!==void 0?ue(nr(e())):ue(null);return t===!0&&n.value===null&&ft(()=>{n.value=`f_${fn()}`}),e!==void 0&&he(e,o=>{n.value=Hn(o,t)}),n}return e!==void 0?F(()=>Hn(e(),t)):ue(`f_${fn()}`)}function ir({validate:e,resetValidation:t,requiresQForm:n}){const o=_i(_o,!1);if(o!==!1){const{props:s,proxy:u}=Ue();Object.assign(u,{validate:e,resetValidation:t}),he(()=>s.disable,m=>{m===!0?(typeof t=="function"&&t(),o.unbindComponent(u)):o.bindComponent(u)}),ft(()=>{s.disable!==!0&&o.bindComponent(u)}),ze(()=>{s.disable!==!0&&o.unbindComponent(u)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Ln=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,$n=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,zn=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Ot=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Vt=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,rn={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Ln.test(e),hexaColor:e=>$n.test(e),hexOrHexaColor:e=>zn.test(e),rgbColor:e=>Ot.test(e),rgbaColor:e=>Vt.test(e),rgbOrRgbaColor:e=>Ot.test(e)||Vt.test(e),hexOrRgbColor:e=>Ln.test(e)||Ot.test(e),hexaOrRgbaColor:e=>$n.test(e)||Vt.test(e),anyColor:e=>zn.test(e)||Ot.test(e)||Vt.test(e)},rr=[!0,!1,"ondemand"],ar={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>rr.includes(e)}};function lr(e,t){const{props:n,proxy:o}=Ue(),s=ue(!1),u=ue(null),m=ue(!1);ir({validate:a,resetValidation:d});let y=0,T;const C=F(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),k=F(()=>n.disable!==!0&&C.value===!0&&t.value===!1),R=F(()=>n.error===!0||s.value===!0),r=F(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:u.value);he(()=>n.modelValue,()=>{m.value=!0,k.value===!0&&n.lazyRules===!1&&l()});function i(){n.lazyRules!=="ondemand"&&k.value===!0&&m.value===!0&&l()}he(()=>n.reactiveRules,g=>{g===!0?T===void 0&&(T=he(()=>n.rules,i,{immediate:!0,deep:!0})):T!==void 0&&(T(),T=void 0)},{immediate:!0}),he(()=>n.lazyRules,i),he(e,g=>{g===!0?m.value=!0:k.value===!0&&n.lazyRules!=="ondemand"&&l()});function d(){y++,t.value=!1,m.value=!1,s.value=!1,u.value=null,l.cancel()}function a(g=n.modelValue){if(n.disable===!0||C.value===!1)return!0;const S=++y,w=t.value!==!0?()=>{m.value=!0}:()=>{},M=(L,G)=>{L===!0&&w(),s.value=L,u.value=G||null,t.value=!1},O=[];for(let L=0;L<n.rules.length;L++){const G=n.rules[L];let Y;if(typeof G=="function"?Y=G(g,rn):typeof G=="string"&&rn[G]!==void 0&&(Y=rn[G](g)),Y===!1||typeof Y=="string")return M(!0,Y),!1;Y!==!0&&Y!==void 0&&O.push(Y)}return O.length===0?(M(!1),!0):(t.value=!0,Promise.all(O).then(L=>{if(L===void 0||Array.isArray(L)===!1||L.length===0)return S===y&&M(!1),!0;const G=L.find(Y=>Y===!1||typeof Y=="string");return S===y&&M(G!==void 0,G),G===void 0},L=>(S===y&&(console.error(L),M(!0)),!1)))}const l=ko(a,0);return ze(()=>{T!==void 0&&T(),l.cancel()}),Object.assign(o,{resetValidation:d,validate:a}),yn(o,"hasError",()=>R.value),{isDirtyModel:m,hasRules:C,hasError:R,errorMessage:r,validate:a,resetValidation:d}}const Nn=/^on[A-Z]/;function sr(){const{attrs:e,vnode:t}=Ue(),n={listeners:ue({}),attributes:ue({})};function o(){const s={},u={};for(const m in e)m!=="class"&&m!=="style"&&Nn.test(m)===!1&&(s[m]=e[m]);for(const m in t.props)Nn.test(m)===!0&&(u[m]=t.props[m]);n.attributes.value=s,n.listeners.value=u}return Io(o),o(),n}let lt=[],kt=[];function Eo(e){kt=kt.filter(t=>t!==e)}function ur(e){Eo(e),kt.push(e)}function jn(e){Eo(e),kt.length===0&&lt.length!==0&&(lt[lt.length-1](),lt=[])}function Et(e){kt.length===0?e():lt.push(e)}function dr(e){lt=lt.filter(t=>t!==e)}function It(e){return e!=null&&(""+e).length!==0}const Zt={...Rt,...ar,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},xn=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function Tn({requiredForAttr:e=!0,tagProp:t}={}){const{props:n,proxy:o}=Ue(),s=Dt(n,o.$q),u=or({required:e,getValue:()=>n.for});return{requiredForAttr:e,tag:t===!0?F(()=>n.tag):{value:"label"},isDark:s,editable:F(()=>n.disable!==!0&&n.readonly!==!0),innerLoading:ue(!1),focused:ue(!1),hasPopupOpen:!1,splitAttrs:sr(),targetUid:u,rootRef:ue(null),targetRef:ue(null),controlRef:ue(null)}}function Cn(e){const{props:t,emit:n,slots:o,attrs:s,proxy:u}=Ue(),{$q:m}=u;let y=null;e.hasValue===void 0&&(e.hasValue=F(()=>It(t.modelValue))),e.emitValue===void 0&&(e.emitValue=U=>{n("update:modelValue",U)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:E,onFocusout:p}),Object.assign(e,{clearValue:H,onControlFocusin:E,onControlFocusout:p,focus:G}),e.computedCounter===void 0&&(e.computedCounter=F(()=>{if(t.counter!==!1){const U=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,ee=t.maxlength!==void 0?t.maxlength:t.maxValues;return U+(ee!==void 0?" / "+ee:"")}}));const{isDirtyModel:T,hasRules:C,hasError:k,errorMessage:R,resetValidation:r}=lr(e.focused,e.innerLoading),i=e.floatingLabel!==void 0?F(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):F(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),d=F(()=>t.bottomSlots===!0||t.hint!==void 0||C.value===!0||t.counter===!0||t.error!==null),a=F(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),l=F(()=>`q-field row no-wrap items-start q-field--${a.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(i.value===!0?" q-field--float":"")+(S.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(k.value===!0?" q-field--error":"")+(k.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&d.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),g=F(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(k.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),S=F(()=>t.labelSlot===!0||t.label!==void 0),w=F(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&k.value!==!0?` text-${t.labelColor}`:"")),M=F(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:i.value,modelValue:t.modelValue,emitValue:e.emitValue})),O=F(()=>{const U={};return e.targetUid.value&&(U.for=e.targetUid.value),t.disable===!0&&(U["aria-disabled"]="true"),U});function L(){const U=document.activeElement;let ee=e.targetRef!==void 0&&e.targetRef.value;ee&&(U===null||U.id!==e.targetUid.value)&&(ee.hasAttribute("tabindex")===!0||(ee=ee.querySelector("[tabindex]")),ee&&ee!==U&&ee.focus({preventScroll:!0}))}function G(){Et(L)}function Y(){dr(L);const U=document.activeElement;U!==null&&e.rootRef.value.contains(U)&&U.blur()}function E(U){y!==null&&(clearTimeout(y),y=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",U))}function p(U,ee){y!==null&&clearTimeout(y),y=setTimeout(()=>{y=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",U)),ee!==void 0&&ee())})}function H(U){je(U),m.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),n("clear",t.modelValue),Ee(()=>{const ee=T.value;r(),T.value=ee})}function D(){const U=[];return o.prepend!==void 0&&U.push($("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Ye},o.prepend())),U.push($("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},Z())),k.value===!0&&t.noErrorIcon===!1&&U.push(re("error",[$(vt,{name:m.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?U.push(re("inner-loading-append",o.loading!==void 0?o.loading():[$(ki,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&U.push(re("inner-clearable-append",[$(vt,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||m.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:H})])),o.append!==void 0&&U.push($("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Ye},o.append())),e.getInnerAppend!==void 0&&U.push(re("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&U.push(e.getControlChild()),U}function Z(){const U=[];return t.prefix!==void 0&&t.prefix!==null&&U.push($("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&U.push(e.getShadowControl()),e.getControl!==void 0?U.push(e.getControl()):o.rawControl!==void 0?U.push(o.rawControl()):o.control!==void 0&&U.push($("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},o.control(M.value))),S.value===!0&&U.push($("div",{class:w.value},Qe(o.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&U.push($("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),U.concat(Qe(o.default))}function I(){let U,ee;k.value===!0?R.value!==null?(U=[$("div",{role:"alert"},R.value)],ee=`q--slot-error-${R.value}`):(U=Qe(o.error),ee="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(U=[$("div",t.hint)],ee=`q--slot-hint-${t.hint}`):(U=Qe(o.hint),ee="q--slot-hint"));const ve=t.counter===!0||o.counter!==void 0;if(t.hideBottomSpace===!0&&ve===!1&&U===void 0)return;const de=$("div",{key:ee,class:"q-field__messages col"},U);return $("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:Ye},[t.hideBottomSpace===!0?de:$($t,{name:"q-transition--field-message"},()=>de),ve===!0?$("div",{class:"q-field__counter"},o.counter!==void 0?o.counter():e.computedCounter.value):null])}function re(U,ee){return ee===null?null:$("div",{key:U,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},ee)}let ne=!1;return Pt(()=>{ne=!0}),Sn(()=>{ne===!0&&t.autofocus===!0&&u.focus()}),t.autofocus===!0&&ft(()=>{u.focus()}),ze(()=>{y!==null&&clearTimeout(y)}),Object.assign(u,{focus:G,blur:Y}),function(){const ee=e.getControl===void 0&&o.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...O.value}:O.value;return $(e.tag.value,{ref:e.rootRef,class:[l.value,s.class],style:s.style,...ee},[o.before!==void 0?$("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Ye},o.before()):null,$("div",{class:"q-field__inner relative-position col self-stretch"},[$("div",{ref:e.controlRef,class:g.value,tabindex:-1,...e.controlEvents},D()),d.value===!0?I():null]),o.after!==void 0?$("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Ye},o.after()):null])}}var cr=We({name:"QField",inheritAttrs:!1,props:{...Zt,tag:{type:String,default:"label"}},emits:xn,setup(){return Cn(Tn({requiredForAttr:!1,tagProp:!0}))}});const fr={xs:8,sm:10,md:14,lg:20,xl:24};var pr=We({name:"QChip",props:{...Rt,...Ii,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:o}}=Ue(),s=Dt(e,o),u=Ri(e,fr),m=F(()=>e.selected===!0||e.icon!==void 0),y=F(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),T=F(()=>e.iconRemove||o.iconSet.chip.remove),C=F(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),k=F(()=>{const l=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(l?` text-${l} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(C.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),R=F(()=>{const l=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},g={...l,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:l,remove:g}});function r(l){l.keyCode===13&&i(l)}function i(l){e.disable||(n("update:selected",!e.selected),n("click",l))}function d(l){(l.keyCode===void 0||l.keyCode===13)&&(je(l),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function a(){const l=[];C.value===!0&&l.push($("div",{class:"q-focus-helper"})),m.value===!0&&l.push($(vt,{class:"q-chip__icon q-chip__icon--left",name:y.value}));const g=e.label!==void 0?[$("div",{class:"ellipsis"},[e.label])]:void 0;return l.push($("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Pi(t.default,g))),e.iconRight&&l.push($(vt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&l.push($(vt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:T.value,...R.value.remove,onClick:d,onKeyup:d})),l}return()=>{if(e.modelValue===!1)return;const l={class:k.value,style:u.value};return C.value===!0&&Object.assign(l,R.value.chip,{onClick:i,onKeyup:r}),Di("div",l,a(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ei,e.ripple]])}}});function mr(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Mi.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const hr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function gr({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:o,proxy:s,emit:u}=Ue(),m=ue(null);let y=null;function T(i){return m.value===null?!1:i===void 0||i.touches===void 0||i.touches.length<=1}const C={};n===void 0&&(Object.assign(C,{hide(i){s.hide(i)},toggle(i){s.toggle(i),i.qAnchorHandled=!0},toggleKey(i){Yt(i,13)===!0&&C.toggle(i)},contextClick(i){s.hide(i),Ye(i),Ee(()=>{s.show(i),i.qAnchorHandled=!0})},prevent:Ye,mobileTouch(i){if(C.mobileCleanup(i),T(i)!==!0)return;s.hide(i),m.value.classList.add("non-selectable");const d=i.target;Vn(C,"anchor",[[d,"touchmove","mobileCleanup","passive"],[d,"touchend","mobileCleanup","passive"],[d,"touchcancel","mobileCleanup","passive"],[m.value,"contextmenu","prevent","notPassive"]]),y=setTimeout(()=>{y=null,s.show(i),i.qAnchorHandled=!0},300)},mobileCleanup(i){m.value.classList.remove("non-selectable"),y!==null&&(clearTimeout(y),y=null),e.value===!0&&i!==void 0&&mr()}}),n=function(i=o.contextMenu){if(o.noParentEvent===!0||m.value===null)return;let d;i===!0?s.$q.platform.is.mobile===!0?d=[[m.value,"touchstart","mobileTouch","passive"]]:d=[[m.value,"mousedown","hide","passive"],[m.value,"contextmenu","contextClick","notPassive"]]:d=[[m.value,"click","toggle","passive"],[m.value,"keyup","toggleKey","passive"]],Vn(C,"anchor",d)});function k(){Ui(C,"anchor")}function R(i){for(m.value=i;m.value.classList.contains("q-anchor--skip");)m.value=m.value.parentNode;n()}function r(){if(o.target===!1||o.target===""||s.$el.parentNode===null)m.value=null;else if(o.target===!0)R(s.$el.parentNode);else{let i=o.target;if(typeof o.target=="string")try{i=document.querySelector(o.target)}catch{i=void 0}i!=null?(m.value=i.$el||i,n()):(m.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return he(()=>o.contextMenu,i=>{m.value!==null&&(k(),n(i))}),he(()=>o.target,()=>{m.value!==null&&k(),r()}),he(()=>o.noParentEvent,i=>{m.value!==null&&(i===!0?k():n())}),ft(()=>{r(),t!==!0&&o.modelValue===!0&&m.value===null&&u("update:modelValue",!1)}),ze(()=>{y!==null&&clearTimeout(y),k()}),{anchorEl:m,canShow:T,anchorEvents:C}}function vr(e,t){const n=ue(null);let o;function s(y,T){const C=`${T!==void 0?"add":"remove"}EventListener`,k=T!==void 0?T:o;y!==window&&y[C]("scroll",k,Xe.passive),window[C]("scroll",k,Xe.passive),o=T}function u(){n.value!==null&&(s(n.value),n.value=null)}const m=he(()=>e.noParentEvent,()=>{n.value!==null&&(u(),t())});return ze(m),{localScrollTarget:n,unconfigureScrollTarget:u,changeScrollEvent:s}}const Mo={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Uo=["beforeShow","show","beforeHide","hide"];function Ao({showing:e,canShow:t,hideOnRouteChange:n,handleShow:o,handleHide:s,processOnMount:u}){const m=Ue(),{props:y,emit:T,proxy:C}=m;let k;function R(S){e.value===!0?d(S):r(S)}function r(S){if(y.disable===!0||S!==void 0&&S.qAnchorHandled===!0||t!==void 0&&t(S)!==!0)return;const w=y["onUpdate:modelValue"]!==void 0;w===!0&&(T("update:modelValue",!0),k=S,Ee(()=>{k===S&&(k=void 0)})),(y.modelValue===null||w===!1)&&i(S)}function i(S){e.value!==!0&&(e.value=!0,T("beforeShow",S),o!==void 0?o(S):T("show",S))}function d(S){if(y.disable===!0)return;const w=y["onUpdate:modelValue"]!==void 0;w===!0&&(T("update:modelValue",!1),k=S,Ee(()=>{k===S&&(k=void 0)})),(y.modelValue===null||w===!1)&&a(S)}function a(S){e.value!==!1&&(e.value=!1,T("beforeHide",S),s!==void 0?s(S):T("hide",S))}function l(S){y.disable===!0&&S===!0?y["onUpdate:modelValue"]!==void 0&&T("update:modelValue",!1):S===!0!==e.value&&(S===!0?i:a)(k)}he(()=>y.modelValue,l),n!==void 0&&Ai(m)===!0&&he(()=>C.$route.fullPath,()=>{n.value===!0&&e.value===!0&&d()}),u===!0&&ft(()=>{l(y.modelValue)});const g={show:r,hide:d,toggle:R};return Object.assign(C,g),g}const yt=[];function yr(e){return yt.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Oo(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return Lt(e)}else if(e.__qPortal===!0){const n=Lt(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=Lt(e)}while(e!=null)}function Sr(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=Oo(e,t);continue}e.hide(t)}e=Lt(e)}}const br=We({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function wr(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Vo(e,t,n,o){const s=ue(!1),u=ue(!1);let m=null;const y={},T=o==="dialog"&&wr(e);function C(R){if(R===!0){jn(y),u.value=!0;return}u.value=!1,s.value===!1&&(T===!1&&m===null&&(m=Fi(!1,o)),s.value=!0,yt.push(e.proxy),ur(y))}function k(R){if(u.value=!1,R!==!0)return;jn(y),s.value=!1;const r=yt.indexOf(e.proxy);r!==-1&&yt.splice(r,1),m!==null&&(Bi(m),m=null)}return Oi(()=>{k(!0)}),e.proxy.__qPortal=!0,yn(e.proxy,"contentEl",()=>t.value),{showPortal:C,hidePortal:k,portalIsActive:s,portalIsAccessible:u,renderPortal:()=>T===!0?n():s.value===!0?[$(Vi,{to:m},$(br,n))]:void 0}}const Fo={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Bo(e,t=()=>{},n=()=>{}){return{transitionProps:F(()=>{const o=`q-transition--${e.transitionShow||t()}`,s=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:F(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function qo(){let e;const t=Ue();function n(){e=void 0}return Pt(n),ze(n),{removeTick:n,registerTick(o){e=o,Ee(()=>{e===o&&(bn(t)===!1&&e(),e=void 0)})}}}function Ho(){let e=null;const t=Ue();function n(){e!==null&&(clearTimeout(e),e=null)}return Pt(n),ze(n),{removeTimeout:n,registerTimeout(o,s){n(),bn(t)===!1&&(e=setTimeout(()=>{e=null,o()},s))}}}const st=[];let bt;function xr(e){bt=e.keyCode===27}function Tr(){bt===!0&&(bt=!1)}function Cr(e){bt===!0&&(bt=!1,Yt(e,27)===!0&&st[st.length-1](e))}function Lo(e){window[e]("keydown",xr),window[e]("blur",Tr),window[e]("keyup",Cr),bt=!1}function $o(e){Ze.is.desktop===!0&&(st.push(e),st.length===1&&Lo("addEventListener"))}function zt(e){const t=st.indexOf(e);t!==-1&&(st.splice(t,1),st.length===0&&Lo("removeEventListener"))}const ut=[];function zo(e){ut[ut.length-1](e)}function No(e){Ze.is.desktop===!0&&(ut.push(e),ut.length===1&&document.body.addEventListener("focusin",zo))}function pn(e){const t=ut.indexOf(e);t!==-1&&(ut.splice(t,1),ut.length===0&&document.body.removeEventListener("focusin",zo))}const{notPassiveCapture:Nt}=Xe,dt=[];function jt(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=yt.length-1;for(;n>=0;){const o=yt[n].$;if(o.type.name==="QTooltip"){n--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=dt.length-1;o>=0;o--){const s=dt[o];if((s.anchorEl.value===null||s.anchorEl.value.contains(t)===!1)&&(t===document.body||s.innerRef.value!==null&&s.innerRef.value.contains(t)===!1))e.qClickOutside=!0,s.onClickOutside(e);else return}}function _r(e){dt.push(e),dt.length===1&&(document.addEventListener("mousedown",jt,Nt),document.addEventListener("touchstart",jt,Nt))}function Wn(e){const t=dt.findIndex(n=>n===e);t!==-1&&(dt.splice(t,1),dt.length===0&&(document.removeEventListener("mousedown",jt,Nt),document.removeEventListener("touchstart",jt,Nt)))}let Kn,Gn;function Qn(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function kr(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const mn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{mn[`${e}#ltr`]=e,mn[`${e}#rtl`]=e});function Jn(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:mn[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function Ir(e,t){let{top:n,left:o,right:s,bottom:u,width:m,height:y}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],o-=t[0],u+=t[1],s+=t[0],m+=t[0],y+=t[1]),{top:n,bottom:u,height:y,left:o,right:s,width:m,middle:o+(s-o)/2,center:n+(u-n)/2}}function Rr(e,t,n){let{top:o,left:s}=e.getBoundingClientRect();return o+=t.top,s+=t.left,n!==void 0&&(o+=n[1],s+=n[0]),{top:o,bottom:o+1,height:1,left:s,right:s+1,width:1,middle:s,center:o}}function Dr(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Xn(e,t,n,o){return{top:e[n.vertical]-t[o.vertical],left:e[n.horizontal]-t[o.horizontal]}}function jo(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{jo(e,t+1)},10);return}const{targetEl:n,offset:o,anchorEl:s,anchorOrigin:u,selfOrigin:m,absoluteOffset:y,fit:T,cover:C,maxHeight:k,maxWidth:R}=e;if(Ze.is.ios===!0&&window.visualViewport!==void 0){const L=document.body.style,{offsetLeft:G,offsetTop:Y}=window.visualViewport;G!==Kn&&(L.setProperty("--q-pe-left",G+"px"),Kn=G),Y!==Gn&&(L.setProperty("--q-pe-top",Y+"px"),Gn=Y)}const{scrollLeft:r,scrollTop:i}=n,d=y===void 0?Ir(s,C===!0?[0,0]:o):Rr(s,y,o);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:R||"100vw",maxHeight:k||"100vh",visibility:"visible"});const{offsetWidth:a,offsetHeight:l}=n,{elWidth:g,elHeight:S}=T===!0||C===!0?{elWidth:Math.max(d.width,a),elHeight:C===!0?Math.max(d.height,l):l}:{elWidth:a,elHeight:l};let w={maxWidth:R,maxHeight:k};(T===!0||C===!0)&&(w.minWidth=d.width+"px",C===!0&&(w.minHeight=d.height+"px")),Object.assign(n.style,w);const M=Dr(g,S);let O=Xn(d,M,u,m);if(y===void 0||o===void 0)an(O,d,M,u,m);else{const{top:L,left:G}=O;an(O,d,M,u,m);let Y=!1;if(O.top!==L){Y=!0;const E=2*o[1];d.center=d.top-=E,d.bottom-=E+2}if(O.left!==G){Y=!0;const E=2*o[0];d.middle=d.left-=E,d.right-=E+2}Y===!0&&(O=Xn(d,M,u,m),an(O,d,M,u,m))}w={top:O.top+"px",left:O.left+"px"},O.maxHeight!==void 0&&(w.maxHeight=O.maxHeight+"px",d.height>O.maxHeight&&(w.minHeight=w.maxHeight)),O.maxWidth!==void 0&&(w.maxWidth=O.maxWidth+"px",d.width>O.maxWidth&&(w.minWidth=w.maxWidth)),Object.assign(n.style,w),n.scrollTop!==i&&(n.scrollTop=i),n.scrollLeft!==r&&(n.scrollLeft=r)}function an(e,t,n,o,s){const u=n.bottom,m=n.right,y=yi(),T=window.innerHeight-y,C=document.body.clientWidth;if(e.top<0||e.top+u>T)if(s.vertical==="center")e.top=t[o.vertical]>T/2?Math.max(0,T-u):0,e.maxHeight=Math.min(u,T);else if(t[o.vertical]>T/2){const k=Math.min(T,o.vertical==="center"?t.center:o.vertical===s.vertical?t.bottom:t.top);e.maxHeight=Math.min(u,k),e.top=Math.max(0,k-u)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===s.vertical?t.top:t.bottom),e.maxHeight=Math.min(u,T-e.top);if(e.left<0||e.left+m>C)if(e.maxWidth=Math.min(m,C),s.horizontal==="middle")e.left=t[o.horizontal]>C/2?Math.max(0,C-m):0;else if(t[o.horizontal]>C/2){const k=Math.min(C,o.horizontal==="middle"?t.middle:o.horizontal===s.horizontal?t.right:t.left);e.maxWidth=Math.min(m,k),e.left=Math.max(0,k-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===s.horizontal?t.left:t.right),e.maxWidth=Math.min(m,C-e.left)}var Pr=We({name:"QMenu",inheritAttrs:!1,props:{...hr,...Mo,...Rt,...Fo,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Qn},self:{type:String,validator:Qn},offset:{type:Array,validator:kr},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Uo,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){let s=null,u,m,y;const T=Ue(),{proxy:C}=T,{$q:k}=C,R=ue(null),r=ue(!1),i=F(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),d=Dt(e,k),{registerTick:a,removeTick:l}=qo(),{registerTimeout:g}=Ho(),{transitionProps:S,transitionStyle:w}=Bo(e),{localScrollTarget:M,changeScrollEvent:O,unconfigureScrollTarget:L}=vr(e,z),{anchorEl:G,canShow:Y}=gr({showing:r}),{hide:E}=Ao({showing:r,canShow:Y,handleShow:de,handleHide:_,hideOnRouteChange:i,processOnMount:!0}),{showPortal:p,hidePortal:H,renderPortal:D}=Vo(T,R,ge,"menu"),Z={anchorEl:G,innerRef:R,onClickOutside(V){if(e.persistent!==!0&&r.value===!0)return E(V),(V.type==="touchstart"||V.target.classList.contains("q-dialog__backdrop"))&&je(V),!0}},I=F(()=>Jn(e.anchor||(e.cover===!0?"center middle":"bottom start"),k.lang.rtl)),re=F(()=>e.cover===!0?I.value:Jn(e.self||"top start",k.lang.rtl)),ne=F(()=>(e.square===!0?" q-menu--square":"")+(d.value===!0?" q-menu--dark q-dark":"")),U=F(()=>e.autoClose===!0?{onClick:ae}:{}),ee=F(()=>r.value===!0&&e.persistent!==!0);he(ee,V=>{V===!0?($o(A),_r(Z)):(zt(A),Wn(Z))});function ve(){Et(()=>{let V=R.value;V&&V.contains(document.activeElement)!==!0&&(V=V.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||V.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||V.querySelector("[autofocus], [data-autofocus]")||V,V.focus({preventScroll:!0}))})}function de(V){if(s=e.noRefocus===!1?document.activeElement:null,No(se),p(),z(),u=void 0,V!==void 0&&(e.touchPosition||e.contextMenu)){const Se=qi(V);if(Se.left!==void 0){const{top:Ae,left:Ke}=G.value.getBoundingClientRect();u={left:Se.left-Ke,top:Se.top-Ae}}}m===void 0&&(m=he(()=>k.screen.width+"|"+k.screen.height+"|"+e.self+"|"+e.anchor+"|"+k.lang.rtl,W)),e.noFocus!==!0&&document.activeElement.blur(),a(()=>{W(),e.noFocus!==!0&&ve()}),g(()=>{k.platform.is.ios===!0&&(y=e.autoClose,R.value.click()),W(),p(!0),n("show",V)},e.transitionDuration)}function _(V){l(),H(),x(!0),s!==null&&(V===void 0||V.qClickOutside!==!0)&&(((V&&V.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),g(()=>{H(!0),n("hide",V)},e.transitionDuration)}function x(V){u=void 0,m!==void 0&&(m(),m=void 0),(V===!0||r.value===!0)&&(pn(se),L(),Wn(Z),zt(A)),V!==!0&&(s=null)}function z(){(G.value!==null||e.scrollTarget!==void 0)&&(M.value=Si(G.value,e.scrollTarget),O(M.value,W))}function ae(V){y!==!0?(Oo(C,V),n("click",V)):y=!1}function se(V){ee.value===!0&&e.noFocus!==!0&&Ro(R.value,V.target)!==!0&&ve()}function A(V){n("escapeKey"),E(V)}function W(){jo({targetEl:R.value,offset:e.offset,anchorEl:G.value,anchorOrigin:I.value,selfOrigin:re.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ge(){return $($t,S.value,()=>r.value===!0?$("div",{role:"menu",...o,ref:R,tabindex:-1,class:["q-menu q-position-engine scroll"+ne.value,o.class],style:[o.style,w.value],...U.value},Qe(t.default)):null)}return ze(x),Object.assign(C,{focus:ve,updatePosition:W}),D}});function Er(e,t,n){let o;function s(){o!==void 0&&(Fn.remove(o),o=void 0)}return ze(()=>{e.value===!0&&s()}),{removeFromHistory:s,addToHistory(){o={condition:()=>n.value===!0,handler:t},Fn.add(o)}}}let Tt=0,ln,sn,_t,un=!1,Yn,Zn,eo,at=null;function Mr(e){Ur(e)&&je(e)}function Ur(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Hi(e),n=e.shiftKey&&!e.deltaX,o=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),s=n||o?e.deltaY:e.deltaX;for(let u=0;u<t.length;u++){const m=t[u];if(xi(m,o))return o?s<0&&m.scrollTop===0?!0:s>0&&m.scrollTop+m.clientHeight===m.scrollHeight:s<0&&m.scrollLeft===0?!0:s>0&&m.scrollLeft+m.clientWidth===m.scrollWidth}return!0}function to(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ft(e){un!==!0&&(un=!0,requestAnimationFrame(()=>{un=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:o}=document.scrollingElement;(_t===void 0||t!==window.innerHeight)&&(_t=n-t,document.scrollingElement.scrollTop=o),o>_t&&(document.scrollingElement.scrollTop-=Math.ceil((o-_t)/8))}))}function no(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:s}=window.getComputedStyle(t);ln=bi(window),sn=wi(window),Yn=t.style.left,Zn=t.style.top,eo=window.location.href,t.style.left=`-${ln}px`,t.style.top=`-${sn}px`,s!=="hidden"&&(s==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Ze.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ft,Xe.passiveCapture),window.visualViewport.addEventListener("scroll",Ft,Xe.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",to,Xe.passiveCapture))}Ze.is.desktop===!0&&Ze.is.mac===!0&&window[`${e}EventListener`]("wheel",Mr,Xe.notPassive),e==="remove"&&(Ze.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Ft,Xe.passiveCapture),window.visualViewport.removeEventListener("scroll",Ft,Xe.passiveCapture)):window.removeEventListener("scroll",to,Xe.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=Yn,t.style.top=Zn,window.location.href===eo&&window.scrollTo(ln,sn),_t=void 0)}function Ar(e){let t="add";if(e===!0){if(Tt++,at!==null){clearTimeout(at),at=null;return}if(Tt>1)return}else{if(Tt===0||(Tt--,Tt>0))return;if(t="remove",Ze.is.ios===!0&&Ze.is.nativeMobile===!0){at!==null&&clearTimeout(at),at=setTimeout(()=>{no(t),at=null},100);return}}no(t)}function Or(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Ar(t))}}}let Bt=0;const Vr={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},oo={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Wt=We({name:"QDialog",inheritAttrs:!1,props:{...Mo,...Fo,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Uo,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){const s=Ue(),u=ue(null),m=ue(!1),y=ue(!1);let T=null,C=null,k,R;const r=F(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:i}=Or(),{registerTimeout:d}=Ho(),{registerTick:a,removeTick:l}=qo(),{transitionProps:g,transitionStyle:S}=Bo(e,()=>oo[e.position][0],()=>oo[e.position][1]),w=F(()=>S.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:M,hidePortal:O,portalIsAccessible:L,renderPortal:G}=Vo(s,u,se,"dialog"),{hide:Y}=Ao({showing:m,hideOnRouteChange:r,handleShow:re,handleHide:ne,processOnMount:!0}),{addToHistory:E,removeFromHistory:p}=Er(m,Y,r),H=F(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Vr[e.position]}`+(y.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),D=F(()=>m.value===!0&&e.seamless!==!0),Z=F(()=>e.autoClose===!0?{onClick:x}:{}),I=F(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${D.value===!0?"modal":"seamless"}`,o.class]);he(()=>e.maximized,A=>{m.value===!0&&_(A)}),he(D,A=>{i(A),A===!0?(No(ae),$o(ve)):(pn(ae),zt(ve))});function re(A){E(),C=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,_(e.maximized),M(),y.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),a(U)):l(),d(()=>{if(s.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:W,bottom:ge}=document.activeElement.getBoundingClientRect(),{innerHeight:V}=window,Se=window.visualViewport!==void 0?window.visualViewport.height:V;W>0&&ge>Se/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Se,ge>=V?1/0:Math.ceil(document.scrollingElement.scrollTop+ge-Se/2))),document.activeElement.scrollIntoView()}R=!0,u.value.click(),R=!1}M(!0),y.value=!1,n("show",A)},e.transitionDuration)}function ne(A){l(),p(),de(!0),y.value=!0,O(),C!==null&&(((A&&A.type.indexOf("key")===0?C.closest('[tabindex]:not([tabindex^="-"])'):void 0)||C).focus(),C=null),d(()=>{O(!0),y.value=!1,n("hide",A)},e.transitionDuration)}function U(A){Et(()=>{let W=u.value;W===null||W.contains(document.activeElement)===!0||(W=(A!==""?W.querySelector(A):null)||W.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||W.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||W.querySelector("[autofocus], [data-autofocus]")||W,W.focus({preventScroll:!0}))})}function ee(A){A&&typeof A.focus=="function"?A.focus({preventScroll:!0}):U(),n("shake");const W=u.value;W!==null&&(W.classList.remove("q-animate--scale"),W.classList.add("q-animate--scale"),T!==null&&clearTimeout(T),T=setTimeout(()=>{T=null,u.value!==null&&(W.classList.remove("q-animate--scale"),U())},170))}function ve(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&ee():(n("escapeKey"),Y()))}function de(A){T!==null&&(clearTimeout(T),T=null),(A===!0||m.value===!0)&&(_(!1),e.seamless!==!0&&(i(!1),pn(ae),zt(ve))),A!==!0&&(C=null)}function _(A){A===!0?k!==!0&&(Bt<1&&document.body.classList.add("q-body--dialog"),Bt++,k=!0):k===!0&&(Bt<2&&document.body.classList.remove("q-body--dialog"),Bt--,k=!1)}function x(A){R!==!0&&(Y(A),n("click",A))}function z(A){e.persistent!==!0&&e.noBackdropDismiss!==!0?Y(A):e.noShake!==!0&&ee()}function ae(A){e.allowFocusOutside!==!0&&L.value===!0&&Ro(u.value,A.target)!==!0&&U('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:U,shake:ee,__updateRefocusTarget(A){C=A||null}}),ze(de);function se(){return $("div",{role:"dialog","aria-modal":D.value===!0?"true":"false",...o,class:I.value},[$($t,{name:"q-transition--fade",appear:!0},()=>D.value===!0?$("div",{class:"q-dialog__backdrop fixed-full",style:w.value,"aria-hidden":"true",tabindex:-1,onClick:z}):null),$($t,g.value,()=>m.value===!0?$("div",{ref:u,class:H.value,style:S.value,tabindex:-1,...Z.value},Qe(t.default)):null)])}return G}});let Kt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Kt=e.scrollLeft>=0,e.remove()}const Ge=1e3,Fr=["start","center","end","start-force","center-force","end-force"],Wo=Array.prototype.filter,Br=window.getComputedStyle(document.body).overflowAnchor===void 0?Li:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Wo.call(n,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const o=n[t];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function St(e,t){return e+t}function dn(e,t,n,o,s,u,m,y){const T=e===window?document.scrollingElement||document.documentElement:e,C=s===!0?"offsetWidth":"offsetHeight",k={scrollStart:0,scrollViewSize:-m-y,scrollMaxSize:0,offsetStart:-m,offsetEnd:-y};if(s===!0?(e===window?(k.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,k.scrollViewSize+=document.documentElement.clientWidth):(k.scrollStart=T.scrollLeft,k.scrollViewSize+=T.clientWidth),k.scrollMaxSize=T.scrollWidth,u===!0&&(k.scrollStart=(Kt===!0?k.scrollMaxSize-k.scrollViewSize:0)-k.scrollStart)):(e===window?(k.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,k.scrollViewSize+=document.documentElement.clientHeight):(k.scrollStart=T.scrollTop,k.scrollViewSize+=T.clientHeight),k.scrollMaxSize=T.scrollHeight),n!==null)for(let R=n.previousElementSibling;R!==null;R=R.previousElementSibling)R.classList.contains("q-virtual-scroll--skip")===!1&&(k.offsetStart+=R[C]);if(o!==null)for(let R=o.nextElementSibling;R!==null;R=R.nextElementSibling)R.classList.contains("q-virtual-scroll--skip")===!1&&(k.offsetEnd+=R[C]);if(t!==e){const R=T.getBoundingClientRect(),r=t.getBoundingClientRect();s===!0?(k.offsetStart+=r.left-R.left,k.offsetEnd-=r.width):(k.offsetStart+=r.top-R.top,k.offsetEnd-=r.height),e!==window&&(k.offsetStart+=k.scrollStart),k.offsetEnd+=k.scrollMaxSize-k.offsetStart}return k}function io(e,t,n,o){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(o===!0&&(t=(Kt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(o===!0&&(t=(Kt===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Ct(e,t,n,o){if(n>=o)return 0;const s=t.length,u=Math.floor(n/Ge),m=Math.floor((o-1)/Ge)+1;let y=e.slice(u,m).reduce(St,0);return n%Ge!==0&&(y-=t.slice(u*Ge,n).reduce(St,0)),o%Ge!==0&&o!==s&&(y-=t.slice(o,m*Ge).reduce(St,0)),y}const qr={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Hr={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...qr};function Lr({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:o}){const s=Ue(),{props:u,emit:m,proxy:y}=s,{$q:T}=y;let C,k,R,r=[],i;const d=ue(0),a=ue(0),l=ue({}),g=ue(null),S=ue(null),w=ue(null),M=ue({from:0,to:0}),O=F(()=>u.tableColspan!==void 0?u.tableColspan:100);o===void 0&&(o=F(()=>u.virtualScrollItemSize));const L=F(()=>o.value+";"+u.virtualScrollHorizontal),G=F(()=>L.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);he(G,()=>{ne()}),he(L,Y);function Y(){re(k,!0)}function E(_){re(_===void 0?k:_)}function p(_,x){const z=t();if(z==null||z.nodeType===8)return;const ae=dn(z,n(),g.value,S.value,u.virtualScrollHorizontal,T.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);R!==ae.scrollViewSize&&ne(ae.scrollViewSize),D(z,ae,Math.min(e.value-1,Math.max(0,parseInt(_,10)||0)),0,Fr.indexOf(x)!==-1?x:k!==-1&&_>k?"end":"start")}function H(){const _=t();if(_==null||_.nodeType===8)return;const x=dn(_,n(),g.value,S.value,u.virtualScrollHorizontal,T.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),z=e.value-1,ae=x.scrollMaxSize-x.offsetStart-x.offsetEnd-a.value;if(C===x.scrollStart)return;if(x.scrollMaxSize<=0){D(_,x,0,0);return}R!==x.scrollViewSize&&ne(x.scrollViewSize),Z(M.value.from);const se=Math.floor(x.scrollMaxSize-Math.max(x.scrollViewSize,x.offsetEnd)-Math.min(i[z],x.scrollViewSize/2));if(se>0&&Math.ceil(x.scrollStart)>=se){D(_,x,z,x.scrollMaxSize-x.offsetEnd-r.reduce(St,0));return}let A=0,W=x.scrollStart-x.offsetStart,ge=W;if(W<=ae&&W+x.scrollViewSize>=d.value)W-=d.value,A=M.value.from,ge=W;else for(let V=0;W>=r[V]&&A<z;V++)W-=r[V],A+=Ge;for(;W>0&&A<z;)W-=i[A],W>-x.scrollViewSize?(A++,ge=W):ge=i[A]+W;D(_,x,A,ge)}function D(_,x,z,ae,se){const A=typeof se=="string"&&se.indexOf("-force")!==-1,W=A===!0?se.replace("-force",""):se,ge=W!==void 0?W:"start";let V=Math.max(0,z-l.value[ge]),Se=V+l.value.total;Se>e.value&&(Se=e.value,V=Math.max(0,Se-l.value.total)),C=x.scrollStart;const Ae=V!==M.value.from||Se!==M.value.to;if(Ae===!1&&W===void 0){ee(z);return}const{activeElement:Ke}=document,Me=w.value;Ae===!0&&Me!==null&&Me!==Ke&&Me.contains(Ke)===!0&&(Me.addEventListener("focusout",I),setTimeout(()=>{Me!==null&&Me.removeEventListener("focusout",I)})),Br(Me,z-V);const Je=W!==void 0?i.slice(V,z).reduce(St,0):0;if(Ae===!0){const B=Se>=M.value.from&&V<=M.value.to?M.value.to:Se;M.value={from:V,to:B},d.value=Ct(r,i,0,V),a.value=Ct(r,i,Se,e.value),requestAnimationFrame(()=>{M.value.to!==Se&&C===x.scrollStart&&(M.value={from:M.value.from,to:Se},a.value=Ct(r,i,Se,e.value))})}requestAnimationFrame(()=>{if(C!==x.scrollStart)return;Ae===!0&&Z(V);const B=i.slice(V,z).reduce(St,0),j=B+x.offsetStart+d.value,te=j+i[z];let fe=j+ae;if(W!==void 0){const q=B-Je,pe=x.scrollStart+q;fe=A!==!0&&pe<j&&te<pe+x.scrollViewSize?pe:W==="end"?te-x.scrollViewSize:j-(W==="start"?0:Math.round((x.scrollViewSize-i[z])/2))}C=fe,io(_,fe,u.virtualScrollHorizontal,T.lang.rtl),ee(z)})}function Z(_){const x=w.value;if(x){const z=Wo.call(x.children,V=>V.classList&&V.classList.contains("q-virtual-scroll--skip")===!1),ae=z.length,se=u.virtualScrollHorizontal===!0?V=>V.getBoundingClientRect().width:V=>V.offsetHeight;let A=_,W,ge;for(let V=0;V<ae;){for(W=se(z[V]),V++;V<ae&&z[V].classList.contains("q-virtual-scroll--with-prev")===!0;)W+=se(z[V]),V++;ge=W-i[A],ge!==0&&(i[A]+=ge,r[Math.floor(A/Ge)]+=ge),A++}}}function I(){w.value!==null&&w.value!==void 0&&w.value.focus()}function re(_,x){const z=1*o.value;(x===!0||Array.isArray(i)===!1)&&(i=[]);const ae=i.length;i.length=e.value;for(let A=e.value-1;A>=ae;A--)i[A]=z;const se=Math.floor((e.value-1)/Ge);r=[];for(let A=0;A<=se;A++){let W=0;const ge=Math.min((A+1)*Ge,e.value);for(let V=A*Ge;V<ge;V++)W+=i[V];r.push(W)}k=-1,C=void 0,d.value=Ct(r,i,0,M.value.from),a.value=Ct(r,i,M.value.to,e.value),_>=0?(Z(M.value.from),Ee(()=>{p(_)})):ve()}function ne(_){if(_===void 0&&typeof window!="undefined"){const W=t();W!=null&&W.nodeType!==8&&(_=dn(W,n(),g.value,S.value,u.virtualScrollHorizontal,T.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}R=_;const x=parseFloat(u.virtualScrollSliceRatioBefore)||0,z=parseFloat(u.virtualScrollSliceRatioAfter)||0,ae=1+x+z,se=_===void 0||_<=0?1:Math.ceil(_/o.value),A=Math.max(1,se,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/ae));l.value={total:Math.ceil(A*ae),start:Math.ceil(A*x),center:Math.ceil(A*(.5+x)),end:Math.ceil(A*(1+x)),view:se}}function U(_,x){const z=u.virtualScrollHorizontal===!0?"width":"height",ae={["--q-virtual-scroll-item-"+z]:o.value+"px"};return[_==="tbody"?$(_,{class:"q-virtual-scroll__padding",key:"before",ref:g},[$("tr",[$("td",{style:{[z]:`${d.value}px`,...ae},colspan:O.value})])]):$(_,{class:"q-virtual-scroll__padding",key:"before",ref:g,style:{[z]:`${d.value}px`,...ae}}),$(_,{class:"q-virtual-scroll__content",key:"content",ref:w,tabindex:-1},x.flat()),_==="tbody"?$(_,{class:"q-virtual-scroll__padding",key:"after",ref:S},[$("tr",[$("td",{style:{[z]:`${a.value}px`,...ae},colspan:O.value})])]):$(_,{class:"q-virtual-scroll__padding",key:"after",ref:S,style:{[z]:`${a.value}px`,...ae}})]}function ee(_){k!==_&&(u.onVirtualScroll!==void 0&&m("virtualScroll",{index:_,from:M.value.from,to:M.value.to-1,direction:_<k?"decrease":"increase",ref:y}),k=_)}ne();const ve=ko(H,T.platform.is.ios===!0?120:35);$i(()=>{ne()});let de=!1;return Pt(()=>{de=!0}),Sn(()=>{if(de!==!0)return;const _=t();C!==void 0&&_!==void 0&&_!==null&&_.nodeType!==8?io(_,C,u.virtualScrollHorizontal,T.lang.rtl):p(k)}),ze(()=>{ve.cancel()}),Object.assign(y,{scrollTo:p,reset:Y,refresh:E}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:l,setVirtualScrollSize:ne,onVirtualScrollEvt:ve,localResetVirtualScroll:re,padVirtualScroll:U,scrollTo:p,reset:Y,refresh:E}}const Ko={name:String};function Go(e){return F(()=>e.name||e.for)}const $r=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,zr=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Nr=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,jr=/[a-z0-9_ -]$/i;function Qo(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Ze.is.firefox===!0?jr.test(n.data)===!1:$r.test(n.data)===!0||zr.test(n.data)===!0||Nr.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}function ro(e,t,n){if(n<=t)return t;const o=n-t+1;let s=t+(e-t)%o;return s<t&&(s=o+s),s===0?0:s}const ao=e=>["add","add-unique","toggle"].includes(e),Wr=".*+?^${}()|[]\\",Kr=Object.keys(Zt);var hn=We({name:"QSelect",inheritAttrs:!1,props:{...Hr,...Ko,...Zt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:ao},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...xn,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:o}=Ue(),{$q:s}=o,u=ue(!1),m=ue(!1),y=ue(-1),T=ue(""),C=ue(!1),k=ue(!1);let R=null,r=null,i,d,a,l=null,g,S,w,M;const O=ue(null),L=ue(null),G=ue(null),Y=ue(null),E=ue(null),p=Go(e),H=Qo(En),D=F(()=>Array.isArray(e.options)?e.options.length:0),Z=F(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:I,virtualScrollSliceSizeComputed:re,localResetVirtualScroll:ne,padVirtualScroll:U,onVirtualScrollEvt:ee,scrollTo:ve,setVirtualScrollSize:de}=Lr({virtualScrollLength:D,getVirtualScrollTarget:ri,getVirtualScrollEl:Dn,virtualScrollItemSizeComputed:Z}),_=Tn(),x=F(()=>{const v=e.mapOptions===!0&&e.multiple!==!0,K=e.modelValue!==void 0&&(e.modelValue!==null||v===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const N=e.mapOptions===!0&&i!==void 0?i:[],ce=K.map(Te=>_e(Te,N));return e.modelValue===null&&v===!0?ce.filter(Te=>Te!==null):ce}return K}),z=F(()=>{const v={};return Kr.forEach(K=>{const N=e[K];N!==void 0&&(v[K]=N)}),v}),ae=F(()=>e.optionsDark===null?_.isDark.value:e.optionsDark),se=F(()=>It(x.value)),A=F(()=>{let v="q-field__input q-placeholder col";return e.hideSelected===!0||x.value.length===0?[v,e.inputClass]:(v+=" q-field__input--padding",e.inputClass===void 0?v:[v,e.inputClass])}),W=F(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ge=F(()=>D.value===0),V=F(()=>x.value.map(v=>Re.value(v)).join(", ")),Se=F(()=>e.displayValue!==void 0?e.displayValue:V.value),Ae=F(()=>e.optionsHtml===!0?()=>!0:v=>v!=null&&v.html===!0),Ke=F(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||x.value.some(Ae.value))),Me=F(()=>_.focused.value===!0?e.tabindex:-1),Je=F(()=>{const v={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${_.targetUid.value}_lb`};return y.value>=0&&(v["aria-activedescendant"]=`${_.targetUid.value}_${y.value}`),v}),B=F(()=>({id:`${_.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),j=F(()=>x.value.map((v,K)=>({index:K,opt:v,html:Ae.value(v),selected:!0,removeAtIndex:b,toggleOption:oe,tabindex:Me.value}))),te=F(()=>{if(D.value===0)return[];const{from:v,to:K}=I.value;return e.options.slice(v,K).map((N,ce)=>{const Te=qe.value(N)===!0,xe=be(N)===!0,Ve=v+ce,De={clickable:!0,active:xe,activeClass:pe.value,manualFocus:!0,focused:!1,disable:Te,tabindex:-1,dense:e.optionsDense,dark:ae.value,role:"option","aria-selected":xe===!0?"true":"false",id:`${_.targetUid.value}_${Ve}`,onClick:()=>{oe(N)}};return Te!==!0&&(y.value===Ve&&(De.focused=!0),s.platform.is.desktop===!0&&(De.onMousemove=()=>{u.value===!0&&le(Ve)})),{index:Ve,opt:N,html:Ae.value(N),label:Re.value(N),selected:De.active,focused:De.focused,toggleOption:oe,setOptionIndex:le,itemProps:De}})}),fe=F(()=>e.dropdownIcon!==void 0?e.dropdownIcon:s.iconSet.arrow.dropdown),q=F(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),pe=F(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ye=F(()=>me(e.optionValue,"value")),Re=F(()=>me(e.optionLabel,"label")),qe=F(()=>me(e.optionDisable,"disable")),Ne=F(()=>x.value.map(v=>ye.value(v))),Be=F(()=>{const v={onInput:En,onChange:H,onKeydown:Rn,onKeyup:nt,onKeypress:In,onFocus:ke,onClick(K){d===!0&&ot(K)}};return v.onCompositionstart=v.onCompositionupdate=v.onCompositionend=H,v});he(x,v=>{i=v,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&_.innerLoading.value!==!0&&(m.value!==!0&&u.value!==!0||se.value!==!0)&&(a!==!0&&gt(),(m.value===!0||u.value===!0)&&pt(""))},{immediate:!0}),he(()=>e.fillInput,gt),he(u,tn),he(D,vi);function f(v){return e.emitValue===!0?ye.value(v):v}function h(v){if(v!==-1&&v<x.value.length)if(e.multiple===!0){const K=e.modelValue.slice();n("remove",{index:v,value:K.splice(v,1)[0]}),n("update:modelValue",K)}else n("update:modelValue",null)}function b(v){h(v),_.focus()}function P(v,K){const N=f(v);if(e.multiple!==!0){e.fillInput===!0&&wt(Re.value(v),!0,!0),n("update:modelValue",N);return}if(x.value.length===0){n("add",{index:0,value:N}),n("update:modelValue",e.multiple===!0?[N]:N);return}if(K===!0&&be(v)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const ce=e.modelValue.slice();n("add",{index:ce.length,value:N}),ce.push(N),n("update:modelValue",ce)}function oe(v,K){if(_.editable.value!==!0||v===void 0||qe.value(v)===!0)return;const N=ye.value(v);if(e.multiple!==!0){K!==!0&&(wt(e.fillInput===!0?Re.value(v):"",!0,!0),rt()),L.value!==null&&L.value.focus(),(x.value.length===0||xt(ye.value(x.value[0]),N)!==!0)&&n("update:modelValue",e.emitValue===!0?N:v);return}if((d!==!0||C.value===!0)&&_.focus(),ke(),x.value.length===0){const xe=e.emitValue===!0?N:v;n("add",{index:0,value:xe}),n("update:modelValue",e.multiple===!0?[xe]:xe);return}const ce=e.modelValue.slice(),Te=Ne.value.findIndex(xe=>xt(xe,N));if(Te!==-1)n("remove",{index:Te,value:ce.splice(Te,1)[0]});else{if(e.maxValues!==void 0&&ce.length>=e.maxValues)return;const xe=e.emitValue===!0?N:v;n("add",{index:ce.length,value:xe}),ce.push(xe)}n("update:modelValue",ce)}function le(v){if(s.platform.is.desktop!==!0)return;const K=v!==-1&&v<D.value?v:-1;y.value!==K&&(y.value=K)}function ie(v=1,K){if(u.value===!0){let N=y.value;do N=ro(N+v,-1,D.value-1);while(N!==-1&&N!==y.value&&qe.value(e.options[N])===!0);y.value!==N&&(le(N),ve(N),K!==!0&&e.useInput===!0&&e.fillInput===!0&&Mt(N>=0?Re.value(e.options[N]):g,!0))}}function _e(v,K){const N=ce=>xt(ye.value(ce),v);return e.options.find(N)||K.find(N)||v}function me(v,K){const N=v!==void 0?v:K;return typeof N=="function"?N:ce=>ce!==null&&typeof ce=="object"&&N in ce?ce[N]:ce}function be(v){const K=ye.value(v);return Ne.value.find(N=>xt(N,K))!==void 0}function ke(v){e.useInput===!0&&L.value!==null&&(v===void 0||L.value===v.target&&v.target.value===V.value)&&L.value.select()}function Oe(v){Yt(v,27)===!0&&u.value===!0&&(ot(v),rt(),gt()),n("keyup",v)}function nt(v){const{value:K}=v.target;if(v.keyCode!==void 0){Oe(v);return}if(v.target.value="",R!==null&&(clearTimeout(R),R=null),r!==null&&(clearTimeout(r),r=null),gt(),typeof K=="string"&&K.length!==0){const N=K.toLocaleLowerCase(),ce=xe=>{const Ve=e.options.find(De=>xe.value(De).toLocaleLowerCase()===N);return Ve===void 0?!1:(x.value.indexOf(Ve)===-1?oe(Ve):rt(),!0)},Te=xe=>{ce(ye)!==!0&&(ce(Re)===!0||xe===!0||pt(K,!0,()=>Te(!0)))};Te()}else _.clearValue(v)}function In(v){n("keypress",v)}function Rn(v){if(n("keydown",v),Do(v)===!0)return;const K=T.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),N=v.shiftKey!==!0&&e.multiple!==!0&&(y.value!==-1||K===!0);if(v.keyCode===27){Ye(v);return}if(v.keyCode===9&&N===!1){mt();return}if(v.target===void 0||v.target.id!==_.targetUid.value||_.editable.value!==!0)return;if(v.keyCode===40&&_.innerLoading.value!==!0&&u.value===!1){je(v),ht();return}if(v.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&T.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?h(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(v.keyCode===35||v.keyCode===36)&&(typeof T.value!="string"||T.value.length===0)&&(je(v),y.value=-1,ie(v.keyCode===36?1:-1,e.multiple)),(v.keyCode===33||v.keyCode===34)&&re.value!==void 0&&(je(v),y.value=Math.max(-1,Math.min(D.value,y.value+(v.keyCode===33?-1:1)*re.value.view)),ie(v.keyCode===33?1:-1,e.multiple)),(v.keyCode===38||v.keyCode===40)&&(je(v),ie(v.keyCode===38?-1:1,e.multiple));const ce=D.value;if((w===void 0||M<Date.now())&&(w=""),ce>0&&e.useInput!==!0&&v.key!==void 0&&v.key.length===1&&v.altKey===!1&&v.ctrlKey===!1&&v.metaKey===!1&&(v.keyCode!==32||w.length!==0)){u.value!==!0&&ht(v);const Te=v.key.toLocaleLowerCase(),xe=w.length===1&&w[0]===Te;M=Date.now()+1500,xe===!1&&(je(v),w+=Te);const Ve=new RegExp("^"+w.split("").map(nn=>Wr.indexOf(nn)!==-1?"\\"+nn:nn).join(".*"),"i");let De=y.value;if(xe===!0||De<0||Ve.test(Re.value(e.options[De]))!==!0)do De=ro(De+1,-1,ce-1);while(De!==y.value&&(qe.value(e.options[De])===!0||Ve.test(Re.value(e.options[De]))!==!0));y.value!==De&&Ee(()=>{le(De),ve(De),De>=0&&e.useInput===!0&&e.fillInput===!0&&Mt(Re.value(e.options[De]),!0)});return}if(!(v.keyCode!==13&&(v.keyCode!==32||e.useInput===!0||w!=="")&&(v.keyCode!==9||N===!1))){if(v.keyCode!==9&&je(v),y.value!==-1&&y.value<ce){oe(e.options[y.value]);return}if(K===!0){const Te=(xe,Ve)=>{if(Ve){if(ao(Ve)!==!0)return}else Ve=e.newValueMode;if(wt("",e.multiple!==!0,!0),xe==null)return;(Ve==="toggle"?oe:P)(xe,Ve==="add-unique"),e.multiple!==!0&&(L.value!==null&&L.value.focus(),rt())};if(e.onNewValue!==void 0?n("newValue",T.value,Te):Te(T.value),e.multiple!==!0)return}u.value===!0?mt():_.innerLoading.value!==!0&&ht()}}function Dn(){return d===!0?E.value:G.value!==null&&G.value.contentEl!==null?G.value.contentEl:void 0}function ri(){return Dn()}function ai(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?j.value.map(v=>t["selected-item"](v)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?j.value.map((v,K)=>$(pr,{key:"option-"+K,removable:_.editable.value===!0&&qe.value(v.opt)!==!0,dense:!0,textColor:e.color,tabindex:Me.value,onRemove(){v.removeAtIndex(K)}},()=>$("span",{class:"ellipsis",[v.html===!0?"innerHTML":"textContent"]:Re.value(v.opt)}))):[$("span",{[Ke.value===!0?"innerHTML":"textContent"]:Se.value})]}function Pn(){if(ge.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:T.value}):void 0;const v=t.option!==void 0?t.option:N=>$(Co,{key:N.index,...N.itemProps},()=>$(To,()=>$(Ti,()=>$("span",{[N.html===!0?"innerHTML":"textContent"]:N.label}))));let K=U("div",te.value.map(v));return t["before-options"]!==void 0&&(K=t["before-options"]().concat(K)),Ni(t["after-options"],K)}function li(v,K){const N=K===!0?{...Je.value,..._.splitAttrs.attributes.value}:void 0,ce={ref:K===!0?L:void 0,key:"i_t",class:A.value,style:e.inputStyle,value:T.value!==void 0?T.value:"",type:"search",...N,id:K===!0?_.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":v===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Be.value};return v!==!0&&d===!0&&(Array.isArray(ce.class)===!0?ce.class=[...ce.class,"no-pointer-events"]:ce.class+=" no-pointer-events"),$("input",ce)}function En(v){R!==null&&(clearTimeout(R),R=null),r!==null&&(clearTimeout(r),r=null),!(v&&v.target&&v.target.qComposing===!0)&&(Mt(v.target.value||""),a=!0,g=T.value,_.focused.value!==!0&&(d!==!0||C.value===!0)&&_.focus(),e.onFilter!==void 0&&(R=setTimeout(()=>{R=null,pt(T.value)},e.inputDebounce)))}function Mt(v,K){T.value!==v&&(T.value=v,K===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",v):r=setTimeout(()=>{r=null,n("inputValue",v)},e.inputDebounce))}function wt(v,K,N){a=N!==!0,e.useInput===!0&&(Mt(v,!0),(K===!0||N!==!0)&&(g=v),K!==!0&&pt(v))}function pt(v,K,N){if(e.onFilter===void 0||K!==!0&&_.focused.value!==!0)return;_.innerLoading.value===!0?n("filterAbort"):(_.innerLoading.value=!0,k.value=!0),v!==""&&e.multiple!==!0&&x.value.length!==0&&a!==!0&&v===Re.value(x.value[0])&&(v="");const ce=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);l!==null&&clearTimeout(l),l=ce,n("filter",v,(Te,xe)=>{(K===!0||_.focused.value===!0)&&l===ce&&(clearTimeout(l),typeof Te=="function"&&Te(),k.value=!1,Ee(()=>{_.innerLoading.value=!1,_.editable.value===!0&&(K===!0?u.value===!0&&rt():u.value===!0?tn(!0):u.value=!0),typeof xe=="function"&&Ee(()=>{xe(o)}),typeof N=="function"&&Ee(()=>{N(o)})}))},()=>{_.focused.value===!0&&l===ce&&(clearTimeout(l),_.innerLoading.value=!1,k.value=!1),u.value===!0&&(u.value=!1)})}function si(){return $(Pr,{ref:G,class:W.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ge.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ae.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:q.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...B.value,onScrollPassive:ee,onBeforeShow:Un,onBeforeHide:ui,onShow:di},Pn)}function ui(v){An(v),mt()}function di(){de()}function ci(v){ot(v),L.value!==null&&L.value.focus(),C.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function fi(v){ot(v),Ee(()=>{C.value=!1})}function pi(){const v=[$(cr,{class:`col-auto ${_.fieldClass.value}`,...z.value,for:_.targetUid.value,dark:ae.value,square:!0,loading:k.value,itemAligned:!1,filled:!0,stackLabel:T.value.length!==0,..._.splitAttrs.listeners.value,onFocus:ci,onBlur:fi},{...t,rawControl:()=>_.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&v.push($("div",{ref:E,class:W.value+" scroll",style:e.popupContentStyle,...B.value,onClick:Ye,onScrollPassive:ee},Pn())),$(Wt,{ref:Y,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:S,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Un,onBeforeHide:mi,onHide:hi,onShow:gi},()=>$("div",{class:"q-select__dialog"+(ae.value===!0?" q-select__dialog--dark q-dark":"")+(C.value===!0?" q-select__dialog--focused":"")},v))}function mi(v){An(v),Y.value!==null&&Y.value.__updateRefocusTarget(_.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),_.focused.value=!1}function hi(v){rt(),_.focused.value===!1&&n("blur",v),gt()}function gi(){const v=document.activeElement;(v===null||v.id!==_.targetUid.value)&&L.value!==null&&L.value!==v&&L.value.focus(),de()}function mt(){m.value!==!0&&(y.value=-1,u.value===!0&&(u.value=!1),_.focused.value===!1&&(l!==null&&(clearTimeout(l),l=null),_.innerLoading.value===!0&&(n("filterAbort"),_.innerLoading.value=!1,k.value=!1)))}function ht(v){_.editable.value===!0&&(d===!0?(_.onControlFocusin(v),m.value=!0,Ee(()=>{_.focus()})):_.focus(),e.onFilter!==void 0?pt(T.value):(ge.value!==!0||t["no-option"]!==void 0)&&(u.value=!0))}function rt(){m.value=!1,mt()}function gt(){e.useInput===!0&&wt(e.multiple!==!0&&e.fillInput===!0&&x.value.length!==0&&Re.value(x.value[0])||"",!0,!0)}function tn(v){let K=-1;if(v===!0){if(x.value.length!==0){const N=ye.value(x.value[0]);K=e.options.findIndex(ce=>xt(ye.value(ce),N))}ne(K)}le(K)}function vi(v,K){u.value===!0&&_.innerLoading.value===!1&&(ne(-1,!0),Ee(()=>{u.value===!0&&_.innerLoading.value===!1&&(v>K?ne():tn(!0))}))}function Mn(){m.value===!1&&G.value!==null&&G.value.updatePosition()}function Un(v){v!==void 0&&ot(v),n("popupShow",v),_.hasPopupOpen=!0,_.onControlFocusin(v)}function An(v){v!==void 0&&ot(v),n("popupHide",v),_.hasPopupOpen=!1,_.onControlFocusout(v)}function On(){d=s.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||ge.value===!1:!0),S=s.platform.is.ios===!0&&d===!0&&e.useInput===!0?"fade":e.transitionShow}return Io(On),zi(Mn),On(),ze(()=>{R!==null&&clearTimeout(R),r!==null&&clearTimeout(r)}),Object.assign(o,{showPopup:ht,hidePopup:rt,removeAtIndex:h,add:P,toggleOption:oe,getOptionIndex:()=>y.value,setOptionIndex:le,moveOptionSelection:ie,filter:pt,updateMenuPosition:Mn,updateInputValue:wt,isOptionSelected:be,getEmittingOptionValue:f,isOptionDisabled:(...v)=>qe.value.apply(null,v)===!0,getOptionValue:(...v)=>ye.value.apply(null,v),getOptionLabel:(...v)=>Re.value.apply(null,v)}),Object.assign(_,{innerValue:x,fieldClass:F(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:O,targetRef:L,hasValue:se,showPopup:ht,floatingLabel:F(()=>e.hideSelected!==!0&&se.value===!0||typeof T.value=="number"||T.value.length!==0||It(e.displayValue)),getControlChild:()=>{if(_.editable.value!==!1&&(m.value===!0||ge.value!==!0||t["no-option"]!==void 0))return d===!0?pi():si();_.hasPopupOpen===!0&&(_.hasPopupOpen=!1)},controlEvents:{onFocusin(v){_.onControlFocusin(v)},onFocusout(v){_.onControlFocusout(v,()=>{gt(),mt()})},onClick(v){if(Ye(v),d!==!0&&u.value===!0){mt(),L.value!==null&&L.value.focus();return}ht(v)}},getControl:v=>{const K=ai(),N=v===!0||m.value!==!0||d!==!0;if(e.useInput===!0)K.push(li(v,N));else if(_.editable.value===!0){const Te=N===!0?Je.value:void 0;K.push($("input",{ref:N===!0?L:void 0,key:"d_t",class:"q-select__focus-target",id:N===!0?_.targetUid.value:void 0,value:Se.value,readonly:!0,"data-autofocus":v===!0||e.autofocus===!0||void 0,...Te,onKeydown:Rn,onKeyup:Oe,onKeypress:In})),N===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&K.push($("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:nt}))}if(p.value!==void 0&&e.disable!==!0&&Ne.value.length!==0){const Te=Ne.value.map(xe=>$("option",{value:xe,selected:!0}));K.push($("select",{class:"hidden",name:p.value,multiple:e.multiple},Te))}const ce=e.useInput===!0||N!==!0?void 0:_.splitAttrs.attributes.value;return $("div",{class:"q-field__native row items-center",...ce,..._.splitAttrs.listeners.value},K)},getInnerAppend:()=>e.loading!==!0&&k.value!==!0&&e.hideDropdownIcon!==!0?[$(vt,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:fe.value})]:null}),Cn(_)}});const lo={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Gt={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Jo=Object.keys(Gt);Jo.forEach(e=>{Gt[e].regex=new RegExp(Gt[e].pattern)});const Gr=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Jo.join("")+"])|(.)","g"),so=/[.*+?^${}()|[\]\\]/g,Pe=String.fromCharCode(1),Qr={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Jr(e,t,n,o){let s,u,m,y,T,C;const k=ue(null),R=ue(i());function r(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}he(()=>e.type+e.autogrow,a),he(()=>e.mask,E=>{if(E!==void 0)l(R.value,!0);else{const p=G(R.value);a(),e.modelValue!==p&&t("update:modelValue",p)}}),he(()=>e.fillMask+e.reverseFillMask,()=>{k.value===!0&&l(R.value,!0)}),he(()=>e.unmaskedValue,()=>{k.value===!0&&l(R.value)});function i(){if(a(),k.value===!0){const E=O(G(e.modelValue));return e.fillMask!==!1?Y(E):E}return e.modelValue}function d(E){if(E<s.length)return s.slice(-E);let p="",H=s;const D=H.indexOf(Pe);if(D!==-1){for(let Z=E-H.length;Z>0;Z--)p+=Pe;H=H.slice(0,D)+p+H.slice(D)}return H}function a(){if(k.value=e.mask!==void 0&&e.mask.length!==0&&r(),k.value===!1){y=void 0,s="",u="";return}const E=lo[e.mask]===void 0?e.mask:lo[e.mask],p=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",H=p.replace(so,"\\$&"),D=[],Z=[],I=[];let re=e.reverseFillMask===!0,ne="",U="";E.replace(Gr,(_,x,z,ae,se)=>{if(ae!==void 0){const A=Gt[ae];I.push(A),U=A.negate,re===!0&&(Z.push("(?:"+U+"+)?("+A.pattern+"+)?(?:"+U+"+)?("+A.pattern+"+)?"),re=!1),Z.push("(?:"+U+"+)?("+A.pattern+")?")}else if(z!==void 0)ne="\\"+(z==="\\"?"":z),I.push(z),D.push("([^"+ne+"]+)?"+ne+"?");else{const A=x!==void 0?x:se;ne=A==="\\"?"\\\\\\\\":A.replace(so,"\\\\$&"),I.push(A),D.push("([^"+ne+"]+)?"+ne+"?")}});const ee=new RegExp("^"+D.join("")+"("+(ne===""?".":"[^"+ne+"]")+"+)?"+(ne===""?"":"["+ne+"]*")+"$"),ve=Z.length-1,de=Z.map((_,x)=>x===0&&e.reverseFillMask===!0?new RegExp("^"+H+"*"+_):x===ve?new RegExp("^"+_+"("+(U===""?".":U)+"+)?"+(e.reverseFillMask===!0?"$":H+"*")):new RegExp("^"+_));m=I,y=_=>{const x=ee.exec(e.reverseFillMask===!0?_:_.slice(0,I.length+1));x!==null&&(_=x.slice(1).join(""));const z=[],ae=de.length;for(let se=0,A=_;se<ae;se++){const W=de[se].exec(A);if(W===null)break;A=A.slice(W.shift().length),z.push(...W)}return z.length!==0?z.join(""):_},s=I.map(_=>typeof _=="string"?_:Pe).join(""),u=s.split(Pe).join(p)}function l(E,p,H){const D=o.value,Z=D.selectionEnd,I=D.value.length-Z,re=G(E);p===!0&&a();const ne=O(re),U=e.fillMask!==!1?Y(ne):ne,ee=R.value!==U;D.value!==U&&(D.value=U),ee===!0&&(R.value=U),document.activeElement===D&&Ee(()=>{if(U===u){const de=e.reverseFillMask===!0?u.length:0;D.setSelectionRange(de,de,"forward");return}if(H==="insertFromPaste"&&e.reverseFillMask!==!0){const de=D.selectionEnd;let _=Z-1;for(let x=T;x<=_&&x<de;x++)s[x]!==Pe&&_++;S.right(D,_);return}if(["deleteContentBackward","deleteContentForward"].indexOf(H)!==-1){const de=e.reverseFillMask===!0?Z===0?U.length>ne.length?1:0:Math.max(0,U.length-(U===u?0:Math.min(ne.length,I)+1))+1:Z;D.setSelectionRange(de,de,"forward");return}if(e.reverseFillMask===!0)if(ee===!0){const de=Math.max(0,U.length-(U===u?0:Math.min(ne.length,I+1)));de===1&&Z===1?D.setSelectionRange(de,de,"forward"):S.rightReverse(D,de)}else{const de=U.length-I;D.setSelectionRange(de,de,"backward")}else if(ee===!0){const de=Math.max(0,s.indexOf(Pe),Math.min(ne.length,Z)-1);S.right(D,de)}else{const de=Z-1;S.right(D,de)}});const ve=e.unmaskedValue===!0?G(U):U;String(e.modelValue)!==ve&&(e.modelValue!==null||ve!=="")&&n(ve,!0)}function g(E,p,H){const D=O(G(E.value));p=Math.max(0,s.indexOf(Pe),Math.min(D.length,p)),T=p,E.setSelectionRange(p,H,"forward")}const S={left(E,p){const H=s.slice(p-1).indexOf(Pe)===-1;let D=Math.max(0,p-1);for(;D>=0;D--)if(s[D]===Pe){p=D,H===!0&&p++;break}if(D<0&&s[p]!==void 0&&s[p]!==Pe)return S.right(E,0);p>=0&&E.setSelectionRange(p,p,"backward")},right(E,p){const H=E.value.length;let D=Math.min(H,p+1);for(;D<=H;D++)if(s[D]===Pe){p=D;break}else s[D-1]===Pe&&(p=D);if(D>H&&s[p-1]!==void 0&&s[p-1]!==Pe)return S.left(E,H);E.setSelectionRange(p,p,"forward")},leftReverse(E,p){const H=d(E.value.length);let D=Math.max(0,p-1);for(;D>=0;D--)if(H[D-1]===Pe){p=D;break}else if(H[D]===Pe&&(p=D,D===0))break;if(D<0&&H[p]!==void 0&&H[p]!==Pe)return S.rightReverse(E,0);p>=0&&E.setSelectionRange(p,p,"backward")},rightReverse(E,p){const H=E.value.length,D=d(H),Z=D.slice(0,p+1).indexOf(Pe)===-1;let I=Math.min(H,p+1);for(;I<=H;I++)if(D[I-1]===Pe){p=I,p>0&&Z===!0&&p--;break}if(I>H&&D[p-1]!==void 0&&D[p-1]!==Pe)return S.leftReverse(E,H);E.setSelectionRange(p,p,"forward")}};function w(E){t("click",E),C=void 0}function M(E){if(t("keydown",E),Do(E)===!0||E.altKey===!0)return;const p=o.value,H=p.selectionStart,D=p.selectionEnd;if(E.shiftKey||(C=void 0),E.keyCode===37||E.keyCode===39){E.shiftKey&&C===void 0&&(C=p.selectionDirection==="forward"?H:D);const Z=S[(E.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(E.preventDefault(),Z(p,C===H?D:H),E.shiftKey){const I=p.selectionStart;p.setSelectionRange(Math.min(C,I),Math.max(C,I),"forward")}}else E.keyCode===8&&e.reverseFillMask!==!0&&H===D?(S.left(p,H),p.setSelectionRange(p.selectionStart,D,"backward")):E.keyCode===46&&e.reverseFillMask===!0&&H===D&&(S.rightReverse(p,D),p.setSelectionRange(H,p.selectionEnd,"forward"))}function O(E){if(E==null||E==="")return"";if(e.reverseFillMask===!0)return L(E);const p=m;let H=0,D="";for(let Z=0;Z<p.length;Z++){const I=E[H],re=p[Z];if(typeof re=="string")D+=re,I===re&&H++;else if(I!==void 0&&re.regex.test(I))D+=re.transform!==void 0?re.transform(I):I,H++;else return D}return D}function L(E){const p=m,H=s.indexOf(Pe);let D=E.length-1,Z="";for(let I=p.length-1;I>=0&&D!==-1;I--){const re=p[I];let ne=E[D];if(typeof re=="string")Z=re+Z,ne===re&&D--;else if(ne!==void 0&&re.regex.test(ne))do Z=(re.transform!==void 0?re.transform(ne):ne)+Z,D--,ne=E[D];while(H===I&&ne!==void 0&&re.regex.test(ne));else return Z}return Z}function G(E){return typeof E!="string"||y===void 0?typeof E=="number"?y(""+E):E:y(E)}function Y(E){return u.length-E.length<=0?E:e.reverseFillMask===!0&&E.length!==0?u.slice(0,-E.length)+E:E+u.slice(E.length)}return{innerValue:R,hasMask:k,moveCursorForPaste:g,updateMaskValue:l,onMaskedKeydown:M,onMaskedClick:w}}function Xr(e,t){function n(){const o=e.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(o)===o&&("length"in o?Array.from(o):[o]).forEach(u=>{s.items.add(u)}),{files:s.files}}catch{return{files:void 0}}}return t===!0?F(()=>{if(e.type==="file")return n()}):F(n)}var Ie=We({name:"QInput",inheritAttrs:!1,props:{...Zt,...Qr,...Ko,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...xn,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:o}=Ue(),{$q:s}=o,u={};let m=NaN,y,T,C=null,k;const R=ue(null),r=Go(e),{innerValue:i,hasMask:d,moveCursorForPaste:a,updateMaskValue:l,onMaskedKeydown:g,onMaskedClick:S}=Jr(e,t,ne,R),w=Xr(e,!0),M=F(()=>It(i.value)),O=Qo(I),L=Tn(),G=F(()=>e.type==="textarea"||e.autogrow===!0),Y=F(()=>G.value===!0||["text","search","url","tel","password"].includes(e.type)),E=F(()=>{const x={...L.splitAttrs.listeners.value,onInput:I,onPaste:Z,onChange:ee,onBlur:ve,onFocus:ot};return x.onCompositionstart=x.onCompositionupdate=x.onCompositionend=O,d.value===!0&&(x.onKeydown=g,x.onClick=S),e.autogrow===!0&&(x.onAnimationend=re),x}),p=F(()=>{const x={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:r.value,...L.splitAttrs.attributes.value,id:L.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return G.value===!1&&(x.type=e.type),e.autogrow===!0&&(x.rows=1),x});he(()=>e.type,()=>{R.value&&(R.value.value=e.modelValue)}),he(()=>e.modelValue,x=>{if(d.value===!0){if(T===!0&&(T=!1,String(x)===m))return;l(x)}else i.value!==x&&(i.value=x,e.type==="number"&&u.hasOwnProperty("value")===!0&&(y===!0?y=!1:delete u.value));e.autogrow===!0&&Ee(U)}),he(()=>e.autogrow,x=>{x===!0?Ee(U):R.value!==null&&n.rows>0&&(R.value.style.height="auto")}),he(()=>e.dense,()=>{e.autogrow===!0&&Ee(U)});function H(){Et(()=>{const x=document.activeElement;R.value!==null&&R.value!==x&&(x===null||x.id!==L.targetUid.value)&&R.value.focus({preventScroll:!0})})}function D(){R.value!==null&&R.value.select()}function Z(x){if(d.value===!0&&e.reverseFillMask!==!0){const z=x.target;a(z,z.selectionStart,z.selectionEnd)}t("paste",x)}function I(x){if(!x||!x.target)return;if(e.type==="file"){t("update:modelValue",x.target.files);return}const z=x.target.value;if(x.target.qComposing===!0){u.value=z;return}if(d.value===!0)l(z,!1,x.inputType);else if(ne(z),Y.value===!0&&x.target===document.activeElement){const{selectionStart:ae,selectionEnd:se}=x.target;ae!==void 0&&se!==void 0&&Ee(()=>{x.target===document.activeElement&&z.indexOf(x.target.value)===0&&x.target.setSelectionRange(ae,se)})}e.autogrow===!0&&U()}function re(x){t("animationend",x),U()}function ne(x,z){k=()=>{C=null,e.type!=="number"&&u.hasOwnProperty("value")===!0&&delete u.value,e.modelValue!==x&&m!==x&&(m=x,z===!0&&(T=!0),t("update:modelValue",x),Ee(()=>{m===x&&(m=NaN)})),k=void 0},e.type==="number"&&(y=!0,u.value=x),e.debounce!==void 0?(C!==null&&clearTimeout(C),u.value=x,C=setTimeout(k,e.debounce)):k()}function U(){requestAnimationFrame(()=>{const x=R.value;if(x!==null){const z=x.parentNode.style,{scrollTop:ae}=x,{overflowY:se,maxHeight:A}=s.platform.is.firefox===!0?{}:window.getComputedStyle(x),W=se!==void 0&&se!=="scroll";W===!0&&(x.style.overflowY="hidden"),z.marginBottom=x.scrollHeight-1+"px",x.style.height="1px",x.style.height=x.scrollHeight+"px",W===!0&&(x.style.overflowY=parseInt(A,10)<x.scrollHeight?"auto":"hidden"),z.marginBottom="",x.scrollTop=ae}})}function ee(x){O(x),C!==null&&(clearTimeout(C),C=null),k!==void 0&&k(),t("change",x.target.value)}function ve(x){x!==void 0&&ot(x),C!==null&&(clearTimeout(C),C=null),k!==void 0&&k(),y=!1,T=!1,delete u.value,e.type!=="file"&&setTimeout(()=>{R.value!==null&&(R.value.value=i.value!==void 0?i.value:"")})}function de(){return u.hasOwnProperty("value")===!0?u.value:i.value!==void 0?i.value:""}ze(()=>{ve()}),ft(()=>{e.autogrow===!0&&U()}),Object.assign(L,{innerValue:i,fieldClass:F(()=>`q-${G.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:F(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:R,emitValue:ne,hasValue:M,floatingLabel:F(()=>M.value===!0&&(e.type!=="number"||isNaN(i.value)===!1)||It(e.displayValue)),getControl:()=>$(G.value===!0?"textarea":"input",{ref:R,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...p.value,...E.value,...e.type!=="file"?{value:de()}:w.value}),getShadowControl:()=>$("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(G.value===!0?"":" text-no-wrap")},[$("span",{class:"invisible"},de()),$("span",e.shadowText)])});const _=Cn(L);return Object.assign(o,{focus:H,select:D,getNativeElement:()=>R.value}),yn(o,"nativeEl",()=>R.value),_}}),Yr=We({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:n}){const o=Ue(),s=ue(null);let u=0;const m=[];function y(i){const d=typeof i=="boolean"?i:e.noErrorFocus!==!0,a=++u,l=(w,M)=>{n("validation"+(w===!0?"Success":"Error"),M)},g=w=>{const M=w.validate();return typeof M.then=="function"?M.then(O=>({valid:O,comp:w}),O=>({valid:!1,comp:w,err:O})):Promise.resolve({valid:M,comp:w})};return(e.greedy===!0?Promise.all(m.map(g)).then(w=>w.filter(M=>M.valid!==!0)):m.reduce((w,M)=>w.then(()=>g(M).then(O=>{if(O.valid===!1)return Promise.reject(O)})),Promise.resolve()).catch(w=>[w])).then(w=>{if(w===void 0||w.length===0)return a===u&&l(!0),!0;if(a===u){const{comp:M,err:O}=w[0];if(O!==void 0&&console.error(O),l(!1,M),d===!0){const L=w.find(({comp:G})=>typeof G.focus=="function"&&bn(G.$)===!1);L!==void 0&&L.comp.focus()}}return!1})}function T(){u++,m.forEach(i=>{typeof i.resetValidation=="function"&&i.resetValidation()})}function C(i){i!==void 0&&je(i);const d=u+1;y().then(a=>{d===u&&a===!0&&(e.onSubmit!==void 0?n("submit",i):i!==void 0&&i.target!==void 0&&typeof i.target.submit=="function"&&i.target.submit())})}function k(i){i!==void 0&&je(i),n("reset"),Ee(()=>{T(),e.autofocus===!0&&e.noResetFocus!==!0&&R()})}function R(){Et(()=>{if(s.value===null)return;const i=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),d=>d.tabIndex!==-1);i!=null&&i.focus({preventScroll:!0})})}ji(_o,{bindComponent(i){m.push(i)},unbindComponent(i){const d=m.indexOf(i);d!==-1&&m.splice(d,1)}});let r=!1;return Pt(()=>{r=!0}),Sn(()=>{r===!0&&e.autofocus===!0&&R()}),ft(()=>{e.autofocus===!0&&R()}),Object.assign(o.proxy,{validate:y,resetValidation:T,submit:C,reset:k,focus:R,getValidationComponents:()=>m}),()=>$("form",{class:"q-form",ref:s,onSubmit:C,onReset:k},Qe(t.default))}});const Zr=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],ea=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var Xo=We({name:"QSkeleton",props:{...Rt,tag:{type:String,default:"div"},type:{type:String,validator:e=>Zr.includes(e),default:"rect"},animation:{type:String,validator:e=>ea.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const n=Ue(),o=Dt(e,n.proxy.$q),s=F(()=>{const m=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:m[0],height:m[1]}}),u=F(()=>`q-skeleton q-skeleton--${o.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>$(e.tag,{class:u.value,style:s.value},Qe(t.default))}});const ta={id:"IdCardFront",class:"front-id",style:{"background-color":"white",height:"12.75cm",width:"8.1cm","font-size":"7pt",position:"relative","background-image":"url('/images/REG_ID_Front_Temp.jpg')","background-position":"center","background-repeat":"no-repeat","background-size":"contain"}},na={style:{"writing-mode":"vertical-rl","text-orientation":"upright",position:"absolute",top:"75px",left:"5px","font-size":"12pt",color:"white","font-weight":"500","text-shadow":"0px 2px 2px black"}},oa={style:{width:"177px",height:"177px","border-radius":"100%",position:"absolute",top:"76px",left:"76px",overflow:"hidden"}},ia=["hidden","src"],ra={style:{"text-align":"left",position:"absolute",top:"261px",left:"107px","font-size":"13pt","font-weight":"500"}},aa=X("b",null,"ID NO.:",-1),uo=Object.assign({name:"IdCardFront",data(){return{imageIsLoading:"loaded",imgSrcFromServer:null}},watch:{"details.employees_id"(e,t){e&&this.$nextTick(()=>{this.getPhoto()})},timestamp(e){e&&(this.imageIsLoading="loading",this.$nextTick(()=>{this.getPhoto()}))}},methods:{getPhoto(){this.imageIsLoading="loading",this.imgSrcFromServer="#",this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getPhoto:!0,employees_id:this.details.employees_id}).then(({data:e})=>{this.imgSrcFromServer=e,this.imageIsLoading="loaded"}).catch(e=>{console.error(e)})}}},{__name:"IdCardFront",props:{details:{type:Object,required:!0},timestamp:{type:Number,required:!0},textFormat:{type:Object,required:!0},photoFormat:{type:Object,required:!0}},setup(e){return(t,n)=>(it(),ct("div",ta,[X("div",na,Ce(e.details.employmentStatus?`${e.details.employmentStatus} EMPLOYEE`:""),1),X("div",oa,[X("img",{hidden:t.imageIsLoading=="loading",onLoad:n[0]||(n[0]=o=>t.imageIsLoading="loaded"),src:t.imgSrcFromServer,style:Ut([{position:"relative"},`bottom:${e.photoFormat.top}px; right: ${e.photoFormat.left}px; transform: scale(${e.photoFormat.scale})`])},null,44,ia),J(Xo,{style:{width:"250px",height:"188px"},hidden:t.imageIsLoading=="loaded"},null,8,["hidden"])]),X("div",ra,[aa,et(" "+Ce(e.details.empno?`${e.details.empno.substr(0,1)}-${e.details.empno.substr(-4,4)}`:"_ - ____"),1)]),X("div",{style:Ut([`font-size:${e.textFormat.lastName.font_size}px; bottom: ${e.textFormat.lastName.bottom}px;
        left: ${e.textFormat.lastName.left}px; `,{width:"100%","text-align":"left","font-weight":"500",position:"absolute"}])},Ce(e.details.lastName)+Ce(e.details.extName?", "+e.details.extName:""),5),X("div",{style:Ut([{width:"100%","text-align":"left","font-weight":"700",position:"absolute"},`font-size:${e.textFormat.firstName.font_size}px; bottom: ${e.textFormat.firstName.bottom}px;
        left: ${e.textFormat.firstName.left}px; `])},Ce(e.details.firstName)+" "+Ce(e.details.middleName?e.details.middleName[0]+". ":""),5),X("div",{style:Ut([{width:"258px","text-align":"left","font-stretch":"ultra-expanded",position:"absolute"},`font-size:${e.textFormat.position.font_size}px; bottom: ${e.textFormat.position.bottom}px;
        left: ${e.textFormat.position.left}px; line-height: ${e.textFormat.position.line_height}px;`])},Ce(e.details.position),5)]))}});var Qt=We({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=F(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>$(e.tag,{class:n.value},Qe(t.default))}}),gn=We({name:"QCard",props:{...Rt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ue(),o=Dt(e,n),s=F(()=>"q-card"+(o.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>$(e.tag,{class:s.value},Qe(t.default))}}),la="/assets/get_sig.0d2f964a.png";/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define(e);else if(typeof ses!="undefined")if(ses.ok())ses.makeQ=e;else return;else if(typeof window!="undefined"||typeof self!="undefined"){var t=typeof window!="undefined"?window:self,n=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=n,this}}else throw new Error("This environment was not anticipated by Q. Please file a bug.")})(function(){var e=!1;try{throw new Error}catch(f){e=!!f.stack}var t=Y(),n,o=function(){},s=function(){var f={task:void 0,next:null},h=f,b=!1,P=void 0,oe=!1,le=[];function ie(){for(var ke,Oe;f.next;)f=f.next,ke=f.task,f.task=void 0,Oe=f.domain,Oe&&(f.domain=void 0,Oe.enter()),_e(ke,Oe);for(;le.length;)ke=le.pop(),_e(ke);b=!1}function _e(ke,Oe){try{ke()}catch(nt){if(oe)throw Oe&&Oe.exit(),setTimeout(ie,0),Oe&&Oe.enter(),nt;setTimeout(function(){throw nt},0)}Oe&&Oe.exit()}if(s=function(ke){h=h.next={task:ke,domain:oe&&process.domain,next:null},b||(b=!0,P())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)oe=!0,P=function(){process.nextTick(ie)};else if(typeof setImmediate=="function")typeof window!="undefined"?P=setImmediate.bind(window,ie):P=function(){setImmediate(ie)};else if(typeof MessageChannel!="undefined"){var me=new MessageChannel;me.port1.onmessage=function(){P=be,me.port1.onmessage=ie,ie()};var be=function(){me.port2.postMessage(0)};P=function(){setTimeout(ie,0),be()}}else P=function(){setTimeout(ie,0)};return s.runAfter=function(ke){le.push(ke),b||(b=!0,P())},s}(),u=Function.call;function m(f){return function(){return u.apply(f,arguments)}}var y=m(Array.prototype.slice),T=m(Array.prototype.reduce||function(f,h){var b=0,P=this.length;if(arguments.length===1)do{if(b in this){h=this[b++];break}if(++b>=P)throw new TypeError}while(1);for(;b<P;b++)b in this&&(h=f(h,this[b],b));return h}),C=m(Array.prototype.indexOf||function(f){for(var h=0;h<this.length;h++)if(this[h]===f)return h;return-1}),k=m(Array.prototype.map||function(f,h){var b=this,P=[];return T(b,function(oe,le,ie){P.push(f.call(h,le,ie,b))},void 0),P}),R=Object.create||function(f){function h(){}return h.prototype=f,new h},r=m(Object.prototype.hasOwnProperty),i=Object.keys||function(f){var h=[];for(var b in f)r(f,b)&&h.push(b);return h},d=m(Object.prototype.toString);function a(f){return f===Object(f)}function l(f){return d(f)==="[object StopIteration]"||f instanceof g}var g;typeof ReturnValue!="undefined"?g=ReturnValue:g=function(f){this.value=f};var S="From previous event:";function w(f,h){if(e&&h.stack&&typeof f=="object"&&f!==null&&f.stack&&f.stack.indexOf(S)===-1){for(var b=[],P=h;P;P=P.source)P.stack&&b.unshift(P.stack);b.unshift(f.stack);var oe=b.join(`
`+S+`
`);f.stack=M(oe)}}function M(f){for(var h=f.split(`
`),b=[],P=0;P<h.length;++P){var oe=h[P];!G(oe)&&!O(oe)&&oe&&b.push(oe)}return b.join(`
`)}function O(f){return f.indexOf("(module.js:")!==-1||f.indexOf("(node.js:")!==-1}function L(f){var h=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(f);if(h)return[h[1],Number(h[2])];var b=/at ([^ ]+):(\d+):(?:\d+)$/.exec(f);if(b)return[b[1],Number(b[2])];var P=/.*@(.+):(\d+)$/.exec(f);if(P)return[P[1],Number(P[2])]}function G(f){var h=L(f);if(!h)return!1;var b=h[0],P=h[1];return b===n&&P>=t&&P<=Be}function Y(){if(!!e)try{throw new Error}catch(P){var f=P.stack.split(`
`),h=f[0].indexOf("@")>0?f[1]:f[2],b=L(h);return b?(n=b[0],b[1]):void 0}}function E(f,h,b){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(h+" is deprecated, use "+b+" instead.",new Error("").stack),f.apply(f,arguments)}}function p(f){return f instanceof I?f:ee(f)?Ae(f):Se(f)}p.resolve=p,p.nextTick=s,p.longStackSupport=!1,typeof process=="object"&&process&&process.env&&{}.Q_DEBUG&&(p.longStackSupport=!0),p.defer=H;function H(){var f=[],h=[],b,P=R(H.prototype),oe=R(I.prototype);if(oe.promiseDispatch=function(ie,_e,me){var be=y(arguments);f?(f.push(be),_e==="when"&&me[1]&&h.push(me[1])):p.nextTick(function(){b.promiseDispatch.apply(b,be)})},oe.valueOf=function(){if(f)return oe;var ie=ne(b);return U(ie)&&(b=ie),ie},oe.inspect=function(){return b?b.inspect():{state:"pending"}},p.longStackSupport&&e)try{throw new Error}catch(ie){oe.stack=ie.stack.substring(ie.stack.indexOf(`
`)+1)}function le(ie){b=ie,oe.source=ie,T(f,function(_e,me){p.nextTick(function(){ie.promiseDispatch.apply(ie,me)})},void 0),f=void 0,h=void 0}return P.promise=oe,P.resolve=function(ie){b||le(p(ie))},P.fulfill=function(ie){b||le(Se(ie))},P.reject=function(ie){b||le(V(ie))},P.notify=function(ie){b||T(h,function(_e,me){p.nextTick(function(){me(ie)})},void 0)},P}H.prototype.makeNodeResolver=function(){var f=this;return function(h,b){h?f.reject(h):arguments.length>2?f.resolve(y(arguments,1)):f.resolve(b)}},p.Promise=D,p.promise=D;function D(f){if(typeof f!="function")throw new TypeError("resolver must be a function.");var h=H();try{f(h.resolve,h.reject,h.notify)}catch(b){h.reject(b)}return h.promise}D.race=Z,D.all=q,D.reject=V,D.resolve=p,p.passByCopy=function(f){return f},I.prototype.passByCopy=function(){return this},p.join=function(f,h){return p(f).join(h)},I.prototype.join=function(f){return p([this,f]).spread(function(h,b){if(h===b)return h;throw new Error("Q can't join: not the same: "+h+" "+b)})},p.race=Z;function Z(f){return D(function(h,b){for(var P=0,oe=f.length;P<oe;P++)p(f[P]).then(h,b)})}I.prototype.race=function(){return this.then(p.race)},p.makePromise=I;function I(f,h,b){h===void 0&&(h=function(le){return V(new Error("Promise does not support operation: "+le))}),b===void 0&&(b=function(){return{state:"unknown"}});var P=R(I.prototype);if(P.promiseDispatch=function(le,ie,_e){var me;try{f[ie]?me=f[ie].apply(P,_e):me=h.call(P,ie,_e)}catch(be){me=V(be)}le&&le(me)},P.inspect=b,b){var oe=b();oe.state==="rejected"&&(P.exception=oe.reason),P.valueOf=function(){var le=b();return le.state==="pending"||le.state==="rejected"?P:le.value}}return P}I.prototype.toString=function(){return"[object Promise]"},I.prototype.then=function(f,h,b){var P=this,oe=H(),le=!1;function ie(be){try{return typeof f=="function"?f(be):be}catch(ke){return V(ke)}}function _e(be){if(typeof h=="function"){w(be,P);try{return h(be)}catch(ke){return V(ke)}}return V(be)}function me(be){return typeof b=="function"?b(be):be}return p.nextTick(function(){P.promiseDispatch(function(be){le||(le=!0,oe.resolve(ie(be)))},"when",[function(be){le||(le=!0,oe.resolve(_e(be)))}])}),P.promiseDispatch(void 0,"when",[void 0,function(be){var ke,Oe=!1;try{ke=me(be)}catch(nt){if(Oe=!0,p.onerror)p.onerror(nt);else throw nt}Oe||oe.notify(ke)}]),oe.promise},p.tap=function(f,h){return p(f).tap(h)},I.prototype.tap=function(f){return f=p(f),this.then(function(h){return f.fcall(h).thenResolve(h)})},p.when=re;function re(f,h,b,P){return p(f).then(h,b,P)}I.prototype.thenResolve=function(f){return this.then(function(){return f})},p.thenResolve=function(f,h){return p(f).thenResolve(h)},I.prototype.thenReject=function(f){return this.then(function(){throw f})},p.thenReject=function(f,h){return p(f).thenReject(h)},p.nearer=ne;function ne(f){if(U(f)){var h=f.inspect();if(h.state==="fulfilled")return h.value}return f}p.isPromise=U;function U(f){return f instanceof I}p.isPromiseAlike=ee;function ee(f){return a(f)&&typeof f.then=="function"}p.isPending=ve;function ve(f){return U(f)&&f.inspect().state==="pending"}I.prototype.isPending=function(){return this.inspect().state==="pending"},p.isFulfilled=de;function de(f){return!U(f)||f.inspect().state==="fulfilled"}I.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},p.isRejected=_;function _(f){return U(f)&&f.inspect().state==="rejected"}I.prototype.isRejected=function(){return this.inspect().state==="rejected"};var x=[],z=[],ae=[],se=!0;function A(){x.length=0,z.length=0,se||(se=!0)}function W(f,h){!se||(typeof process=="object"&&typeof process.emit=="function"&&p.nextTick.runAfter(function(){C(z,f)!==-1&&(process.emit("unhandledRejection",h,f),ae.push(f))}),z.push(f),h&&typeof h.stack!="undefined"?x.push(h.stack):x.push("(no stack) "+h))}function ge(f){if(!!se){var h=C(z,f);h!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&p.nextTick.runAfter(function(){var b=C(ae,f);b!==-1&&(process.emit("rejectionHandled",x[h],f),ae.splice(b,1))}),z.splice(h,1),x.splice(h,1))}}p.resetUnhandledRejections=A,p.getUnhandledReasons=function(){return x.slice()},p.stopUnhandledRejectionTracking=function(){A(),se=!1},A(),p.reject=V;function V(f){var h=I({when:function(b){return b&&ge(this),b?b(f):this}},function(){return this},function(){return{state:"rejected",reason:f}});return W(h,f),h}p.fulfill=Se;function Se(f){return I({when:function(){return f},get:function(h){return f[h]},set:function(h,b){f[h]=b},delete:function(h){delete f[h]},post:function(h,b){return h==null?f.apply(void 0,b):f[h].apply(f,b)},apply:function(h,b){return f.apply(h,b)},keys:function(){return i(f)}},void 0,function(){return{state:"fulfilled",value:f}})}function Ae(f){var h=H();return p.nextTick(function(){try{f.then(h.resolve,h.reject,h.notify)}catch(b){h.reject(b)}}),h.promise}p.master=Ke;function Ke(f){return I({isDef:function(){}},function(b,P){return fe(f,b,P)},function(){return p(f).inspect()})}p.spread=Me;function Me(f,h,b){return p(f).spread(h,b)}I.prototype.spread=function(f,h){return this.all().then(function(b){return f.apply(void 0,b)},h)},p.async=Je;function Je(f){return function(){function h(le,ie){var _e;if(typeof StopIteration=="undefined"){try{_e=b[le](ie)}catch(me){return V(me)}return _e.done?p(_e.value):re(_e.value,P,oe)}else{try{_e=b[le](ie)}catch(me){return l(me)?p(me.value):V(me)}return re(_e,P,oe)}}var b=f.apply(this,arguments),P=h.bind(h,"next"),oe=h.bind(h,"throw");return P()}}p.spawn=B;function B(f){p.done(p.async(f)())}p.return=j;function j(f){throw new g(f)}p.promised=te;function te(f){return function(){return Me([this,q(arguments)],function(h,b){return f.apply(h,b)})}}p.dispatch=fe;function fe(f,h,b){return p(f).dispatch(h,b)}I.prototype.dispatch=function(f,h){var b=this,P=H();return p.nextTick(function(){b.promiseDispatch(P.resolve,f,h)}),P.promise},p.get=function(f,h){return p(f).dispatch("get",[h])},I.prototype.get=function(f){return this.dispatch("get",[f])},p.set=function(f,h,b){return p(f).dispatch("set",[h,b])},I.prototype.set=function(f,h){return this.dispatch("set",[f,h])},p.del=p.delete=function(f,h){return p(f).dispatch("delete",[h])},I.prototype.del=I.prototype.delete=function(f){return this.dispatch("delete",[f])},p.mapply=p.post=function(f,h,b){return p(f).dispatch("post",[h,b])},I.prototype.mapply=I.prototype.post=function(f,h){return this.dispatch("post",[f,h])},p.send=p.mcall=p.invoke=function(f,h){return p(f).dispatch("post",[h,y(arguments,2)])},I.prototype.send=I.prototype.mcall=I.prototype.invoke=function(f){return this.dispatch("post",[f,y(arguments,1)])},p.fapply=function(f,h){return p(f).dispatch("apply",[void 0,h])},I.prototype.fapply=function(f){return this.dispatch("apply",[void 0,f])},p.try=p.fcall=function(f){return p(f).dispatch("apply",[void 0,y(arguments,1)])},I.prototype.fcall=function(){return this.dispatch("apply",[void 0,y(arguments)])},p.fbind=function(f){var h=p(f),b=y(arguments,1);return function(){return h.dispatch("apply",[this,b.concat(y(arguments))])}},I.prototype.fbind=function(){var f=this,h=y(arguments);return function(){return f.dispatch("apply",[this,h.concat(y(arguments))])}},p.keys=function(f){return p(f).dispatch("keys",[])},I.prototype.keys=function(){return this.dispatch("keys",[])},p.all=q;function q(f){return re(f,function(h){var b=0,P=H();return T(h,function(oe,le,ie){var _e;U(le)&&(_e=le.inspect()).state==="fulfilled"?h[ie]=_e.value:(++b,re(le,function(me){h[ie]=me,--b===0&&P.resolve(h)},P.reject,function(me){P.notify({index:ie,value:me})}))},void 0),b===0&&P.resolve(h),P.promise})}I.prototype.all=function(){return q(this)},p.any=pe;function pe(f){if(f.length===0)return p.resolve();var h=p.defer(),b=0;return T(f,function(P,oe,le){var ie=f[le];b++,re(ie,_e,me,be);function _e(ke){h.resolve(ke)}function me(){b--,b===0&&h.reject(new Error("Q can't get fulfillment value from any promise, all promises were rejected."))}function be(ke){h.notify({index:le,value:ke})}},void 0),h.promise}I.prototype.any=function(){return pe(this)},p.allResolved=E(ye,"allResolved","allSettled");function ye(f){return re(f,function(h){return h=k(h,p),re(q(k(h,function(b){return re(b,o,o)})),function(){return h})})}I.prototype.allResolved=function(){return ye(this)},p.allSettled=Re;function Re(f){return p(f).allSettled()}I.prototype.allSettled=function(){return this.then(function(f){return q(k(f,function(h){h=p(h);function b(){return h.inspect()}return h.then(b,b)}))})},p.fail=p.catch=function(f,h){return p(f).then(void 0,h)},I.prototype.fail=I.prototype.catch=function(f){return this.then(void 0,f)},p.progress=qe;function qe(f,h){return p(f).then(void 0,void 0,h)}I.prototype.progress=function(f){return this.then(void 0,void 0,f)},p.fin=p.finally=function(f,h){return p(f).finally(h)},I.prototype.fin=I.prototype.finally=function(f){if(!f||typeof f.apply!="function")throw new Error("Q can't apply finally callback");return f=p(f),this.then(function(h){return f.fcall().then(function(){return h})},function(h){return f.fcall().then(function(){throw h})})},p.done=function(f,h,b,P){return p(f).done(h,b,P)},I.prototype.done=function(f,h,b){var P=function(le){p.nextTick(function(){if(w(le,oe),p.onerror)p.onerror(le);else throw le})},oe=f||h||b?this.then(f,h,b):this;typeof process=="object"&&process&&process.domain&&(P=process.domain.bind(P)),oe.then(void 0,P)},p.timeout=function(f,h,b){return p(f).timeout(h,b)},I.prototype.timeout=function(f,h){var b=H(),P=setTimeout(function(){(!h||typeof h=="string")&&(h=new Error(h||"Timed out after "+f+" ms"),h.code="ETIMEDOUT"),b.reject(h)},f);return this.then(function(oe){clearTimeout(P),b.resolve(oe)},function(oe){clearTimeout(P),b.reject(oe)},b.notify),b.promise},p.delay=function(f,h){return h===void 0&&(h=f,f=void 0),p(f).delay(h)},I.prototype.delay=function(f){return this.then(function(h){var b=H();return setTimeout(function(){b.resolve(h)},f),b.promise})},p.nfapply=function(f,h){return p(f).nfapply(h)},I.prototype.nfapply=function(f){var h=H(),b=y(f);return b.push(h.makeNodeResolver()),this.fapply(b).fail(h.reject),h.promise},p.nfcall=function(f){var h=y(arguments,1);return p(f).nfapply(h)},I.prototype.nfcall=function(){var f=y(arguments),h=H();return f.push(h.makeNodeResolver()),this.fapply(f).fail(h.reject),h.promise},p.nfbind=p.denodeify=function(f){if(f===void 0)throw new Error("Q can't wrap an undefined function");var h=y(arguments,1);return function(){var b=h.concat(y(arguments)),P=H();return b.push(P.makeNodeResolver()),p(f).fapply(b).fail(P.reject),P.promise}},I.prototype.nfbind=I.prototype.denodeify=function(){var f=y(arguments);return f.unshift(this),p.denodeify.apply(void 0,f)},p.nbind=function(f,h){var b=y(arguments,2);return function(){var P=b.concat(y(arguments)),oe=H();P.push(oe.makeNodeResolver());function le(){return f.apply(h,arguments)}return p(le).fapply(P).fail(oe.reject),oe.promise}},I.prototype.nbind=function(){var f=y(arguments,0);return f.unshift(this),p.nbind.apply(void 0,f)},p.nmapply=p.npost=function(f,h,b){return p(f).npost(h,b)},I.prototype.nmapply=I.prototype.npost=function(f,h){var b=y(h||[]),P=H();return b.push(P.makeNodeResolver()),this.dispatch("post",[f,b]).fail(P.reject),P.promise},p.nsend=p.nmcall=p.ninvoke=function(f,h){var b=y(arguments,2),P=H();return b.push(P.makeNodeResolver()),p(f).dispatch("post",[h,b]).fail(P.reject),P.promise},I.prototype.nsend=I.prototype.nmcall=I.prototype.ninvoke=function(f){var h=y(arguments,1),b=H();return h.push(b.makeNodeResolver()),this.dispatch("post",[f,h]).fail(b.reject),b.promise},p.nodeify=Ne;function Ne(f,h){return p(f).nodeify(h)}I.prototype.nodeify=function(f){if(f)this.then(function(h){p.nextTick(function(){f(null,h)})},function(h){p.nextTick(function(){f(h)})});else return this},p.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Be=Y();return p});var c=c||{};c.STUConstructor=function(){var e,t=65535,n=0,o=0,s={},u={};function m(r){return typeof r!="undefined"}function y(){return n++}function T(){return o++}function C(r){var i=9e3,d=this;m(r)||(r=i),this.onDCAtimeout=null,e=new WebSocket("wss://localhost:"+r.toString()+"/ws"),e.onopen=function(){console.log("connected")},e.onmessage=k,e.onclose=function(){console.log("disconnected"),typeof d.onDCAtimeout=="function"&&d.onDCAtimeout()}}C.prototype.Reinitialize=function(){c.STU=new c.STUConstructor},C.prototype.isServiceReady=function(){return e.readyState==1},C.prototype.isDCAReady=function(){var r=Q.defer();return c.STU.isServiceReady()?(setTimeout(function(){r.promise.isPending()&&(c.STU.isServiceReady()&&c.STU.close(),r.resolve(!1))},1e3),c.STU.getUsbDevices().then(function(i){r.promise.isPending()&&r.resolve(!0)}).fail(function(i){r.promise.isPending()&&r.resolve(!0)})):r.resolve(!1),r.promise},C.prototype.close=function(){e.close()};function k(r){if(typeof r.data!="undefined"&&r.data!=""){var i=JSON.parse(r.data);if(m(i.ticket)&&m(s[i.ticket]))m(i.success)&&i.success==!0&&m(i.data)?s[i.ticket].resolve(i.data):s[i.ticket].reject(new Error(m(i.error)?i.error:"")),delete s[i.ticket];else if(m(i.stream)&&m(u[i.stream])&&m(i.data))u[i.stream].stream(i.data);else throw new Error("websocket invalid message: "+r.data)}else console.log("Unexpected message type "+typeof r+" = "+JSON.stringify(r))}function R(r){for(var i=r.length,d=0;d<i;){var a=d+t<i?"0":"1",l=r.substr(d,t);e.send(a+l),d+=t}}return C.prototype.VendorId={VendorId_Wacom:1386},C.prototype.ProductId={ProductId_500:161,ProductId_300:162,ProductId_520A:163,ProductId_430:164,ProductId_530:165,ProductId_430V:166,ProductId_540:168,ProductId_541:169},C.prototype.ProductId_min=161,C.prototype.ProductId_max=175,C.prototype.send=function(r){var i=Q.defer();try{var d=y();r.ticket=d;var a=JSON.stringify(r);R(a),s[d]=i}catch(l){i.reject(l)}return i.promise},C.prototype.sendNoReturn=function(r){var i=JSON.stringify(r);R(i)},C.prototype.setStream=function(r){var i=T();return u[i]=r,i},C.prototype.removeStream=function(r){delete u[r]},C.prototype.getUsbDevices=function(){return c.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"getUsbDevices"})},C.prototype.getTlsDevices=function(){return c.STU.send({scope:"WacomGSS.STU.GetTlsDevices",function:"getTlsDevices"})},C.prototype.isSupportedUsbDevice=function(r,i){return c.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"isSupportedUsbDevice",idVendor:r,idProduct:i})},C.prototype.getStringUsbDevice=function(r){function i(d){return("0000"+d.toString(16)).substr(-4)}return i(r.idVendor)+":"+i(r.idProduct)+":"+i(r.bcdDevice)},C.prototype.SerialPort={Type:{Unknown:0,Physical:1,Virtual:2,Remote:3}},C.prototype.getSerialPorts=function(){return c.STU.send({scope:"WacomGSS.STU.GetSerialPorts",function:"getSerialPorts"})},C.prototype.UsbInterface=function(){var r="WacomGSS.STU.UsbInterface",i="";function d(){}return d.prototype.Constructor=function(){return c.STU.send({scope:r,function:"Constructor"}).then(function(a){return i=a.id,a})},d.prototype.connect=function(a,l){return c.STU.send({scope:r,id:i,function:"connect",usbDevice:a,exclusiveLock:l})},d.prototype.toJSON=function(){return{id:i,scope:r}},d.prototype.disconnect=function(){return c.STU.send({scope:r,id:i,function:"disconnect"})},d.prototype.isConnected=function(){return c.STU.send({scope:r,id:i,function:"isConnected"})},d.prototype.queueNotifyAll=function(){return c.STU.send({scope:r,id:i,function:"queueNotifyAll"})},d.prototype.queueSetPredicateAll=function(a){return c.STU.send({scope:r,id:i,function:"queueSetPredicateAll",predicate:a})},d.prototype.get=function(a){return c.STU.send({scope:r,id:i,function:"get_",length:a})},d.prototype.set=function(a){return c.STU.send({scope:r,id:i,function:"set",base64Data:a})},d.prototype.supportsWrite=function(){return c.STU.send({scope:r,id:i,function:"supportsWrite"})},d.prototype.write=function(a){return c.STU.send({scope:r,id:i,function:"write",base64Data:a})},d.prototype.getReportCountLengths=function(){return c.STU.send({scope:r,id:i,function:"getReportCountLengths"})},d.prototype.getProductId=function(){return c.STU.send({scope:r,id:i,function:"getProductId"})},d}(),C.prototype.Protocol=function(){var r="WacomGSS.STU.Protocol",i="",d={};function a(){}return a.prototype.PenDataOptionMode={PenDataOptionMode_None:0,PenDataOptionMode_TimeCount:1,PenDataOptionMode_SequenceNumber:2,PenDataOptionMode_TimeCountSequence:3},a.prototype.InkingMode={InkingMode_Off:0,InkingMode_On:1},a.prototype.ReportId={ReportId_PenData:1,ReportId_Status:3,ReportId_Reset:4,ReportId_HidInformation:6,ReportId_Information:8,ReportId_Capability:9,ReportId_Uid:10,ReportId_Uid2:11,ReportId_DefaultMode:12,ReportId_ReportRate:13,ReportId_RenderingMode:14,ReportId_Eserial:15,ReportId_PenDataEncrypted:16,ReportId_HostPublicKey:19,ReportId_DevicePublicKey:20,ReportId_StartCapture:21,ReportId_EndCapture:22,ReportId_DHprime:26,ReportId_DHbase:27,ReportId_ClearScreen:32,ReportId_InkingMode:33,ReportId_InkThreshold:34,ReportId_ClearScreenArea:35,ReportId_StartImageDataArea:36,ReportId_StartImageData:37,ReportId_ImageDataBlock:38,ReportId_EndImageData:39,ReportId_HandwritingThicknessColor:40,ReportId_BackgroundColor:41,ReportId_HandwritingDisplayArea:42,ReportId_BacklightBrightness:43,ReportId_ScreenContrast:44,ReportId_HandwritingThicknessColor24:45,ReportId_BackgroundColor24:46,ReportId_BootScreen:47,ReportId_PenDataOption:48,ReportId_PenDataEncryptedOption:49,ReportId_PenDataOptionMode:50,ReportId_PenDataTimeCountSequenceEncrypted:51,ReportId_PenDataTimeCountSequence:52,ReportId_EncryptionCommand:64,ReportId_EncryptionStatus:80,ReportId_GetReport:128,ReportId_SetResult:129,ReportId_PinPadData:144,ReportId_PinPadDataEncrypted:145,ReportId_PinOperationMode:146,ReportId_OperationMode:147,ReportId_RomStartImageData:148,ReportId_RomImageOccupancy:149,ReportId_RomImageHash:150,ReportId_RomImageDelete:151,ReportId_CurrentImageArea:152,ReportId_EventData:153,ReportId_EventDataEncrypted:154,ReportId_RomImageDisplay:155,ReportId_ReportSizeCollection:255,Decrypt:256,SigCaptX_Decrypt:256,SigCaptX_TabletDisconnected:257},a.prototype.DefaultMode={DefaultMode_HID:1,DefaultMode_Serial:2},a.prototype.StatusCode={StatusCode_Ready:0,StatusCode_Image:1,StatusCode_Capture:2,StatusCode_Calculation:3,StatusCode_Image_Boot:4,StatusCode_RomBusy:5,StatusCode_SystemReset:255},a.prototype.ErrorCode={ErrorCode_None:0,ErrorCode_WrongReportId:1,ErrorCode_WrongState:2,ErrorCode_CRC:3,ErrorCode_GraphicsWrongEncodingType:16,ErrorCode_GraphicsImageTooLong:17,ErrorCode_GraphicsZlibError:18,ErrorCode_GraphicsWrongParameters:21,ErrorCode_PadNotExist:32,ErrorCode_RomSizeOverflow:51,ErrorCode_RomInvalidParameter:52,ErrorCode_RomErrorCRC:53},a.prototype.Rectangle={upperLeftXpixel:0,upperLeftYpixel:0,lowerRightXpixel:0,lowerRightYpixel:0},a.prototype.InkThreshold={onPressureMark:0,offPressureMark:0},a.prototype.HandwritingThicknessColor={penColor:0,penThickness:0},a.prototype.HandwritingThicknessColor24={penColor:0,penThickness:0},a.prototype.EncryptionCommandNumber={EncryptionCommandNumber_SetEncryptionType:1,EncryptionCommandNumber_SetParameterBlock:2,EncryptionCommandNumber_GetStatusBlock:3,EncryptionCommandNumber_GetParameterBlock:4,EncryptionCommandNumber_GenerateSymmetricKey:5},a.prototype.EncodingMode={EncodingMode_1bit:0,EncodingMode_1bit_Zlib:1,EncodingMode_16bit:2,EncodingMode_24bit:4,EncodingMode_1bit_Bulk:16,EncodingMode_16bit_Bulk:18,EncodingMode_24bit_Bulk:20},a.prototype.EndImageDataFlag={EndImageDataFlag_Commit:0,EndImageDataFlag_Abandon:1},a.prototype.ResetFlag={ResetFlag_Software:0,ResetFlag_Hardware:1},a.prototype.EncodingFlag={EncodingFlag_Zlib:1,EncodingFlag_1bit:2,EncodingFlag_16bit:4,EncodingFlag_24bit:8},a.prototype.StatusCodeRSA={StatusCodeRSA_Ready:0,StatusCodeRSA_Calculating:250,StatusCodeRSA_Even:251,StatusCodeRSA_Long:252,StatusCodeRSA_Short:253,StatusCodeRSA_Invalid:254,StatusCodeRSA_NotReady:255},a.prototype.ErrorCodeRSA={ErrorCodeRSA_None:0,ErrorCodeRSA_BadParameter:1,ErrorCodeRSA_ParameterTooLong:2,ErrorCodeRSA_PublicKeyNotReady:3,ErrorCodeRSA_PublicExponentNotReady:4,ErrorCodeRSA_SpecifiedKeyInUse:5,ErrorCodeRSA_SpecifiedKeyNotInUse:6,ErrorCodeRSA_BadCommandCode:7,ErrorCodeRSA_CommandPending:8,ErrorCodeRSA_SpecifiedKeyExists:9,ErrorCodeRSA_SpecifiedKeyNotExist:10,ErrorCodeRSA_NotInitialized:11},a.prototype.SymmetricKeyType={SymmetricKeyType_AES128:0,SymmetricKeyType_AES192:1,SymmetricKeyType_AES256:2},a.prototype.AsymmetricKeyType={AsymmetricKeyType_RSA1024:0,AsymmetricKeyType_RSA1536:1,AsymmetricKeyType_RSA2048:2},a.prototype.AsymmetricPaddingType={AsymmetricPaddingType_None:0,AsymmetricPaddingType_PKCS1:1,AsymmetricPaddingType_OAEP:2},a.prototype.AsymmetricPaddingType={EncryptionCommandParameterBlockIndex_RSAe:0,EncryptionCommandParameterBlockIndex_RSAn:1,EncryptionCommandParameterBlockIndex_RSAc:2,EncryptionCommandParameterBlockIndex_RSAm:3},a.prototype.RomImageDeleteMode={RomImageDeleteMode_All:0,RomImageDeleteMode_PinPad_All:1,RomImageDeleteMode_SlideShow_All:2,RomImageDeleteMode_KeyPad_All:3,RomImageDeleteMode_Signature_All:4,RomImageDeleteMode_MessageBox_All:5,RomImageDeleteMode_PinPad_Number:6,RomImageDeleteMode_SlideShow_Number:7,RomImageDeleteMode_KeyPad_Number:8,RomImageDeleteMode_Signature_Number:9,RomImageDeleteMode_MessageBox_Number:10},a.prototype.OperationModeType={OperationModeType_Normal:0,OperationModeType_PinPad:1,OperationModeType_SlideShow:2,OperationModeType_KeyPad:3,OperationModeType_Signature:4,OperationModeType_MessageBox:5},a.prototype.ImageDataBlock_maxLengthHID=253,a.prototype.ImageDataBlock_maxLengthSerial=2557,a.prototype.ImageDataBlock_maxLength540=2557,a.prototype.toJSON=function(){return{id:i,scope:r}},a.prototype.Constructor=function(l){return d=l,c.STU.send({scope:r,function:"Constructor",intf:d.toJSON()}).then(function(g){return i=g.id,g})},a.prototype.getInterface=function(){return d},a.prototype.getInformation=function(){return c.STU.send({scope:r,id:i,function:"getInformation"})},a.prototype.getPenDataOptionMode=function(){return c.STU.send({scope:r,id:i,function:"getPenDataOptionMode"})},a.prototype.setPenDataOptionMode=function(l){return c.STU.send({scope:r,id:i,function:"setPenDataOptionMode",penDataOptionMode:l})},a.prototype.OperationMode_Normal=function(){function l(){this.operationMode=0,this.data=[]}return l}(),a.prototype.OperationMode_PinPad=function(){function l(g,S,w,M,O,L,G){this.operationMode=1,this.data=[],this.data[0]=g,this.data[1]=Number(S),this.data[2]=w,this.data[3]=M,this.data[4]=Number(O),this.data[5]=L,this.data[6]=G}return l}(),a.prototype.OperationMode_SlideShow=function(){function l(g,S,w,M){this.operationMode=2,this.data=[],this.data[0]=g,this.data[1]=S,this.data[2]=(w[0]&15)<<4|w[1]&15,this.data[3]=(w[2]&15)<<4|w[3]&15,this.data[4]=(w[4]&15)<<4|w[5]&15,this.data[5]=(w[6]&15)<<4|w[7]&15,this.data[6]=(w[8]&15)<<4|w[9]&15,this.data[7]=M>>24&255,this.data[8]=M>>16&255,this.data[9]=M>>8&255,this.data[10]=M&255}return l}(),a.prototype.OperationMode_KeyPad=function(){function l(g,S){this.operationMode=3,this.data=[],this.data[0]=g,this.data[1]=S}return l}(),a.prototype.OperationMode_Signature=function(){function l(g,S,w,M){this.operationMode=4,this.data=[],this.data[0]=g,this.data[1]=S[0],this.data[2]=S[1],this.data[3]=S[2],this.data[4]=w}return l}(),a.prototype.setOperationMode=function(l){return c.STU.send({scope:r,id:i,function:"setOperationMode",operationMode:l})},a.prototype.getOperationMode=function(){return c.STU.send({scope:r,id:i,function:"getOperationMode"})},a.prototype.RomStartImageData_PinPad=function(){function l(g,S,w,M,O){this.encodingMode=g,this.operationMode=1,this.imageType=S,this.imageNumber=w,this.data=[M,O,0]}return l}(),a.prototype.RomStartImageData_SlideShow=function(){function l(g,S,w){this.encodingMode=g,this.operationMode=2,this.imageType=S,this.imageNumber=w,this.data=[0,0,0]}return l}(),a.prototype.RomStartImageData_KeyPad=function(){function l(g,S,w,M,O){this.encodingMode=g,this.operationMode=3,this.imageType=S,this.imageNumber=w,this.data=[],this.data[0]=M,this.data[1]=O.length>8&&O[8]?1:0,this.data[2]=(O.length>7&&O[7]?128:0)|(O.length>6&&O[6]?64:0)|(O.length>5&&O[5]?32:0)|(O.length>4&&O[4]?16:0)|(O.length>3&&O[3]?8:0)|(O.length>2&&O[2]?4:0)|(O.length>1&&O[1]?2:0)|(O.length>0&&O[0]?1:0)}return l}(),a.prototype.RomStartImageData_Signature=function(){function l(g,S,w,M){this.encodingMode=g,this.operationMode=4,this.imageType=S,this.imageNumber=w,this.data=[],this.data[0]=(M[2]?4:0)|(M[1]?2:0)|(M[0]?1:0)}return l}(),a.prototype.RomStartImageData_MessageBox=function(){function l(g,S){this.encodingMode=g,this.operationMode=5,this.imageType=!1,this.imageNumber=S,this.data=[0,0,0]}return l}(),a.prototype.setRomStartImageData=function(l){return c.STU.send({scope:r,id:i,function:"setRomStartImageData",romStartImage:l})},a.prototype.setRomImageHash=function(l,g,S){return c.STU.send({scope:r,id:i,function:"setRomImageHash",operationModeType:l,imageType:g,imageNumber:S})},a.prototype.getRomImageHash=function(){return c.STU.send({scope:r,id:i,function:"getRomImageHash"})},a.prototype.setRomImageDelete=function(l,g,S){return c.STU.send({scope:r,id:i,function:"setRomImageDelete",romImageDeleteMode:l,imageType:g,imageNumber:S})},a.prototype.getCurrentImageArea=function(){return c.STU.send({scope:r,id:i,function:"getCurrentImageArea"})},a.prototype.setRomImageDisplay=function(l,g,S){return c.STU.send({scope:r,id:i,function:"setRomImageDisplay",operationModeType:l,imageType:g,imageNumber:S})},a.prototype.getEserial=function(){return c.STU.send({scope:r,id:i,function:"getEserial"})},a.prototype.setClearScreen=function(){return c.STU.send({scope:r,id:i,function:"setClearScreen"})},a.prototype.setInkingMode=function(l){return c.STU.send({scope:r,id:i,function:"setInkingMode",inkingMode:l})},a.prototype.rebind=function(l){var g=l;return c.STU.send({scope:r,id:i,function:"rebind",intf:l.toJSON()}).then(function(S){S===null&&(d=g)})},a.prototype.getStatus=function(){return c.STU.send({scope:r,id:i,function:"getStatus"})},a.prototype.setReset=function(l){return c.STU.send({scope:r,id:i,function:"setReset",flag:l})},a.prototype.getHidInformation=function(){return c.STU.send({scope:r,id:i,function:"getHidInformation"})},a.prototype.getCapability=function(){return c.STU.send({scope:r,id:i,function:"getCapability"})},a.prototype.getUid=function(){return c.STU.send({scope:r,id:i,function:"getUid"})},a.prototype.setUid=function(l){return c.STU.send({scope:r,id:i,function:"setUid",uid:l})},a.prototype.getUid2=function(){return c.STU.send({scope:r,id:i,function:"getUid2"})},a.prototype.setDefaultMode=function(l){return c.STU.send({scope:r,id:i,function:"setDefaultMode",defaultMode:l})},a.prototype.getDefaultMode=function(){return c.STU.send({scope:r,id:i,function:"getDefaultMode"})},a.prototype.getHostPublicKey=function(){return c.STU.send({scope:r,id:i,function:"getHostPublicKey"})},a.prototype.setHostPublicKey=function(l){return c.STU.send({scope:r,id:i,function:"setHostPublicKey",hostPublicKey:l})},a.prototype.getDevicePublicKey=function(){return c.STU.send({scope:r,id:i,function:"getDevicePublicKey"})},a.prototype.setStartCapture=function(l){return c.STU.send({scope:r,id:i,function:"setStartCapture",sessionId:l})},a.prototype.setEndCapture=function(){return c.STU.send({scope:r,id:i,function:"setEndCapture"})},a.prototype.getDHprime=function(){return c.STU.send({scope:r,id:i,function:"getDHprime"})},a.prototype.setDHprime=function(l){return c.STU.send({scope:r,id:i,function:"setDHprime",prime:l})},a.prototype.getDHbase=function(){return c.STU.send({scope:r,id:i,function:"getDHbase"})},a.prototype.setDHbase=function(l){return c.STU.send({scope:r,id:i,function:"setDHbase",base})},a.prototype.setClearScreenArea=function(l){return c.STU.send({scope:r,id:i,function:"setClearScreenArea",area:l})},a.prototype.getInkingMode=function(){return c.STU.send({scope:r,id:i,function:"getInkingMode"})},a.prototype.getInkThreshold=function(){return c.STU.send({scope:r,id:i,function:"getInkThreshold"})},a.prototype.setInkThreshold=function(l){return c.STU.send({scope:r,id:i,function:"setInkThreshold",inkThreshold:l})},a.prototype.setStartImageData=function(l){return c.STU.send({scope:r,id:i,function:"setStartImageData",encodingMode:l})},a.prototype.setStartImageDataArea=function(l,g){return c.STU.send({scope:r,id:i,function:"setStartImageDataArea",encodingMode:l,area:g})},a.prototype.setImageDataBlock=function(l){return c.STU.send({scope:r,id:i,function:"setEndImageData",imageDataBlock:l})},a.prototype.setEndImageData=function(l){return c.STU.send({scope:r,id:i,function:"setEndImageData",endImageDataFlag})},a.prototype.getHandwritingThicknessColor=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingThicknessColor"})},a.prototype.setHandwritingThicknessColor=function(l){return c.STU.send({scope:r,id:i,function:"setHandwritingThicknessColor",handwritingThicknessColor:l})},a.prototype.getHandwritingThicknessColor24=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingThicknessColor24"})},a.prototype.setHandwritingThicknessColor24=function(l){return c.STU.send({scope:r,id:i,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:l})},a.prototype.getBackgroundColor=function(){return c.STU.send({scope:r,id:i,function:"getBackgroundColor"})},a.prototype.setBackgroundColor=function(l){return c.STU.send({scope:r,id:i,function:"setBackgroundColor",backgroundColor:l})},a.prototype.getBackgroundColor24=function(){return c.STU.send({scope:r,id:i,function:"getBackgroundColor24"})},a.prototype.setBackgroundColor24=function(l){return c.STU.send({scope:r,id:i,function:"setBackgroundColor24",backgroundColor24:l})},a.prototype.BootScreenFlag={Disable:0,Enable:1},a.prototype.setBootScreen=function(l){return c.STU.send({scope:r,id:i,function:"setBootScreen",bootScreenFlag:l})},a.prototype.getBootScreen=function(){return c.STU.send({scope:r,id:i,function:"getBootScreen"})},a.prototype.getHandwritingDisplayArea=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingDisplayArea"})},a.prototype.setHandwritingDisplayArea=function(l){return c.STU.send({scope:r,id:i,function:"setHandwritingDisplayArea",handwritingDisplayArea:l})},a.prototype.getBacklightBrightness=function(){return c.STU.send({scope:r,id:i,function:"getBacklightBrightness"})},a.prototype.setBacklightBrightness=function(l){return c.STU.send({scope:r,id:i,function:"setBacklightBrightness",backlightBrightness:l})},a.prototype.getScreenContrast=function(){return c.STU.send({scope:r,id:i,function:"getScreenContrast"})},a.prototype.setScreenContrast=function(l){return c.STU.send({scope:r,id:i,function:"setScreenContrast",screenContrast:l})},a.prototype.getEncryptionStatus=function(){return c.STU.send({scope:r,id:i,function:"getEncryptionStatus"})},a.prototype.EncryptionCommand=function(){var l="WacomGSS.STU.Protocol";function g(w){this.encryptionCommandNumber=w.encryptionCommandNumber,this.parameter=w.parameter,this.lengthOrIndex=w.lengthOrIndex,this.data=w.data}function S(){this.encryptionCommandNumber=0,this.parameter=0,this.lengthOrIndex=0,this.data=[]}return S.prototype.initializeSetEncryptionType=function(w,M,O){return c.STU.send({scope:l,function:"EncryptionCommand_initializeSetEncryptionType",symmetricKeyType:w,asymmetricPaddingType:M,asymmetricKeyType:O}).then(function(L){return g.call(this,L),this})},S.prototype.initializeSetParameterBlock=function(w,M){return c.STU.send({scope:l,function:"EncryptionCommand_initializeSetParameterBlock",index:w,data:M}).then(function(O){return g.call(this,O),this})},S.prototype.initializeGenerateSymmetricKey=function(){return c.STU.send({scope:l,function:"EncryptionCommand_initializeGenerateSymmetricKey"}).then(function(w){return g.call(this,w),this})},S.prototype.initializeGetParameterBlock=function(w,M){return c.STU.send({scope:l,function:"EncryptionCommand_initializeGetParameterBlock"}).then(function(O){return g.call(this,O),this})},S}(),a.prototype.getEncryptionCommand=function(l){return c.STU.send({scope:r,id:i,function:"getEncryptionCommand",encryptionCommandNumber:l})},a.prototype.getReportSizeCollection=function(){return c.STU.send({scope:r,id:i,function:"getReportSizeCollection"})},a.prototype.setReportRate=function(l){return c.STU.send({scope:r,id:i,function:"setReportRate",reportRate:l})},a.prototype.getReportRate=function(){return c.STU.send({scope:r,id:i,function:"getReportRate"})},a.prototype.RenderingMode={RenderingMode_Legacy:0,RenderingMode_WILL:1},a.prototype.setRenderingMode=function(l){return c.STU.send({scope:r,id:i,function:"setRenderingMode",renderingMode:l})},a.prototype.getRenderingMode=function(){return c.STU.send({scope:r,id:i,function:"getRenderingMode"})},a}(),C.prototype.ProtocolHelper={ReportHandler:function(){var r="WacomGSS.STU.ProtocolHelper.ReportHandler",i=null,d=null;function a(){this.onReportPenData=function(l){},this.onReportPenDataOption=function(l){},this.onReportPenDataTimeCountSequence=function(l){},this.onReportPenDataEncrypted=function(l){},this.onReportPenDataEncryptedOption=function(l){},this.onReportPenDataTimeCountSequenceEncrypted=function(l){},this.onReportDevicePublicKey=function(l){},this.onReportEncryptionStatus=function(l){},this.onReportEventDataPinPad=function(l){},this.onReportEventDataKeyPad=function(l){},this.onReportEventDataSignature=function(l){},this.onReportEventDataPinPadEncrypted=function(l){},this.onReportEventDataKeyPadEncrypted=function(l){},this.onReportEventDataSignatureEncrypted=function(l){},this.decrypt=function(l){},this.tabletDisconnected=function(l){},this.stream=function(l){var g=new c.STU.Protocol;switch(l.reportId){case g.ReportId.ReportId_PenData:this.onReportPenData(l);break;case g.ReportId.ReportId_PenDataOption:this.onReportPenDataOption(l);break;case g.ReportId.ReportId_PenDataTimeCountSequence:this.onReportPenDataTimeCountSequence(l);break;case g.ReportId.ReportId_PenDataEncrypted:this.onReportPenDataEncrypted(l);break;case g.ReportId.ReportId_PenDataEncryptedOption:this.onReportPenDataEncryptedOption(l);break;case g.ReportId.ReportId_PenDataTimeCountSequenceEncrypted:this.onReportPenDataTimeCountSequenceEncrypted(l);break;case g.ReportId.ReportId_DevicePublicKey:this.onReportDevicePublicKey(l);break;case g.ReportId.ReportId_EncryptionStatus:this.onReportEncryptionStatus(l);break;case g.ReportId.ReportId_EventData:this.onEventData(g,l);break;case g.ReportId.ReportId_EventDataEncrypted:this.onEventDataEncrypted(g,l);break;case g.ReportId.SigCaptX_Decrypt:this.decrypt(l);break;case g.ReportId.SigCaptX_TabletDisconnected:this.tabletDisconnected(l);break}}}return a.prototype.startReporting=function(l,g){return i=c.STU.setStream(this),c.STU.send({interfaceQueueHolder:l.toJSON(),scope:r,function:"startReporting",streamId:i,tabletDecrypt:g===!0}).then(function(S){return d=S.id,S})},a.prototype.stopReporting=function(){if(i===null)throw"Error: trying to stop reporting before starting";return c.STU.send({id:d,scope:r,function:"stopReporting"}).then(function(l){return c.STU.removeStream(i),l})},a.prototype.onEventData=function(l,g){switch(g.operationModeType){case l.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPad(g);break;case l.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPad(g);break;case l.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignature(g);break}},a.prototype.onEventDataEncrypted=function(l,g){switch(g.operationModeType){case l.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPadEncrypted(g);break;case l.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPadEncrypted(g);break;case l.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignatureEncrypted(g);break}},a}(),InkState_isOff:1,InkState_isOn:2,InkState_isInk:4,InkState_isFirst:8,InkState_isLast:16,InkState:{InkState_Up:1,InkState_Down:2,InkState_Inking:6,InkState_First:14,InkState_Last:17},OpDirection:{OpDirection_Get:256,OpDirection_Set:512},statusCanSend:function(r,i,d){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"statusCanSend",statusCode:r,reportId:i,opDirection:d})},waitForStatusToSend:function(r,i,d,a,l){var g=Q.defer();function S(){r.getStatus().then(function(w){return c.STU.ProtocolHelper.statusCanSend(w.statusCode,i,d)}).then(function(w){if(w===!0){g.resolve();return}if(a<=0){g.reject(new Error("timeout error"));return}a--,setTimeout(S,l)})}return setTimeout(S,0),g.promise},waitForStatus:function(r,i,d,a){var l=Q.defer();function g(){r.getStatus().then(function(S){if(S.statusCode===i){l.resolve();return}if(d<=0){l.reject(new Error("timeout error"));return}d--,setTimeout(g,a)})}return setTimeout(g,0),l.promise},supportsEncryption:function(r){var i=c.STU.ProtocolHelper.OpDirection.OpDirection_Get;return c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_DHprime,i,25,50).then(function(d){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption",protocol:r})})},supportsEncryption_DHprime:function(r){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption_DHprime",dhPrime:r})},setHostPublicKeyAndPollForDevicePublicKey:function(r,i,d,a){return r.setHostPublicKey(i).then(function(l){var g=c.STU.ProtocolHelper.OpDirection.OpDirection_Get;return c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_DevicePublicKey,g,d,a)}).then(function(l){return r.getDevicePublicKey()}).then(function(l){if(l.length!==i.length)throw new Error("Unexpected key size");return l})},writeImage:function(r,i,d,a,l){a=typeof a=="undefined"?25:a,l=typeof l=="undefined"?25:l;var g=c.STU.ProtocolHelper.OpDirection.OpDirection_Set;return c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_StartImageData,g,a,l).then(function(S){return r.setStartImageData(i)}).then(function(S){var w=r.ImageDataBlock_maxLengthHID;return c.STU.ProtocolHelper.writeImageCommon(r,i,w,d,a,l)})},writeImageCommon:function(r,i,d,a,l,g){if(d>r.ImageDataBlock_maxLengthSerial)throw new Error("Invalid maxImageBlockSize");var S=c.STU.ProtocolHelper.OpDirection.OpDirection_Set;return c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_ImageDataBlock,S,l,g).then(function(w){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeImageCommon",protocol:r.toJSON(),intf:r.getInterface().toJSON(),encodingMode:i,imageData:a,maxImageBlockSize:d})})},flattenMonochrome:function(r,i,d,a){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenMonochrome",b64Data:r,screenWidth:i,screenHeight:d,dataStore:a===!0}).then(function(l){if(typeof l=="string")return l;var g=new c.STU.DataStore;return g.setId(l.id),g})},flatten:function(r,i,d,a,l){var g=new c.STU.Protocol;switch(r){case g.EncodingMode.EncodingMode_24bit:case g.EncodingMode.EncodingMode_24bit_Bulk:return c.STU.ProtocolHelper.flattenColor24(i,d,a,l);case g.EncodingMode.EncodingMode_16bit:case g.EncodingMode.EncodingMode_16bit_Bulk:return c.STU.ProtocolHelper.flattenColor16(i,d,a,l);case g.EncodingMode.EncodingMode_1bit:case g.EncodingMode.EncodingMode_1bit_Bulk:return c.STU.ProtocolHelper.flattenMonochrome(i,d,a,l)}},resizeAndFlatten:function(r,i,d,a,l,g,S,w,M,O,L,G){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"resizeAndFlatten",b64Data:r,offsetX:i,offsetY:d,bitmapWidth:a,bitmapHeight:l,screenWidth:g,screenHeight:S,encodingMode:w,scale:M,backgroundColor:O,clip:L,dataStore:G===!0}).then(function(Y){if(typeof Y=="string")return Y;var E=new c.STU.DataStore;return E.setId(Y.id),E})},encodingFlagSupportsColor:function(r){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"encodingFlagSupportsColor",screenWidth:r})},flattenColor16:function(r,i,d,a){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor16",b64Data:r,screenWidth:i,screenHeight:d,dataStore:a===!0}).then(function(l){if(typeof l=="string")return l;var g=new c.STU.DataStore;return g.setId(l.id),g})},flattenColor24:function(r,i,d,a){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor24",b64Data:r,screenWidth:i,screenHeight:d,dataStore:a===!0}).then(function(l){if(typeof l=="string")return l;var g=new c.STU.DataStore;return g.setId(l.id),g})},generateSymmetricKeyAndWaitForEncryptionStatus:function(r,i,d,a){var l=c.STU.ProtocolHelper.OpDirection.OpDirection_Set,g=Q.defer(),S=y();return s[S]=g,c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_EncryptionCommand,l,i,d).then(function(w){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"generateSymmetricKeyAndWaitForEncryptionStatus",protocol:r.toJSON(),intf:r.getInterface().toJSON(),timeout:a,sleepBetweenRetries:d,ticket2:S}).then(function(M){return g.promise})})},simulateEncodingFlag:function(r,i){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"simulateEncodingFlag",idProduct:r,encodingFlag:typeof obj=="undefined"?0:i})},writeImageArea:function(r,i,d,a,l,g){l=typeof l=="undefined"?25:l,g=typeof g=="undefined"?25:g;var S=c.STU.ProtocolHelper.OpDirection.OpDirection_Set;return c.STU.ProtocolHelper.waitForStatusToSend(r,c.STU.Protocol.ReportId.ReportId_StartImageDataArea,S,l,g).then(function(w){return r.setStartImageDataArea(i,d)}).then(function(w){var M=r.ImageDataBlock_maxLengthHID;return c.STU.ProtocolHelper.writeImageCommon(r,i,M,a,l,g)})},writeRomImage:function(r,i,d,a,l,g){return c.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeRomImage",protocol:r,romStartImageData:i,maxImageBlockSize:d,imageData:a,retries:l,sleepBetweenRetries:g})}},C.prototype.Tablet=function(){var r="WacomGSS.STU.Tablet",i=null;function d(){}return d.prototype.toJSON=function(){return{id:i,scope:r}},d.prototype.Constructor=function(a,l,g){return c.STU.send({scope:r,function:"Constructor",hasIntf:typeof a!="undefined",intf:typeof a=="undefined"?null:a.toJSON(),encryptionHandler:typeof l=="undefined"||l===null?null:l.toJSON(),encryptionHandler2:typeof g=="undefined"||g===null?null:g.toJSON()}).then(function(S){return i=S.id,S})},d.prototype.attach=function(a){return c.STU.send({scope:r,id:i,function:"attach",intf:typeof a=="undefined"?null:a.toJSON()})},d.prototype.detach=function(a){return c.STU.send({scope:r,id:i,function:"detach"}).then(function(l){var g;return m(l.scope)&&m(l.id)&&(l.scope==="WacomGSS.STU.UsbInterface"?(g=new C.UsbInterface,g.id=l.id):l.scope==="WacomGSS.STU.SerialInterface"&&(g=new C.SerialInterface,g.id=l.id)),g})},d.prototype.getInformation=function(){return c.STU.send({scope:r,id:i,function:"getInformation"})},d.prototype.setClearScreen=function(){return c.STU.send({scope:r,id:i,function:"setClearScreen"})},d.prototype.isSupported=function(a){return c.STU.send({scope:r,id:i,function:"isSupported",reportId:a})},d.prototype.getProductId=function(a){return c.STU.send({scope:r,id:i,function:"getProductId"})},d.prototype.setPenDataOptionMode=function(a){return c.STU.send({scope:r,id:i,function:"setPenDataOptionMode",penDataOptionMode:a})},d.prototype.getDHprime=function(){return c.STU.send({scope:r,id:i,function:"getDHprime"})},d.prototype.startCapture=function(a){return c.STU.send({scope:r,id:i,function:"startCapture",sessionId:a})},d.prototype.setInkingMode=function(a){return c.STU.send({scope:r,id:i,function:"setInkingMode",inkingMode:a})},d.prototype.queueSetPredicateAll=function(a){return c.STU.send({scope:r,id:i,function:"queueSetPredicateAll",predicate:a})},d.prototype.endCapture=function(){return c.STU.send({scope:r,id:i,function:"endCapture"})},d.prototype.disconnect=function(){return c.STU.send({scope:r,id:i,function:"disconnect"})},d.prototype.empty=function(){return c.STU.send({scope:r,id:i,function:"empty"})},d.prototype.isConnected=function(){return c.STU.send({scope:r,id:i,function:"isConnected"})},d.prototype.supportsWrite=function(){return c.STU.send({scope:r,id:i,function:"supportsWrite"})},d.prototype.getReportCountLengths=function(){return c.STU.send({scope:r,id:i,function:"getReportCountLengths"})},d.prototype.getStatus=function(){return c.STU.send({scope:r,id:i,function:"getStatus"})},d.prototype.reset=function(){return c.STU.send({scope:r,id:i,function:"reset"})},d.prototype.getHidInformation=function(){return c.STU.send({scope:r,id:i,function:"getHidInformation"})},d.prototype.getCapability=function(){return c.STU.send({scope:r,id:i,function:"getCapability"})},d.prototype.getUid=function(){return c.STU.send({scope:r,id:i,function:"getUid"})},d.prototype.setUid=function(a){return c.STU.send({scope:r,id:i,function:"setUid",uid:a})},d.prototype.getUid2=function(){return c.STU.send({scope:r,id:i,function:"getUid2"})},d.prototype.setDefaultMode=function(a){return c.STU.send({scope:r,id:i,function:"setDefaultMode",defaultMode:a})},d.prototype.getDefaultMode=function(){return c.STU.send({scope:r,id:i,function:"getDefaultMode"})},d.prototype.getHostPublicKey=function(){return c.STU.send({scope:r,id:i,function:"getHostPublicKey"})},d.prototype.getDevicePublicKey=function(){return c.STU.send({scope:r,id:i,function:"getDevicePublicKey"})},d.prototype.setDHprime=function(a){return c.STU.send({scope:r,id:i,function:"setDHprime",prime:a})},d.prototype.getDHbase=function(){return c.STU.send({scope:r,id:i,function:"getDHbase"})},d.prototype.setDHbase=function(a){return c.STU.send({scope:r,id:i,function:"setDHbase",base})},d.prototype.setClearScreenArea=function(a){return c.STU.send({scope:r,id:i,function:"setClearScreenArea",area:a})},d.prototype.getInkingMode=function(){return c.STU.send({scope:r,id:i,function:"getInkingMode"})},d.prototype.getInkThreshold=function(){return c.STU.send({scope:r,id:i,function:"getInkThreshold"})},d.prototype.setInkThreshold=function(a){return c.STU.send({scope:r,id:i,function:"setInkThreshold",inkThreshold:a})},d.prototype.writeImage=function(a,l){var g=null;return typeof l=="string"?g=l:g=l.toJSON(),c.STU.send({scope:r,id:i,function:"writeImage",encodingMode:a,b64Data:g})},d.prototype.writeImageArea=function(a,l,g){var S=null;return typeof g=="string"?S=g:S=g.toJSON(),c.STU.send({scope:r,id:i,function:"writeImageArea",encodingMode:a,area:l,b64Data:S})},d.prototype.endImageData=function(a){return c.STU.send({scope:r,id:i,function:"endImageData"})},d.prototype.getHandwritingThicknessColor=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingThicknessColor"})},d.prototype.setHandwritingThicknessColor=function(a){return c.STU.send({scope:r,id:i,function:"setHandwritingThicknessColor",handwritingThicknessColor:a})},d.prototype.getHandwritingThicknessColor24=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingThicknessColor24"})},d.prototype.setHandwritingThicknessColor24=function(a){return c.STU.send({scope:r,id:i,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:a})},d.prototype.getBackgroundColor=function(){return c.STU.send({scope:r,id:i,function:"getBackgroundColor"})},d.prototype.setBackgroundColor=function(a){return c.STU.send({scope:r,id:i,function:"setBackgroundColor",backgroundColor:a})},d.prototype.getBackgroundColor24=function(){return c.STU.send({scope:r,id:i,function:"getBackgroundColor24"})},d.prototype.setBackgroundColor24=function(a){return c.STU.send({scope:r,id:i,function:"setBackgroundColor24",backgroundColor24:a})},d.prototype.getHandwritingDisplayArea=function(){return c.STU.send({scope:r,id:i,function:"getHandwritingDisplayArea"})},d.prototype.setHandwritingDisplayArea=function(a){return c.STU.send({scope:r,id:i,function:"setHandwritingDisplayArea",handwritingDisplayArea:a})},d.prototype.getBacklightBrightness=function(){return c.STU.send({scope:r,id:i,function:"getBacklightBrightness"})},d.prototype.setBacklightBrightness=function(a){return c.STU.send({scope:r,id:i,function:"setBacklightBrightness",backlightBrightness:a})},d.prototype.getScreenContrast=function(){return c.STU.send({scope:r,id:i,function:"getScreenContrast"})},d.prototype.setScreenContrast=function(a){return c.STU.send({scope:r,id:i,function:"setScreenContrast",screenContrast:a})},d.prototype.getPenDataOptionMode=function(){return c.STU.send({scope:r,id:i,function:"getPenDataOptionMode"})},d.prototype.getEncryptionStatus=function(){return c.STU.send({scope:r,id:i,function:"getEncryptionStatus"})},d.prototype.getEncryptionCommand=function(a){return c.STU.send({scope:r,id:i,function:"getEncryptionCommand",encryptionCommandNumber:a})},d.prototype.decrypt=function(a){return c.STU.send({scope:r,id:i,decrypt:"decrypt",data:a})},d.prototype.setReportRate=function(a){return c.STU.send({scope:r,id:i,function:"setReportRate",reportRate:a})},d.prototype.getReportRate=function(){return c.STU.send({scope:r,id:i,function:"getReportRate"})},d.prototype.setRenderingMode=function(a){return c.STU.send({scope:r,id:i,function:"setRenderingMode",renderingMode:a})},d.prototype.getRenderingMode=function(){return c.STU.send({scope:r,id:i,function:"getRenderingMode"})},d.prototype.setOperationMode=function(a){return c.STU.send({scope:r,id:i,function:"setOperationMode",operationMode:a})},d.prototype.getOperationMode=function(){return c.STU.send({scope:r,id:i,function:"getOperationMode"})},d.prototype.writeRomImage=function(a,l){return c.STU.send({scope:r,id:i,function:"writeRomImage",romStartImageData:a,imageData:l})},d.prototype.setRomImageHash=function(a,l,g){return c.STU.send({scope:r,id:i,function:"setRomImageHash",operationModeType:a,imageType:l,imageNumber:g})},d.prototype.getRomImageHash=function(){return c.STU.send({scope:r,id:i,function:"getRomImageHash"})},d.prototype.setRomImageDelete=function(a,l,g){return c.STU.send({scope:r,id:i,function:"setRomImageDelete",romImageDeleteMode:a,imageType:l,imageNumber:g})},d.prototype.getCurrentImageArea=function(){return c.STU.send({scope:r,id:i,function:"getCurrentImageArea"})},d.prototype.setRomImageDisplay=function(a,l,g){return c.STU.send({scope:r,id:i,function:"setRomImageDisplay",operationModeType:a,imageType:l,imageNumber:g})},d.prototype.getEserial=function(){return c.STU.send({scope:r,id:i,function:"getEserial"})},d}(),C.prototype.SerialInterface=function(){var r="WacomGSS.STU.SerialInterface",i="";function d(){}return d.prototype.Constructor=function(){return c.STU.send({scope:r,function:"Constructor"}).then(function(a){return i=a.id,a})},d.prototype.BaudRate_STU500=115200,d.prototype.BaudRate_STU430_530_prerelease=460800,d.prototype.BaudRate_STU430_530=3e6,d.prototype.connect=function(a,l,g){return c.STU.send({scope:r,id:i,function:"connect",fileName:a,baudRate:l,useCrc:g})},d.prototype.toJSON=function(){return{id:i,scope:r}},d.prototype.disconnect=function(){return c.STU.send({scope:r,id:i,function:"disconnect"})},d.prototype.isConnected=function(){return c.STU.send({scope:r,id:i,function:"isConnected"})},d.prototype.queueNotifyAll=function(){return c.STU.send({scope:r,id:i,function:"queueNotifyAll"})},d.prototype.queueSetPredicateAll=function(a){return c.STU.send({scope:r,id:i,function:"queueSetPredicateAll",predicate:a})},d.prototype.get=function(a){return c.STU.send({scope:r,id:i,function:"get_",length:a})},d.prototype.set=function(a){return c.STU.send({scope:r,id:i,function:"set",base64Data:a})},d.prototype.supportsWrite=function(){return c.STU.send({scope:r,id:i,function:"supportsWrite"})},d.prototype.write=function(a){return c.STU.send({scope:r,id:i,function:"write",base64Data:a})},d.prototype.getReportCountLengths=function(){return c.STU.send({scope:r,id:i,function:"getReportCountLengths"})},d.prototype.getProductId=function(){return c.STU.send({scope:r,id:i,function:"getProductId"})},d}(),C.prototype.TlsInterface=function(){var r="WacomGSS.STU.TlsInterface",i="";function d(){}return d.prototype.Constructor=function(){return c.STU.send({scope:r,function:"Constructor"}).then(function(a){return i=a.id,a})},d.prototype.ConnectOption={ConnectOption_OOB:1,ConnectOption_SSL:2},d.prototype.connect=function(a,l){return c.STU.send({scope:r,id:i,function:"connect",fileName:a,connectOption:l})},d.prototype.toJSON=function(){return{id:i,scope:r}},d.prototype.disconnect=function(){return c.STU.send({scope:r,id:i,function:"disconnect"})},d.prototype.isConnected=function(){return c.STU.send({scope:r,id:i,function:"isConnected"})},d.prototype.get=function(a){return c.STU.send({scope:r,id:i,function:"get_",length:a})},d.prototype.set=function(a){return c.STU.send({scope:r,id:i,function:"set",base64Data:a})},d.prototype.supportsWrite=function(){return c.STU.send({scope:r,id:i,function:"supportsWrite"})},d.prototype.write=function(a){return c.STU.send({scope:r,id:i,function:"write",base64Data:a})},d.prototype.getReportCountLengths=function(){return c.STU.send({scope:r,id:i,function:"getReportCountLengths"})},d.prototype.getProductId=function(){return c.STU.send({scope:r,id:i,function:"getProductId"})},d}(),C.prototype.DataStore=function(){var r="WacomGSS.STU.DataStore",i=null;function d(){}return d.prototype.setId=function(a){i=a},d.prototype.toJSON=function(){return{id:i,scope:r}},d.prototype.Constructor=function(a){return c.STU.send({scope:r,function:"Constructor",b64Data:a})},d.prototype.getData=function(){return c.STU.send({scope:r,id:i,function:"getData"})},d.prototype.getRemove=function(){return c.STU.send({scope:r,id:i,function:"getRemove"}).then(function(a){return i=null,a})},d.prototype.remove=function(){return c.STU.send({scope:r,id:i,function:"remove"}).then(function(a){return i=null,a})},d.prototype.setData=function(a){return c.STU.send({scope:r,id:i,function:"setData",b64Data:a})},d}(),C.prototype.SerialProtocol={getHeaderLength:function(){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"getHeaderLength"})},isStartReport:function(r){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"isStartReport",byte:r})},decodeHasCrc:function(r){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeHasCrc",header1:r})},decodeEncodedDataLength:function(r,i){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeEncodedDataLength",header1:r,header2:i})},calcEncodedDataLength:function(r,i){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"calcEncodedDataLength",useCrc:r,length:i})},encodeHeader:function(r,i,d){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeHeader",encodedData:r,useCrc:i,encodedDataLength:d})},encodeReport:function(r,i){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeReport",report:r,useCrc:i})},decodeData:function(r){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeData",data:r})},checkCrcAndRemove:function(r){return c.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"checkCrcAndRemove",container:r})}},C.prototype.EncryptionHandler=function(){var r="WacomGSS.STU.EncryptionHandler",i=null,d=null,a=null,l=new Object;function g(S){a=S,this.stream=function(w){try{l[w.function](w)}catch(M){throw new Error("EncryptionHandler."+w.function+" : "+M+`
message was:
`+JSON.stringify(w))}}}return g.prototype.Constructor=function(){return i=c.STU.setStream(this),c.STU.send({scope:r,function:"Constructor",streamId:i}).then(function(S){return d=S.id,S})},g.prototype.toJSON=function(){return{id:d,scope:r}},l.reset=function(S){a.reset(),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.clearKeys=function(S){a.clearKeys(),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.requireDH=function(S){var w=a.requireDH();c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},l.setDH=function(S){a.setDH(S.data.dhPrime,S.data.dhBase),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.generateHostPublicKey=function(S){var w=a.generateHostPublicKey();c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},l.computeSharedKey=function(S){a.computeSharedKey(S.data),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.decrypt=function(S){var w=a.decrypt(S.data);c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},g}(),C.prototype.EncryptionHandler2=function(){var r="WacomGSS.STU.EncryptionHandler2",i=null,d=null,a=null,l=new Object;function g(S){a=S,this.stream=function(w){try{l[w.function](w)}catch(M){throw new Error("EncryptionHandler2."+w.function+" : "+M+`
message was:
`+JSON.stringify(w))}}}return g.prototype.Constructor=function(){return i=c.STU.setStream(this),c.STU.send({scope:r,function:"Constructor",streamId:i}).then(function(S){return d=S.id,S})},g.prototype.toJSON=function(){return{id:d,scope:r}},l.reset=function(S){a.reset(),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.clearKeys=function(S){a.clearKeys(),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.getParameters=function(S){var w=a.getParameters(S.data.symmetricKeyType,S.data.asymmetricPaddingType,S.data.asymmetricKeyType),M=w[0],O=w[1],L=w[2];c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:{symmetricKeyType:M,asymmetricPaddingType:O,asymmetricKeyType:L}})},l.getPublicExponent=function(S){var w=a.getPublicExponent();c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},l.generatePublicKey=function(S){var w=a.generatePublicKey();c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},l.computeSessionKey=function(S){a.computeSessionKey(S.data),c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:null})},l.decrypt=function(S){var w=a.decrypt(S.data);c.STU.sendNoReturn({scope:r,function:"set_value",promiseId:S.promiseId,data:w})},g}(),C}();c.STU=new c.STUConstructor;const sa={id:"IdCardBack",style:{height:"12.75cm",width:"8.1cm","font-size":"7pt",position:"relative","background-image":"url('/images/REG_ID_Back_Temp.jpg')","background-position":"center","background-size":"contain","font-family":"sans-serif"}},ua={class:"detail",style:{position:"absolute",top:"79px",left:"10px",overflow:"hidden",width:"265px",height:"35px","font-size":"11pt","line-height":"13pt"}},da={class:"detail",style:{position:"absolute",top:"133px",left:"14px","font-size":"11pt"}},ca={class:"detail",style:{position:"absolute",top:"171px",left:"14px","font-size":"11pt"}},fa={class:"detail",style:{position:"absolute",top:"209px",left:"14px","font-size":"11pt"}},pa={class:"detail",style:{position:"absolute",top:"245px",left:"14px","font-size":"11pt"}},ma={style:{width:"100%","text-align":"left",position:"absolute",left:"22px",bottom:"178px","font-size":"14px"}},ha={style:{width:"100%","text-align":"left",position:"absolute",left:"22px",top:"297px","font-size":"16px"}},ga={class:"detail",style:{position:"absolute",top:"319px",left:"91px","font-size":"9pt"}},va={class:"detail",style:{position:"absolute",top:"335px",left:"91px","font-size":"9pt"}},ya=X("img",{id:"signatureImage",src:la,style:{height:"227px",width:"359px",position:"absolute",bottom:"-146px",left:"-27px",transform:"scale(0.4)"}},null,-1),Sa=[ya],ba={style:{position:"absolute",bottom:"76px",width:"100%","text-align":"center","font-size":"8pt"}},wa=X("div",{id:"sigPreviewContainer",style:{position:"relative"}},null,-1),co=Object.assign({name:"IdCardBack"},{__name:"IdCardBack",props:{details:{type:Object,required:!0}},emits:["onPenDataSave"],setup(e,{emit:t}){const n=e,o=t;function s(){o("onPenDataSave",G)}var u=ue(!1),m="Cancel",y="Clear",T="OK",C=20,k=1e3,R=500,r,i,d,a,l,g,S=-1,w,M,O,L,G,Y,E=0,p;he(()=>n.details,(B,j)=>{B.sig_src&&(G=B.sig_src,w={encodingFlag:3,maxReportRate:200,resolution:64e3,screenHeight:227,screenWidth:359,tabletMaxPressure:1023,tabletMaxX:9600,tabletMaxY:6e3},L={offPressureMark:16,onPressureMark:21},Ke())},{deep:!0});function H(){E=E+1,c.STU.isServiceReady()?(E=0,console.log("SigCaptX Web Service: ready")):(console.log("SigCaptX Web Service: not connected"),E<C?setTimeout(H,k):alert("Unable to establish connection to SigCaptX"))}setTimeout(H,R);function D(){console.log("DCA disconnected"),setTimeout(Me,0)}function Z(B,j,te,fe){this.x=B,this.y=j,this.width=te,this.height=fe,this.Contains=function(q){return q.x>=this.x&&q.x<=this.x+this.width&&q.y>=this.y&&q.y<=this.y+this.height}}function I(){this.Bounds,this.Text,this.Click}function re(B,j){this.x=B,this.y=j}function ne(B,j){d=document.createElement("div"),d.id="signatureWindow",d.className="active",d.style.position="relative",d.style.top=0+"px",d.style.left=0+"px",d.style.width=B+"px",d.style.height=j+"px",document.getElementById("sigPreviewContainer").appendChild(d),r=document.createElement("canvas"),r.id="myCanvas",r.height=d.offsetHeight,r.width=d.offsetWidth,r.style.zIndex=999,d.appendChild(r),i=r.getContext("2d"),console.log("canvas.addEventListener:",r.addEventListener),r.addEventListener?(r.addEventListener("click",Je,!1),console.log("onCanvasClick 0")):r.attachEvent?(r.attachEvent("onClick",Je),console.log("onCanvasClick 1")):(r.onClick=Je,console.log("onCanvasClick 2"))}function U(){var B=Q.defer();if(p!=null){var j=new c.STU.Protocol;p.setInkingMode(j.InkingMode.InkingMode_Off).then(function(te){return console.log("received: "+JSON.stringify(te)),p.endCapture()}).then(function(te){return console.log("received: "+JSON.stringify(te)),O!==null?O.remove():te}).then(function(te){return console.log("received: "+JSON.stringify(te)),O=null,p.setClearScreen()}).then(function(te){return console.log("received: "+JSON.stringify(te)),p.disconnect()}).then(function(te){console.log("received: "+JSON.stringify(te)),p=null,ge(r,i)}).then(function(te){B.resolve()}).fail(function(te){console.log("disconnect error: "+te),B.resolve()})}else B.resolve();return B.promise}window.addEventListener("beforeunload",function(B){var j="";return c.STU.close(),(B||window.event).returnValue=j,j});function ee(){}ee.prototype=new Error;function ve(){u.value=!0,de()}function de(){var B=new c.STU.Protocol,j,te,fe;c.STU.isDCAReady().then(function(q){if(!q)throw new ee;return c.STU.onDCAtimeout=D,c.STU.getUsbDevices()}).then(function(q){if(q==null||q.length==0)throw new Error("No STU devices found");return console.log("received: "+JSON.stringify(q)),Y=q,c.STU.isSupportedUsbDevice(Y[0].idVendor,Y[0].idProduct)}).then(function(q){return console.log("received: "+JSON.stringify(q)),j=new c.STU.UsbInterface,j.Constructor()}).then(function(q){return console.log("received: "+JSON.stringify(q)),j.connect(Y[0],!0)}).then(function(q){return console.log("received: "+JSON.stringify(q)),p=new c.STU.Tablet,p.Constructor(j,te,fe)}).then(function(q){return console.log("received: "+JSON.stringify(q)),j=null,p.getInkThreshold()}).then(function(q){return console.log("m_inkThreshold received: "+JSON.stringify(q)),L=q,p.getCapability()}).then(function(q){return console.log("m_capability received: "+JSON.stringify(q)),w=q,ne(w.screenWidth,w.screenHeight),p.getInformation()}).then(function(q){return console.log("received: "+JSON.stringify(q)),p.getInkThreshold()}).then(function(q){return console.log("received: "+JSON.stringify(q)),p.getProductId()}).then(function(q){return console.log("received: "+JSON.stringify(q)),c.STU.ProtocolHelper.simulateEncodingFlag(q,w.encodingFlag)}).then(function(q){console.log("received: "+JSON.stringify(q));var pe=q;if((pe&B.EncodingFlag.EncodingFlag_24bit)!=0)return p.supportsWrite().then(function(ye){M=ye?B.EncodingMode.EncodingMode_24bit_Bulk:B.EncodingMode.EncodingMode_24bit});if((pe&B.EncodingFlag.EncodingFlag_16bit)!=0)return p.supportsWrite().then(function(ye){M=ye?B.EncodingMode.EncodingMode_16bit_Bulk:B.EncodingMode.EncodingMode_16bit});M=B.EncodingMode.EncodingMode_1bit}).then(function(q){return p.setClearScreen()}).then(function(q){return console.log("received from setClearScreen: "+JSON.stringify(q)),q}).then(function(q){return console.log("received: "+JSON.stringify(q)),p.isSupported(B.ReportId.ReportId_PenDataOptionMode)}).then(function(q){return console.log("received: "+JSON.stringify(q)),q?p.getProductId().then(function(pe){var ye=B.PenDataOptionMode.PenDataOptionMode_None;switch(pe){case c.STU.ProductId.ProductId_520A:ye=B.PenDataOptionMode.PenDataOptionMode_TimeCount;break;case c.STU.ProductId.ProductId_430:case c.STU.ProductId.ProductId_530:case c.STU.ProductId.ProductId_540:ye=B.PenDataOptionMode.PenDataOptionMode_TimeCountSequence;break;default:console.log("Unknown tablet supporting PenDataOptionMode, setting to None.")}return p.setPenDataOptionMode(ye)}):(M=B.EncodingMode.EncodingMode_1bit,M)}).then(function(q){console.log("received: "+JSON.stringify(q)),_();var pe=r.toDataURL("image/png");return c.STU.ProtocolHelper.resizeAndFlatten(pe,0,0,0,0,w.screenWidth,w.screenHeight,M,1,!1,0,!0)}).then(function(q){return O=q,console.log("received: "+JSON.stringify(q)),p.writeImage(M,q)}).then(function(q){return console.log("received: "+JSON.stringify(q)),p.setInkingMode(B.InkingMode.InkingMode_On)}).then(function(q){console.log("received: "+JSON.stringify(q));var pe=new c.STU.ProtocolHelper.ReportHandler;l={x:0,y:0},a=!1,i.lineWidth=1;var ye=function(Be){Se(Be,r),Ae(Be,r,i),G.push(Be)},Re=function(Be){Se(Be.penData[0],r),Ae(Be.penData[0],r,i),Se(Be.penData[1],r),Ae(Be.penData[1],r,i),G.push(Be.penData[0],Be.penData[1])},qe=function(Be){},Ne=function(Be){};return G=new Array,pe.onReportPenData=ye,pe.onReportPenDataOption=ye,pe.onReportPenDataTimeCountSequence=ye,pe.onReportPenDataEncrypted=Re,pe.onReportPenDataEncryptedOption=Re,pe.onReportPenDataTimeCountSequenceEncrypted=ye,pe.onReportDevicePublicKey=qe,pe.onReportEncryptionStatus=qe,pe.decrypt=Ne,pe.startReporting(p,!0)}).fail(function(q){console.log(q),q instanceof ee?(c.STU.Reinitialize(),setTimeout(de,k)):(alert(`promptSigDialog failed:
`+q),setTimeout(Me(),0))})}function _(){if(g=new Array(3),g[0]=new I,g[1]=new I,g[2]=new I,Y[0].idProduct!=c.STU.ProductId.ProductId_300){var B=w.screenWidth/3,j=w.screenWidth/3,te=w.screenWidth-B-j,fe=w.screenHeight*6/7,q=w.screenHeight-fe;g[0].Bounds=new Z(0,fe,te,q),g[1].Bounds=new Z(te,fe,B,q),g[2].Bounds=new Z(te+B,fe,j,q)}else{var pe=w.screenWidth*3/4,ye=w.screenWidth-pe,Re=w.screenHeight/3,qe=w.screenHeight/3,Ne=w.screenHeight-Re-qe;g[0].Bounds=new Z(pe,0,ye,Ne),g[1].Bounds=new Z(pe,Ne,ye,Re),g[2].Bounds=new Z(pe,Ne+Re,ye,qe)}g[0].Text=T,g[1].Text=y,g[2].Text=m,g[0].Click=ae,g[1].Click=A,g[2].Click=se,ge(r,i),x()}function x(){i.save(),i.setTransform(1,0,0,1,0,0),i.beginPath(),i.lineWidth=1,i.strokeStyle="black",i.font="30px Arial";for(var B=0;B<g.length;++B){i.fillStyle="lightgrey",i.fillRect(g[B].Bounds.x,g[B].Bounds.y,g[B].Bounds.width,g[B].Bounds.height),i.fillStyle="black",i.rect(g[B].Bounds.x,g[B].Bounds.y,g[B].Bounds.width,g[B].Bounds.height);var j=g[B].Bounds.x+(g[B].Bounds.width/2-i.measureText(g[B].Text).width/2),te;Y[0].idProduct==c.STU.ProductId.ProductId_300?te=28:Y[0].idProduct==c.STU.ProductId.ProductId_430?te=26:te=40,i.fillText(g[B].Text,j,g[B].Bounds.y+te)}i.stroke(),i.closePath(),i.restore()}function z(){ge(r,i),x(),G=new Array,p.writeImage(M,O)}function ae(){console.log("btnOk_Click: ",this),Ke(),setTimeout(Me,0)}function se(){setTimeout(Me,0)}function A(){console.log("clear!"),z()}function W(B,j){return Math.pow(B.x-j.x,2)+Math.pow(B.y-j.y,2)}function ge(B,j){j.save(),j.setTransform(1,0,0,1,0,0),j.fillStyle="white",j.fillRect(0,0,B.width,B.height),j.restore()}function V(B,j){j.save(),j.setTransform(1,0,0,1,0,0),j.fillStyle="#ffffff00",j.fillRect(0,0,B.width,B.height),j.restore()}function Se(B,j){var te={};te.x=Math.round(j.width*B.x/w.tabletMaxX),te.y=Math.round(j.height*B.y/w.tabletMaxY);for(var fe=a?!(B.pressure<=L.offPressureMark):B.pressure>L.onPressureMark,q=-1,pe=0;pe<g.length;++pe)if(g[pe].Bounds.Contains(te)){q=pe;break}return a&&!fe?(q!=-1&&S===q&&g[q].Click(),S=-1):q!=-1&&!a&&fe&&(S=q),q==-1}function Ae(B,j,te){var fe={};fe.x=Math.round(j.width*B.x/w.tabletMaxX),fe.y=Math.round(j.height*B.y/w.tabletMaxY);var q=a?!(B.pressure<=L.offPressureMark):B.pressure>L.onPressureMark;!a&&q&&(l=fe),(q&&10<W(l,fe)||a&&!q)&&(te.beginPath(),te.moveTo(l.x,l.y),te.lineTo(fe.x,fe.y),te.stroke(),te.closePath(),l=fe),a=q}function Ke(){var B=document.getElementById("signatureImage"),j=document.createElement("canvas");j.id="signatureCanvas",j.height=B.height,j.width=B.width;var te=j.getContext("2d");V(j,te),te.lineWidth="2.5",te.strokeStyle="black",l={x:0,y:0},a=!1;for(var fe=0;fe<G.length;fe++)Ae(G[fe],j,te);s(),B.src=j.toDataURL("image/png")}function Me(){u.value=!1,c.STU.onDCAtimeout=null,U(),document.getElementById("sigPreviewContainer").removeChild(d)}function Je(B){for(var j=B.pageX-d.offsetLeft,te=B.pageY-d.offsetTop,fe=0;fe<g.length;fe++)if(g[fe].Bounds.Contains(new re(j,te))){g[fe].Click();break}}return(B,j)=>(it(),ct(wn,null,[X("div",sa,[X("div",ua,Ce(e.details.address_res_barangay?e.details.address_res_barangay+", ":"")+" "+Ce(e.details.address_res_city)+", "+Ce(e.details.address_res_zip_code)+", "+Ce(e.details.address_res_province),1),X("div",da,Ce(e.details.gender),1),X("div",ca,Ce(e.details.date_of_birth),1),X("div",fa,Ce(e.details.blood_type),1),X("div",pa,Ce(e.details.contact_number),1),X("div",ma,Ce(e.details.emergency_name),1),X("div",ha,Ce(e.details.emergency_number),1),X("div",ga,Ce(e.details.date_issued_formatted),1),X("div",va,Ce(e.details.date_expire_formatted),1),X("div",{style:{width:"100%",position:"absolute",top:"354px","text-align":"center"},id:"signatureDiv",onClick:j[0]||(j[0]=te=>ve())},Sa),X("div",ba,[X("b",null,Ce(e.details.name),1)])]),J(Wt,{modelValue:Wi(u),"onUpdate:modelValue":j[2]||(j[2]=te=>Ki(u)?u.value=te:u=te),"backdrop-filter":"sepia(90%)",persistent:""},{default:we(()=>[J(gn,null,{default:we(()=>[J(Qt,{class:"row items-center q-pb-none text-h6"},{default:we(()=>[et(" Signature ")]),_:1}),J(Qt,null,{default:we(()=>[wa,X("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"16px"},onClick:j[1]||(j[1]=te=>ae())}),X("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"125px"},onClick:A}),X("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",right:"12px"},onClick:se})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var fo=We({name:"QCardActions",props:{...Gi,vertical:Boolean},setup(e,{slots:t}){const n=Qi(e),o=F(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>$("div",{class:o.value},Qe(t.default))}});function po(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var mo=Ji({name:"close-popup",beforeMount(e,{value:t}){const n={depth:po(t),handler(o){n.depth!==0&&setTimeout(()=>{const s=yr(e);s!==void 0&&Sr(s,o,n.depth)})},handlerKey(o){Yt(o,13)===!0&&n.handler(o)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=po(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var xa=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Ta={props:{image:{type:String,default:""},accept:{type:String,default:"image/*"},placeholderSvg:{type:String,default:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 65"><defs><style>.cls-1{fill:#000;}</style></defs><title>Upload_Upload</title><path class="cls-1" d="M32.5,1A31.5,31.5,0,1,1,1,32.5,31.54,31.54,0,0,1,32.5,1m0-1A32.5,32.5,0,1,0,65,32.5,32.5,32.5,0,0,0,32.5,0h0Z"/><polygon class="cls-1" points="41.91 28.2 32.59 18.65 23.09 28.39 24.17 29.44 31.87 21.54 31.87 40.05 33.37 40.05 33.37 21.59 40.83 29.25 41.91 28.2"/><polygon class="cls-1" points="40.66 40.35 40.66 44.35 24.34 44.35 24.34 40.35 22.34 40.35 22.34 44.35 22.34 46.35 24.34 46.35 40.66 46.35 42.66 46.35 42.66 44.35 42.66 40.35 40.66 40.35"/></svg>'},border:{type:Number,default:25},borderRadius:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},color:{type:Array,default:()=>[0,0,0,.5]},scale:{type:Number,default:1},rotation:{type:Number,default:0}},data(){return{cursor:"cursorPointer",canvas:null,context:null,dragged:!1,imageLoaded:!1,changed:!1,state:{drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}}}},computed:{canvasWidth(){return this.getDimensions().canvas.width},canvasHeight(){return this.getDimensions().canvas.height},rotationRadian(){return this.rotation*Math.PI/180}},mounted(){let e=this;if(this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),this.paint(),this.image)this.loadImage(this.image);else{var t=this.svgToImage(this.placeholderSvg);t.onload=function(){var n=e.canvasWidth/2-this.width/2,o=e.canvasHeight/2-this.height/2;e.context.drawImage(t,n,o,this.width,this.height)}}},methods:{drawRoundedRect(e,t,n,o,s,u){if(u===0)e.rect(t,n,o,s);else{const m=o-u,y=s-u;e.translate(t,n),e.arc(u,u,u,Math.PI,Math.PI*1.5),e.lineTo(m,0),e.arc(m,u,u,Math.PI*1.5,Math.PI*2),e.lineTo(o,y),e.arc(m,y,u,Math.PI*2,Math.PI*.5),e.lineTo(u,s),e.arc(u,y,u,Math.PI*.5,Math.PI),e.translate(-t,-n)}},svgToImage(e){let t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),o=(self.URL||self.webkitURL||self).createObjectURL(t),s=new Image;return s.src=o,s},setState(e){var t=Math.ceil(1),n=Math.floor(1e4);this.state=e,this.state.cnt="HELLO"+Math.floor(Math.random()*(n-t))+t},paint(){this.context.save(),this.context.translate(0,0),this.context.fillStyle="rgba("+this.color.slice(0,4).join(",")+")";let e=this.borderRadius;const t=this.getDimensions(),n=t.border,o=t.canvas.height,s=t.canvas.width;e=Math.max(e,0),e=Math.min(e,s/2-n,o/2-n),this.context.beginPath(),this.drawRoundedRect(this.context,n,n,s-n*2,o-n*2,e),this.context.rect(s,0,-s,o),this.context.fill("evenodd"),this.context.restore()},getDimensions(){return{width:this.width,height:this.height,border:this.border,canvas:{width:this.width+this.border*2,height:this.height+this.border*2}}},onDrop(e){if(e=e||window.event,e.stopPropagation(),e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length){const t=new FileReader,n=e.dataTransfer.files[0];this.changed=!0,t.onload=o=>this.loadImage(o.target.result),t.readAsDataURL(n)}},onDragStart(e){e=e||window.event,e.preventDefault(),this.state.drag=!0,this.state.mx=null,this.state.my=null,this.cursor="cursorGrabbing";let t=document,n=!1,o=u=>{this.onDragEnd(u),!n&&u.targetTouches&&e.target.click(),t.removeEventListener("mouseup",o),t.removeEventListener("mousemove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchmove",s)},s=u=>{n=!0,this.onMouseMove(u)};t.addEventListener("mouseup",o),t.addEventListener("mousemove",s),t.addEventListener("touchend",o),t.addEventListener("touchmove",s)},onDragEnd(e){this.state.drag&&(this.state.drag=!1,this.cursor="cursorPointer")},onMouseMove(e){if(e=e||window.event,this.state.drag===!1)return;this.dragged=!0,this.changed=!0;let t=this.state.image;const n=t.x,o=t.y,s=e.targetTouches?e.targetTouches[0].pageX:e.clientX,u=e.targetTouches?e.targetTouches[0].pageY:e.clientY,m={mx:s,my:u,image:t};if(this.state.mx&&this.state.my){const y=(this.state.mx-s)/this.scale,T=(this.state.my-u)/this.scale;t.y=this.getBoundedY(o-T,this.scale),t.x=this.getBoundedX(n-y,this.scale)}this.state.mx=m.mx,this.state.my=m.my,this.state.image=t},replaceImageInBounds(){let e=this.state.image;e.y=this.getBoundedY(e.y,this.scale),e.x=this.getBoundedX(e.x,this.scale)},loadImage(e){let t=new Image,n=this;t.onload=()=>{let o=n.getInitialSize(t.width,t.height);n.state.image.x=0,n.state.image.y=0,n.state.image.resource=t,n.state.image.width=o.width,n.state.image.height=o.height,n.state.drag=!1,n.$emit("vue-avatar-editor:image-ready",n.scale),n.imageLoaded=!0,this.$emit("imageLoaded",n.imageLoaded),n.cursor="cursorGrab"},t.onerror=o=>console.log("error loading image: ",o),this.isDataURL(e)||(t.crossOrigin="anonymous"),t.src=e},getInitialSize(e,t){let n,o;const s=this.getDimensions(),u=s.height/s.width,m=t/e;return u>m?(n=this.getDimensions().height,o=e*(n/t)):(o=this.getDimensions().width,n=t*(o/e)),{height:n,width:o}},isDataURL(e){return e===null?!1:!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i)},getBoundedX(e,t){var n=this.state.image,o=this.getDimensions();let s=Math.abs(n.width*Math.cos(this.rotationRadian))+Math.abs(n.height*Math.sin(this.rotationRadian)),u=Math.floor((s-o.width/t)/2);return u=Math.max(0,u),Math.max(-u,Math.min(e,u))},getBoundedY(e,t){var n=this.state.image,o=this.getDimensions();let s=Math.abs(n.width*Math.sin(this.rotationRadian))+Math.abs(n.height*Math.cos(this.rotationRadian)),u=Math.floor((s-o.height/t)/2);return u=Math.max(0,u),Math.max(-u,Math.min(e,u))},paintImage(e,t,n){if(t.resource){var o=this.calculatePosition(t,n);e.save(),e.globalCompositeOperation="destination-over";let s=this.getDimensions();e.translate(s.canvas.width/2,s.canvas.height/2),e.rotate(this.rotationRadian),e.translate(-s.canvas.width/2,-s.canvas.height/2),e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore()}},transformDataWithRotation(e,t){let n=-this.rotationRadian,o=e*Math.cos(n)-t*Math.sin(n),s=e*Math.sin(n)+t*Math.cos(n);return[o,s]},calculatePosition(e,t){e=e||this.state.image;var n=this.getDimensions();let o=e.width*this.scale,s=e.height*this.scale;var u=(o-n.width)/2,m=(s-n.height)/2,y=e.x*this.scale,T=e.y*this.scale;return[y,T]=this.transformDataWithRotation(y,T),y+=t-u,T+=t-m,{x:y,y:T,height:s,width:o}},redraw(){this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint(),this.paintImage(this.context,this.state.image,this.border)},getImage(){const e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;const n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(t.resource,-e.x,-e.y),n},getImageScaled(){const{width:e,height:t}=this.getDimensions(),n=document.createElement("canvas");return n.width=e,n.height=t,this.paintImage(n.getContext("2d"),this.state.image,0),n},imageChanged(){return this.changed},getCroppingRect(){const e=this.getDimensions(),t={x:e.border,y:e.border,width:e.width,height:e.height},n=this.calculatePosition(this.state.image,e.border);return{x:(t.x-n.x)/n.width,y:(t.y-n.y)/n.height,width:t.width/n.width,height:t.height/n.height}},clicked(e){this.dragged===!0?this.dragged=!1:this.$refs.input.click()},fileSelected(e){var t=e.target.files||e.dataTransfer.files;if(this.$emit("select-file",t),!!t.length){var n=new FileReader;this.changed=!0,n.onload=o=>this.loadImage(o.target.result),n.readAsDataURL(t[0])}},resetImage(){let e=this;this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),e.imageLoaded=!1,this.$emit("imageLoaded",e.imageLoaded),e.state={drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}},this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint();var t=this.svgToImage(this.placeholderSvg);t.onload=function(){var n=e.canvasWidth/2-this.width/2,o=e.canvasHeight/2-this.height/2;e.context.drawImage(t,n,o,this.width,this.height)}}},watch:{state:{handler(e,t){this.imageLoaded&&this.redraw()},deep:!0},scale(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},rotation(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},borderRadius(){this.redraw()}}},Ca=["width","height"],_a=["accept"];function ka(e,t,n,o,s,u){return it(),ct("div",null,[X("canvas",{width:u.canvasWidth,height:u.canvasHeight,class:"cursorPointer",id:"avatarEditorCanvas",ref:"avatarEditorCanvas",onDragover:t[0]||(t[0]=Po(()=>{},["prevent"])),onDrop:t[1]||(t[1]=(...m)=>u.onDrop&&u.onDrop(...m)),onMousedown:t[2]||(t[2]=(...m)=>u.onDragStart&&u.onDragStart(...m)),onTouchstart:t[3]||(t[3]=(...m)=>u.onDragStart&&u.onDragStart(...m)),onClick:t[4]||(t[4]=(...m)=>u.clicked&&u.clicked(...m))},null,40,Ca),X("input",{type:"file",ref:"input",accept:n.accept,onChange:t[5]||(t[5]=(...m)=>u.fileSelected&&u.fileSelected(...m)),style:{display:"none"}},null,40,_a)])}var Ia=xa(Ta,[["render",ka]]);const Ra={id:"photoGetterContainer"},Da={id:"uploadedPhotoEditor",style:{width:"250px",height:"188px",overflow:"hidden",display:"relative","text-align":"center"}},Pa=["hidden"],Ea=X("canvas",{hidden:"",id:"canvasCapture",width:"250px",height:"188px"},null,-1),Ma={class:"q-mt-sm"},Ua=X("video",{id:"player",autoplay:"",style:{width:"1000px"}},null,-1),Aa=X("br",null,null,-1),Oa={id:"uploadForm",enctype:"multipart/form-data"},Va=X("input",{type:"file",id:"fileInput",name:"image",accept:"image/jpeg"},null,-1),Fa=Object.assign({name:"PhotoGetter",components:{VueAvatar:Ia},data(){return{imageIsLoading:"loaded",uploadDialog:!1,prompt:!1,selectedCamDevice:null,camDevices:[],player:null,rotation:0,scale:1,borderRadius:0,imgSrc:null}},watch:{"selected_employee_data.employees_id"(e){e&&(this.imageIsLoading="loading",this.$nextTick(()=>{this.getPhoto().then(()=>{})}))},prompt(e,t){e||window.stream&&window.stream.getTracks().forEach(n=>{n.stop()})},selectedCamDevice(e){this.getStream()}},methods:{imageLoaded(){this.imageIsLoading="loaded"},async getPhoto(){await this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getPhoto:!0,employees_id:this.selected_employee_data.employees_id}).then(({data:e})=>{this.$refs.uploadedPhotoRef.src=e,e||(this.imageIsLoading="loaded")}).catch(e=>{console.error(e)})},uploadImage(){this.imageIsLoading="loading";var e=document.getElementById("uploadForm"),t=new FormData(e);t.append("employees_id",this.selected_employee_data.employees_id),this.$api.post("http://192.168.50.50:8081/id_photo_upload.php",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:n})=>{this.getPhoto(),this.$emit("imageCaptured",t),this.uploadDialog=!this.uploadDialog,this.imageIsLoading="loaded"}).catch(n=>{console.error(n)})},saveClicked:function(){var t=this.$refs.vueavatar.getImageScaled();const n=t.toDataURL("image/jpeg",1),o=document.getElementById("uploadedPhoto");o.src=n;const s=document.getElementById("canvasCapture");s.getContext("2d").drawImage(o,0,0,s.width,s.height),this.$emit("imageCaptured",n),this.uploadDialog=!this.uploadDialog},onImageReady:function(){this.scale=1,this.rotation=0},uploadPhoto(e){const t=document.getElementById("uploadPhotoInput");var n=document.getElementById("uploadedPhoto");t.files&&t.files[0]&&(n.onload=()=>{URL.revokeObjectURL(n.src),document.getElementById("uploadedPhotoEditor");const o=document.getElementById("canvasCapture");o.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,o.width,o.height);const u=o.toDataURL("image/jpeg",1);this.$emit("imageCaptured",u)},n.src=URL.createObjectURL(t.files[0]))},promptDialog(){this.camDevices=[],this.getDevices().then(this.gotDevices),this.prompt=!this.prompt,this.$nextTick(()=>{this.player=document.getElementById("player");const e=document.getElementById("canvasCapture"),t=e.getContext("2d");document.getElementById("capture").addEventListener("click",()=>{t.drawImage(this.player,0,0,e.width,e.height);const o=e.toDataURL("image/jpeg",1),s=document.getElementById("uploadedPhoto");s.src=o,this.prompt=!this.prompt,this.$emit("imageCaptured",o),window.stream&&window.stream.getTracks().forEach(u=>{u.stop()})}),this.getStream()})},getStream(){window.stream&&window.stream.getTracks().forEach(n=>{n.stop()});const e=this.selectedCamDevice.value,t={video:{deviceId:e?{exact:e}:void 0}};return navigator.mediaDevices.getUserMedia(t).then(this.gotStream)},gotStream(e){window.stream=e,this.player.srcObject=e},async getDevices(){return await navigator.mediaDevices.enumerateDevices()},async gotDevices(e){window.deviceInfos=e;for(const t of e){const n={label:"",value:""};n.value=t.deviceId,t.kind==="videoinput"&&(n.label=t.label||`Camera ${videoSelect.length+1}`,this.camDevices.push(n))}this.selectedCamDevice==null&&(this.selectedCamDevice=this.camDevices[0])}},created(){}},{__name:"PhotoGetter",props:{selected_employee_data:{type:Object}},emits:["imageCaptured"],setup(e){return(t,n)=>(it(),ct(wn,null,[X("div",Ra,[X("div",Da,[X("img",{hidden:t.imageIsLoading=="loading",onLoad:n[0]||(n[0]=o=>t.imageLoaded()),id:"uploadedPhoto",ref:"uploadedPhotoRef",style:{transform:"scale(1)",width:"250px !important"}},null,40,Pa),J(Xo,{style:{width:"250px",height:"188px"},hidden:t.imageIsLoading=="loaded"},null,8,["hidden"])]),Ea]),X("div",Ma,[J(He,{unelevated:"",icon:"file_upload",onClick:n[1]||(n[1]=o=>t.uploadDialog=!t.uploadDialog),disable:!e.selected_employee_data.employees_id},{default:we(()=>[et("Upload")]),_:1},8,["disable"]),Xi(t.$slots,"buttons")]),J(Wt,{modelValue:t.prompt,"onUpdate:modelValue":n[3]||(n[3]=o=>t.prompt=o),persistent:""},{default:we(()=>[J(gn,{style:{"min-width":"1500px","text-align":"center"}},{default:we(()=>[J(Qt,{class:"q-pt-none q-ma-lg"},{default:we(()=>[J(hn,{modelValue:t.selectedCamDevice,"onUpdate:modelValue":n[2]||(n[2]=o=>t.selectedCamDevice=o),options:t.camDevices,label:"Device"},null,8,["modelValue","options"]),Ua,Aa,J(He,{id:"capture"},{default:we(()=>[et("Capture")]),_:1})]),_:1}),J(fo,{align:"right",class:"text-primary"},{default:we(()=>[Bn(J(He,{flat:"",label:"Cancel"},null,512),[[mo]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),J(Wt,{modelValue:t.uploadDialog,"onUpdate:modelValue":n[5]||(n[5]=o=>t.uploadDialog=o),persistent:""},{default:we(()=>[J(gn,{style:{"_min-width":"1500px","text-align":"center"}},{default:we(()=>[J(Qt,{class:"q-pt-none q-ma-lg"},{default:we(()=>[X("form",Oa,[Va,X("button",{type:"button",onClick:n[4]||(n[4]=o=>t.uploadImage())},"Upload")])]),_:1}),J(fo,{align:"right",class:"text-primary"},{default:we(()=>[Bn(J(He,{flat:"",label:"Cancel"},null,512),[[mo]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Ba={style:{position:"relative",display:"inline"},ref:"clickBox"},qa=["hidden"],Ha={style:{"font-size":"12pt"}},La={style:{"font-size":"12pt"}},$a={style:{"font-size":"12pt"}},za=Object.assign({name:"PhotoAdjuster",data:function(){return{displayModal:!1,photoFormat:this.photoProps,photoFormatDefault:Object.assign({},this.photoProps),interval:null,count:0,horizontalDir:null}},methods:{mousedown(e){this.horizontalDir=e,this.increment(),this.interval=setInterval(this.increment,100)},mouseup(){clearInterval(this.interval)},increment(){this.horizontalDir=="left"?this.photoFormat.left+=1:this.photoFormat.left-=1},promptDialog(){this.displayModal=!this.displayModal},reset(){this.photoFormat.top=this.photoFormatDefault.top,this.photoFormat.left=this.photoFormatDefault.left,this.photoFormat.scale=this.photoFormatDefault.scale}}},{__name:"PhotoAdjuster",props:{photoProps:{type:Object,required:!0},selected_employee_data:{type:Object}},setup(e){return(t,n)=>(it(),ct("div",Ba,[J(He,{unelevated:"",icon:"format_shapes",onClick:n[0]||(n[0]=o=>t.promptDialog()),disable:!e.selected_employee_data.employees_id},null,8,["disable"]),X("div",{class:"q-pa-md",hidden:t.displayModal==!1,style:{position:"absolute","z-index":"999","background-color":"white",width:"250px","box-shadow":"10px 19px 60px -27px","border-radius":"5px",right:"-210px"}},[J(He,{size:"xs",style:{position:"absolute",top:"10px",right:"10px"},onClick:n[1]||(n[1]=o=>t.reset())},{default:we(()=>[et("Reset")]),_:1}),X("label",Ha,"Vertical: "+Ce(t.photoFormat.top)+"px",1),J(Ie,{type:"number",dense:"",modelValue:t.photoFormat.top,"onUpdate:modelValue":n[2]||(n[2]=o=>t.photoFormat.top=o)},null,8,["modelValue"]),X("label",La,"Horizontal: "+Ce(t.photoFormat.left)+"px",1),J(Ie,{type:"number",dense:"",modelValue:t.photoFormat.left,"onUpdate:modelValue":n[7]||(n[7]=o=>t.photoFormat.left=o),min:-6e3,max:440,step:1},{append:we(()=>[J(He,{round:"",dense:"",flat:"",icon:"chevron_left",type:"button",onMousedown:n[3]||(n[3]=o=>t.mousedown("left")),onMouseup:n[4]||(n[4]=o=>t.mouseup())}),J(He,{round:"",dense:"",flat:"",icon:"chevron_right",onMousedown:n[5]||(n[5]=o=>t.mousedown("right")),onMouseup:n[6]||(n[6]=o=>t.mouseup())})]),_:1},8,["modelValue"]),X("label",$a,"Scale: "+Ce(t.photoFormat.scale)+"px",1),J(Ie,{type:"number",dense:"",modelValue:t.photoFormat.scale,"onUpdate:modelValue":n[8]||(n[8]=o=>t.photoFormat.scale=o),min:0,max:.15,step:.001},null,8,["modelValue"]),J(He,{size:"xs",onClick:n[9]||(n[9]=o=>t.displayModal=!t.displayModal)},{default:we(()=>[et("Close")]),_:1})],8,qa)],512))}}),Na={style:{position:"relative"},ref:"clickBox"},ja=["hidden"],Wa={for:"",style:{"font-size":"12pt"}},Ka={for:"",style:{"font-size":"12pt"}},Ga={for:"",style:{"font-size":"12pt"}},qt=Object.assign({name:"TextFormatter",data:function(){return{displayModal:!1,text:this.textProps,textDefault:Object.assign({},this.textProps)}},methods:{adjustLastName(){this.displayModal=!this.displayModal,console.log(this.textProps)},reset(){this.text.font_size=this.textDefault.font_size,this.text.bottom=this.textDefault.bottom,this.text.left=this.textDefault.left}},mounted(){}},{__name:"TextFormatter",props:{textProps:{type:Object},textFor:{type:String}},setup(e){return(t,n)=>(it(),ct("div",Na,[J(He,{round:"",dense:"",flat:"",icon:"format_shapes",onClick:n[0]||(n[0]=o=>t.adjustLastName())}),X("div",{class:"q-pa-md",hidden:t.displayModal==!1,style:{position:"absolute","z-index":"999","background-color":"white",width:"250px","box-shadow":"10px 10px 20px 10px","border-radius":"5px",right:"0px"}},[J(He,{size:"xs",style:{position:"absolute",top:"10px",right:"10px"},onClick:n[1]||(n[1]=o=>t.reset())},{default:we(()=>[et("Reset")]),_:1}),X("label",Wa,"Font-size: "+Ce(t.text.font_size)+"px",1),J(Ie,{type:"number",modelValue:t.text.font_size,"onUpdate:modelValue":n[2]||(n[2]=o=>t.text.font_size=o),min:8,max:60,step:1},null,8,["modelValue"]),X("label",Ka,"Vertical Position: "+Ce(t.text.bottom)+"px",1),J(Ie,{type:"number",modelValue:t.text.bottom,"onUpdate:modelValue":n[3]||(n[3]=o=>t.text.bottom=o),min:0,max:300,step:1},null,8,["modelValue"]),e.textFor=="position"?(it(),ct(wn,{key:0},[X("label",Ga,"Line Height: "+Ce(t.text.line_height)+"px",1),J(Ie,{type:"number",modelValue:t.text.line_height,"onUpdate:modelValue":n[4]||(n[4]=o=>t.text.line_height=o),min:0,max:238,step:1},null,8,["modelValue"])],64)):Yi("",!0),J(He,{size:"xs",onClick:n[5]||(n[5]=o=>t.displayModal=!t.displayModal)},{default:we(()=>[et("Close")]),_:1})],8,ja)],512))}});function Qa(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(s),t&&(o.href=t),s.href=e,s.href}const Ja=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function tt(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}function Jt(e,t){const o=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return o?parseFloat(o.replace("px","")):0}function Xa(e){const t=Jt(e,"border-left-width"),n=Jt(e,"border-right-width");return e.clientWidth+t+n}function Ya(e){const t=Jt(e,"border-top-width"),n=Jt(e,"border-bottom-width");return e.clientHeight+t+n}function Yo(e,t={}){const n=t.width||Xa(e),o=t.height||Ya(e);return{width:n,height:o}}function Za(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const $e=16384;function el(e){(e.width>$e||e.height>$e)&&(e.width>$e&&e.height>$e?e.width>e.height?(e.height*=$e/e.width,e.width=$e):(e.width*=$e/e.height,e.height=$e):e.width>$e?(e.height*=$e/e.width,e.width=$e):(e.width*=$e/e.height,e.height=$e))}function Xt(e){return new Promise((t,n)=>{const o=new Image;o.decode=()=>t(o),o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}async function tl(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function nl(e,t,n){const o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${t} ${n}`),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("externalResourcesRequired","true"),s.appendChild(u),u.appendChild(e),tl(s)}const Le=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Le(n,t)};function ol(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function il(e){return tt(e).map(t=>{const n=e.getPropertyValue(t),o=e.getPropertyPriority(t);return`${t}: ${n}${o?" !important":""};`}).join(" ")}function rl(e,t,n){const o=`.${e}:${t}`,s=n.cssText?ol(n):il(n);return document.createTextNode(`${o}{${s}}`)}function ho(e,t,n){const o=window.getComputedStyle(e,n),s=o.getPropertyValue("content");if(s===""||s==="none")return;const u=Ja();try{t.className=`${t.className} ${u}`}catch{return}const m=document.createElement("style");m.appendChild(rl(u,n,o)),t.appendChild(m)}function al(e,t){ho(e,t,":before"),ho(e,t,":after")}const go="application/font-woff",vo="image/jpeg",ll={woff:go,woff2:go,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:vo,jpeg:vo,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function sl(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function _n(e){const t=sl(e).toLowerCase();return ll[t]||""}function ul(e){return e.split(/,/)[1]}function vn(e){return e.search(/^(data:)/)!==-1}function Zo(e,t){return`data:${t};base64,${e}`}async function ei(e,t,n){const o=await fetch(e,t);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const s=await o.blob();return new Promise((u,m)=>{const y=new FileReader;y.onerror=m,y.onloadend=()=>{try{u(n({res:o,result:y.result}))}catch(T){m(T)}},y.readAsDataURL(s)})}const cn={};function dl(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}async function kn(e,t,n){const o=dl(e,t,n.includeQueryParams);if(cn[o]!=null)return cn[o];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const u=await ei(e,n.fetchRequestInit,({res:m,result:y})=>(t||(t=m.headers.get("Content-Type")||""),ul(y)));s=Zo(u,t)}catch(u){s=n.imagePlaceholder||"";let m=`Failed to fetch resource: ${e}`;u&&(m=typeof u=="string"?u:u.message),m&&console.warn(m)}return cn[o]=s,s}async function cl(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Xt(t)}async function fl(e,t){if(e.currentSrc){const u=document.createElement("canvas"),m=u.getContext("2d");u.width=e.clientWidth,u.height=e.clientHeight,m==null||m.drawImage(e,0,0,u.width,u.height);const y=u.toDataURL();return Xt(y)}const n=e.poster,o=_n(n),s=await kn(n,o,t);return Xt(s)}async function pl(e){var t;try{if(!((t=e==null?void 0:e.contentDocument)===null||t===void 0)&&t.body)return await en(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function ml(e,t){return Le(e,HTMLCanvasElement)?cl(e):Le(e,HTMLVideoElement)?fl(e,t):Le(e,HTMLIFrameElement)?pl(e):e.cloneNode(!1)}const hl=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function gl(e,t,n){var o,s;let u=[];return hl(e)&&e.assignedNodes?u=tt(e.assignedNodes()):Le(e,HTMLIFrameElement)&&((o=e.contentDocument)===null||o===void 0?void 0:o.body)?u=tt(e.contentDocument.body.childNodes):u=tt(((s=e.shadowRoot)!==null&&s!==void 0?s:e).childNodes),u.length===0||Le(e,HTMLVideoElement)||await u.reduce((m,y)=>m.then(()=>en(y,n)).then(T=>{T&&t.appendChild(T)}),Promise.resolve()),t}function vl(e,t){const n=t.style;if(!n)return;const o=window.getComputedStyle(e);o.cssText?(n.cssText=o.cssText,n.transformOrigin=o.transformOrigin):tt(o).forEach(s=>{let u=o.getPropertyValue(s);s==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Le(e,HTMLIFrameElement)&&s==="display"&&u==="inline"&&(u="block"),s==="d"&&t.getAttribute("d")&&(u=`path(${t.getAttribute("d")})`),n.setProperty(s,u,o.getPropertyPriority(s))})}function yl(e,t){Le(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Le(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Sl(e,t){if(Le(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find(s=>e.value===s.getAttribute("value"));o&&o.setAttribute("selected","")}}function bl(e,t){return Le(t,Element)&&(vl(e,t),al(e,t),yl(e,t),Sl(e,t)),t}async function wl(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const o={};for(let u=0;u<n.length;u++){const y=n[u].getAttribute("xlink:href");if(y){const T=e.querySelector(y),C=document.querySelector(y);!T&&C&&!o[y]&&(o[y]=await en(C,t,!0))}}const s=Object.values(o);if(s.length){const u="http://www.w3.org/1999/xhtml",m=document.createElementNS(u,"svg");m.setAttribute("xmlns",u),m.style.position="absolute",m.style.width="0",m.style.height="0",m.style.overflow="hidden",m.style.display="none";const y=document.createElementNS(u,"defs");m.appendChild(y);for(let T=0;T<s.length;T++)y.appendChild(s[T]);e.appendChild(m)}return e}async function en(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(o=>ml(o,t)).then(o=>gl(e,o,t)).then(o=>bl(e,o)).then(o=>wl(o,t))}const ti=/url\((['"]?)([^'"]+?)\1\)/g,xl=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Tl=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Cl(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function _l(e){const t=[];return e.replace(ti,(n,o,s)=>(t.push(s),n)),t.filter(n=>!vn(n))}async function kl(e,t,n,o,s){try{const u=n?Qa(t,n):t,m=_n(t);let y;if(s){const T=await s(u);y=Zo(T,m)}else y=await kn(u,m,o);return e.replace(Cl(t),`$1${y}$3`)}catch{}return e}function Il(e,{preferredFontFormat:t}){return t?e.replace(Tl,n=>{for(;;){const[o,,s]=xl.exec(n)||[];if(!s)return"";if(s===t)return`src: ${o};`}}):e}function ni(e){return e.search(ti)!==-1}async function oi(e,t,n){if(!ni(e))return e;const o=Il(e,n);return _l(o).reduce((u,m)=>u.then(y=>kl(y,m,t,n)),Promise.resolve(o))}async function Ht(e,t,n){var o;const s=(o=t.style)===null||o===void 0?void 0:o.getPropertyValue(e);if(s){const u=await oi(s,null,n);return t.style.setProperty(e,u,t.style.getPropertyPriority(e)),!0}return!1}async function Rl(e,t){await Ht("background",e,t)||await Ht("background-image",e,t),await Ht("mask",e,t)||await Ht("mask-image",e,t)}async function Dl(e,t){const n=Le(e,HTMLImageElement);if(!(n&&!vn(e.src))&&!(Le(e,SVGImageElement)&&!vn(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,s=await kn(o,_n(o),t);await new Promise((u,m)=>{e.onload=u,e.onerror=m;const y=e;y.decode&&(y.decode=u),y.loading==="lazy"&&(y.loading="eager"),n?(e.srcset="",e.src=s):e.href.baseVal=s})}async function Pl(e,t){const o=tt(e.childNodes).map(s=>ii(s,t));await Promise.all(o).then(()=>e)}async function ii(e,t){Le(e,Element)&&(await Rl(e,t),await Dl(e,t),await Pl(e,t))}function El(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;return o!=null&&Object.keys(o).forEach(s=>{n[s]=o[s]}),e}const yo={};async function So(e){let t=yo[e];if(t!=null)return t;const o=await(await fetch(e)).text();return t={url:e,cssText:o},yo[e]=t,t}async function bo(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,u=(n.match(/url\([^)]+\)/g)||[]).map(async m=>{let y=m.replace(o,"$1");return y.startsWith("https://")||(y=new URL(y,e.url).href),ei(y,t.fetchRequestInit,({result:T})=>(n=n.replace(m,`url(${T})`),[m,T]))});return Promise.all(u).then(()=>n)}function wo(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=e.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const T=s.exec(o);if(T===null)break;t.push(T[0])}o=o.replace(s,"");const u=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,m="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",y=new RegExp(m,"gi");for(;;){let T=u.exec(o);if(T===null){if(T=y.exec(o),T===null)break;u.lastIndex=y.lastIndex}else y.lastIndex=u.lastIndex;t.push(T[0])}return t}async function Ml(e,t){const n=[],o=[];return e.forEach(s=>{if("cssRules"in s)try{tt(s.cssRules||[]).forEach((u,m)=>{if(u.type===CSSRule.IMPORT_RULE){let y=m+1;const T=u.href,C=So(T).then(k=>bo(k,t)).then(k=>wo(k).forEach(R=>{try{s.insertRule(R,R.startsWith("@import")?y+=1:s.cssRules.length)}catch(r){console.error("Error inserting rule from remote css",{rule:R,error:r})}})).catch(k=>{console.error("Error loading remote css",k.toString())});o.push(C)}})}catch(u){const m=e.find(y=>y.href==null)||document.styleSheets[0];s.href!=null&&o.push(So(s.href).then(y=>bo(y,t)).then(y=>wo(y).forEach(T=>{m.insertRule(T,s.cssRules.length)})).catch(y=>{console.error("Error loading remote stylesheet",y)})),console.error("Error inlining remote css file",u)}}),Promise.all(o).then(()=>(e.forEach(s=>{if("cssRules"in s)try{tt(s.cssRules||[]).forEach(u=>{n.push(u)})}catch(u){console.error(`Error while reading CSS rules from ${s.href}`,u)}}),n))}function Ul(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>ni(t.style.getPropertyValue("src")))}async function Al(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=tt(e.ownerDocument.styleSheets),o=await Ml(n,t);return Ul(o)}async function Ol(e,t){const n=await Al(e,t);return(await Promise.all(n.map(s=>{const u=s.parentStyleSheet?s.parentStyleSheet.href:null;return oi(s.cssText,u,t)}))).join(`
`)}async function Vl(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Ol(e,t);if(n){const o=document.createElement("style"),s=document.createTextNode(n);o.appendChild(s),e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)}}async function Fl(e,t={}){const{width:n,height:o}=Yo(e,t),s=await en(e,t,!0);return await Vl(s,t),await ii(s,t),El(s,t),await nl(s,n,o)}async function Bl(e,t={}){const{width:n,height:o}=Yo(e,t),s=await Fl(e,t),u=await Xt(s),m=document.createElement("canvas"),y=m.getContext("2d"),T=t.pixelRatio||Za(),C=t.canvasWidth||n,k=t.canvasHeight||o;return m.width=C*T,m.height=k*T,t.skipAutoScale||el(m),m.style.width=`${C}`,m.style.height=`${k}`,t.backgroundColor&&(y.fillStyle=t.backgroundColor,y.fillRect(0,0,m.width,m.height)),y.drawImage(u,0,0,m.width,m.height),m}async function xo(e,t={}){return(await Bl(e,t)).toDataURL("image/jpeg",t.quality||1)}const ql={class:"row",style:{position:"inherit"}},Hl={class:"col",style:{}},Ll={class:"row"},$l={class:"col"},zl={style:{"margin-left":"30px"}},Nl={class:"col-7"},jl={class:"row"},Wl={class:"row"},Kl={class:"col"},Gl={class:"col q-ml-sm"},Ql={class:"row"},Jl={class:"row"},Xl={class:"row"},Yl={class:"row"},Zl={class:"col"},es={class:"col q-ml-sm"},ts=X("div",{class:"q-mt-sm"},null,-1),ns={id:"cardFrontAndBack",class:"col flex flex-center q-mt-lg",style:{position:"relative"}},as=Object.assign({name:"IndexPage",components:{IdCardFront:uo,IdCardBack:co,TextFormatter:qt},data:function(){return{photoFormat:{top:1897,left:2924,scale:.071},textFormat:{position:{font_size:17,bottom:83,left:40,line_height:20},lastName:{font_size:43,bottom:119,left:40},firstName:{font_size:28,bottom:97,left:40}},selected_employee_input:null,selected_employee_data:{empno:null,lastName:null,firstName:null,middleName:null,extName:null,position:null,position_function:null,address:null},employees:[],selections:this.employees,timestamp:0}},methods:{saveImageCaptured(e){this.timestamp=new Date().valueOf()},savePendata(e){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{savePendata:!0,m_penData:e,employees_id:this.selected_employee_data.employees_id}).then(({data:t})=>{}).catch(t=>{console.error(t)})},adjustLastName(){console.log("adjust lastname")},downloadImage(){var e=document.getElementById("IdCardFront"),t=document.getElementById("IdCardBack");xo(e,{quality:1}).then(n=>{var o=document.createElement("a");o.download=this.selected_employee_data.lastName+"_"+this.selected_employee_data.empno+"_FRONT.jpeg",o.href=n,o.click()}),xo(t,{quality:1}).then(n=>{var o=document.createElement("a");o.download=this.selected_employee_data.lastName+"_"+this.selected_employee_data.empno+"_BACK.jpeg",o.href=n,o.click()})},onClearForm(){window.location.reload()},onSubmit(){console.log("this.textFormat: ",this.textFormat),this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{saveEmployeeData:!0,selected_employee_data:this.selected_employee_data,textFormat:this.textFormat,photoFormat:this.photoFormat}).then(({data:e})=>{this.getEmployeeData()}).catch(e=>{console.error(e)})},onReset(){},getEmployeeData(){!this.selected_employee_input||this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getEmployeeData:!0,employeeId:this.selected_employee_input.value}).then(({data:e})=>{console.log("getEmployeeData: ",e),this.selected_employee_data=e,e.text_formatting&&(this.textFormat.position.font_size=e.text_formatting.position.font_size,this.textFormat.position.bottom=e.text_formatting.position.bottom,this.textFormat.position.line_height=e.text_formatting.position.line_height,this.textFormat.lastName.font_size=e.text_formatting.lastName.font_size,this.textFormat.lastName.bottom=e.text_formatting.lastName.bottom,this.textFormat.firstName.font_size=e.text_formatting.firstName.font_size,this.textFormat.firstName.bottom=e.text_formatting.firstName.bottom),e.photo_formatting&&(this.photoFormat.top=e.photo_formatting.top,this.photoFormat.left=e.photo_formatting.left,this.photoFormat.scale=e.photo_formatting.scale)}).catch(e=>{console.error(e)})},filterFn(e,t){if(e===""){t(()=>{this.selections=this.employees});return}t(()=>{const n=e.toLowerCase();this.selections=this.employees.filter(o=>o.label.toLowerCase().indexOf(n)>-1)})}},created(){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getEmployeeList:"true"}).then(({data:e})=>{this.employees=e}).catch(e=>{console.error(e)})},mounted(){}},{__name:"IndexPage",setup(e){return(t,n)=>(it(),Zi(er,{class:"q-pa-md",style:{position:"relative"}},{default:we(()=>[X("div",ql,[X("div",Hl,[J(hn,{clearable:"",class:"q-mb-md",filled:"",modelValue:t.selected_employee_input,"onUpdate:modelValue":[n[0]||(n[0]=o=>t.selected_employee_input=o),n[2]||(n[2]=o=>t.getEmployeeData())],"use-input":"","input-debounce":"0",label:"Select Employee",options:t.selections,onFilter:t.filterFn,onClear:n[1]||(n[1]=o=>t.onClearForm()),behavior:"menu"},{"no-option":we(()=>[J(Co,null,{default:we(()=>[J(To,{class:"text-grey"},{default:we(()=>[et(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"]),X("div",Ll,[X("div",$l,[X("div",zl,[J(Fa,{onImageCaptured:t.saveImageCaptured,selected_employee_data:t.selected_employee_data},{buttons:we(()=>[J(za,{photoProps:t.photoFormat,selected_employee_data:t.selected_employee_data},null,8,["photoProps","selected_employee_data"])]),_:1},8,["onImageCaptured","selected_employee_data"])])]),X("div",Nl,[J(Yr,{onSubmit:Po(t.onSubmit,["prevent"]),onReset:t.onReset,class:"q-gutter-sm_"},{default:we(()=>[J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.empno,"onUpdate:modelValue":n[3]||(n[3]=o=>t.selected_employee_data.empno=o),label:"ID Number *",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"Please enter the ID number"]},null,8,["disable","modelValue","rules"]),J(Ie,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.position,"onUpdate:modelValue":n[4]||(n[4]=o=>t.selected_employee_data.position=o),label:"Position",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Position should not be empty!"]},{append:we(()=>[J(qt,{textProps:t.textFormat.position,textFor:"position"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"]),X("div",jl,[J(Ie,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.lastName,"onUpdate:modelValue":n[5]||(n[5]=o=>t.selected_employee_data.lastName=o),label:"Last Name",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Last Name should not be empty!"]},{append:we(()=>[J(qt,{textProps:t.textFormat.lastName,textFor:"lastName"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"]),J(Ie,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.firstName,"onUpdate:modelValue":n[6]||(n[6]=o=>t.selected_employee_data.firstName=o),label:"First Name",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* First Name should not be empty!"]},{append:we(()=>[J(qt,{textProps:t.textFormat.firstName,textFor:"firstName"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"])]),X("div",Wl,[X("div",Kl,[J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.middleName,"onUpdate:modelValue":n[7]||(n[7]=o=>t.selected_employee_data.middleName=o),label:"Middle Name",hint:""},null,8,["disable","modelValue"])]),X("div",Gl,[J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.extName,"onUpdate:modelValue":n[8]||(n[8]=o=>t.selected_employee_data.extName=o),label:"Name Extension"},null,8,["disable","modelValue"])])]),J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_barangay,"onUpdate:modelValue":n[9]||(n[9]=o=>t.selected_employee_data.address_res_barangay=o),label:"Barangay",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),X("div",Ql,[J(Ie,{class:"col q-mr-sm",disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_city,"onUpdate:modelValue":n[10]||(n[10]=o=>t.selected_employee_data.address_res_city=o),label:"City/Municipality",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),J(Ie,{class:"col",disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_zip_code,"onUpdate:modelValue":n[11]||(n[11]=o=>t.selected_employee_data.address_res_zip_code=o),label:"Zipcode",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"])]),J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_province,"onUpdate:modelValue":n[12]||(n[12]=o=>t.selected_employee_data.address_res_province=o),label:"Province",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),X("div",Jl,[J(hn,{disable:!t.selected_employee_input,class:"col",dense:"",outlined:"",modelValue:t.selected_employee_data.gender,"onUpdate:modelValue":n[13]||(n[13]=o=>t.selected_employee_data.gender=o),options:["MALE","FEMALE"],label:"Gender"},null,8,["disable","modelValue"]),J(Ie,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.birthdate,"onUpdate:modelValue":n[14]||(n[14]=o=>t.selected_employee_data.birthdate=o),label:"Birthdate",type:"date"},null,8,["disable","modelValue"])]),X("div",Xl,[J(Ie,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.blood_type,"onUpdate:modelValue":n[15]||(n[15]=o=>t.selected_employee_data.blood_type=o),label:"Blood Type",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),J(Ie,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.contact_number,"onUpdate:modelValue":n[16]||(n[16]=o=>t.selected_employee_data.contact_number=o),label:"Contact Number",hint:""},null,8,["disable","modelValue"])]),J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.emergency_name,"onUpdate:modelValue":n[17]||(n[17]=o=>t.selected_employee_data.emergency_name=o),label:"Emergency Contact Person",hint:"","lazy-rules":"",rules:[o=>o&&o.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.emergency_number,"onUpdate:modelValue":n[18]||(n[18]=o=>t.selected_employee_data.emergency_number=o),label:"Emergency Contact Number",hint:""},null,8,["disable","modelValue"]),X("div",Yl,[X("div",Zl,[J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.date_issued,"onUpdate:modelValue":n[19]||(n[19]=o=>t.selected_employee_data.date_issued=o),label:"Date Issued",type:"date"},null,8,["disable","modelValue"])]),X("div",es,[J(Ie,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.date_expire,"onUpdate:modelValue":n[20]||(n[20]=o=>t.selected_employee_data.date_expire=o),label:"Valid Until",type:"date"},null,8,["disable","modelValue"])])]),ts,J(He,{disable:!t.selected_employee_input,class:"q-mr-sm",type:"submit"},{default:we(()=>[et("Save")]),_:1},8,["disable"]),J(He,{disable:!t.selected_employee_input,label:"Download",onClick:n[21]||(n[21]=o=>t.downloadImage())},null,8,["disable"])]),_:1},8,["onSubmit","onReset"])])])]),X("div",ns,[J(uo,{details:t.selected_employee_data,timestamp:t.timestamp,textFormat:t.textFormat,photoFormat:t.photoFormat},null,8,["details","timestamp","textFormat","photoFormat"]),J(co,{details:t.selected_employee_data,onOnPenDataSave:t.savePendata},null,8,["details","onOnPenDataSave"])])])]),_:1}))}});export{as as default};
