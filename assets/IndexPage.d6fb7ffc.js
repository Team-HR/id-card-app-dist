import{u as Dt,f as Rt,Q as jt,d as qt}from"./QItem.d36bb198.js";import{u as Wt,a as Kt,b as Gt,c as Jt,d as Qt,e as Xt,f as Pt,g as dt,h as Yt,Q as Ge,i as Zt,j as en,k as ot}from"./QSelect.b56307a3.js";import{r as He,w as Pe,d as $e,M as tn,j as ge,c as Ve,a as nn,o as Ut,h as Oe,N as on,g as Ze,O as lt,p as rn,P as an,R as sn,q as je,S as dn,L as ut,T as ln,x as Ue,U as Ne,F as D,D as z,V as Be,A as E,C as ke,z as ee,W as Et,X as Mt,Y as et,Z as un,_ as cn,$ as pn,K as fn,a0 as Ot,a1 as ye,a2 as mn,a3 as ct,B as hn,y as gn}from"./index.133f3259.js";import{Q as yn}from"./QPage.1cd7c52c.js";const pt={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Je={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ft=Object.keys(Je);Ft.forEach(e=>{Je[e].regex=new RegExp(Je[e].pattern)});const vn=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ft.join("")+"])|(.)","g"),ft=/[.*+?^${}()|[\]\\]/g,pe=String.fromCharCode(1),Sn={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function xn(e,t,i,r){let m,h,T,w,N,M;const j=He(null),L=He(o());function n(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}Pe(()=>e.type+e.autogrow,a),Pe(()=>e.mask,R=>{if(R!==void 0)u(L.value,!0);else{const l=K(L.value);a(),e.modelValue!==l&&t("update:modelValue",l)}}),Pe(()=>e.fillMask+e.reverseFillMask,()=>{j.value===!0&&u(L.value,!0)}),Pe(()=>e.unmaskedValue,()=>{j.value===!0&&u(L.value)});function o(){if(a(),j.value===!0){const R=F(K(e.modelValue));return e.fillMask!==!1?oe(R):R}return e.modelValue}function c(R){if(R<m.length)return m.slice(-R);let l="",U=m;const P=U.indexOf(pe);if(P!==-1){for(let $=R-U.length;$>0;$--)l+=pe;U=U.slice(0,P)+l+U.slice(P)}return U}function a(){if(j.value=e.mask!==void 0&&e.mask.length!==0&&n(),j.value===!1){w=void 0,m="",h="";return}const R=pt[e.mask]===void 0?e.mask:pt[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",U=l.replace(ft,"\\$&"),P=[],$=[],I=[];let Y=e.reverseFillMask===!0,G="",q="";R.replace(vn,(re,k,te,fe,de)=>{if(fe!==void 0){const ae=Je[fe];I.push(ae),q=ae.negate,Y===!0&&($.push("(?:"+q+"+)?("+ae.pattern+"+)?(?:"+q+"+)?("+ae.pattern+"+)?"),Y=!1),$.push("(?:"+q+"+)?("+ae.pattern+")?")}else if(te!==void 0)G="\\"+(te==="\\"?"":te),I.push(te),P.push("([^"+G+"]+)?"+G+"?");else{const ae=k!==void 0?k:de;G=ae==="\\"?"\\\\\\\\":ae.replace(ft,"\\\\$&"),I.push(ae),P.push("([^"+G+"]+)?"+G+"?")}});const me=new RegExp("^"+P.join("")+"("+(G===""?".":"[^"+G+"]")+"+)?"+(G===""?"":"["+G+"]*")+"$"),ve=$.length-1,Z=$.map((re,k)=>k===0&&e.reverseFillMask===!0?new RegExp("^"+U+"*"+re):k===ve?new RegExp("^"+re+"("+(q===""?".":q)+"+)?"+(e.reverseFillMask===!0?"$":U+"*")):new RegExp("^"+re));T=I,w=re=>{const k=me.exec(e.reverseFillMask===!0?re:re.slice(0,I.length+1));k!==null&&(re=k.slice(1).join(""));const te=[],fe=Z.length;for(let de=0,ae=re;de<fe;de++){const Ie=Z[de].exec(ae);if(Ie===null)break;ae=ae.slice(Ie.shift().length),te.push(...Ie)}return te.length!==0?te.join(""):re},m=I.map(re=>typeof re=="string"?re:pe).join(""),h=m.split(pe).join(l)}function u(R,l,U){const P=r.value,$=P.selectionEnd,I=P.value.length-$,Y=K(R);l===!0&&a();const G=F(Y),q=e.fillMask!==!1?oe(G):G,me=L.value!==q;P.value!==q&&(P.value=q),me===!0&&(L.value=q),document.activeElement===P&&$e(()=>{if(q===h){const Z=e.reverseFillMask===!0?h.length:0;P.setSelectionRange(Z,Z,"forward");return}if(U==="insertFromPaste"&&e.reverseFillMask!==!0){const Z=P.selectionEnd;let re=$-1;for(let k=N;k<=re&&k<Z;k++)m[k]!==pe&&re++;x.right(P,re);return}if(["deleteContentBackward","deleteContentForward"].indexOf(U)!==-1){const Z=e.reverseFillMask===!0?$===0?q.length>G.length?1:0:Math.max(0,q.length-(q===h?0:Math.min(G.length,I)+1))+1:$;P.setSelectionRange(Z,Z,"forward");return}if(e.reverseFillMask===!0)if(me===!0){const Z=Math.max(0,q.length-(q===h?0:Math.min(G.length,I+1)));Z===1&&$===1?P.setSelectionRange(Z,Z,"forward"):x.rightReverse(P,Z)}else{const Z=q.length-I;P.setSelectionRange(Z,Z,"backward")}else if(me===!0){const Z=Math.max(0,m.indexOf(pe),Math.min(G.length,$)-1);x.right(P,Z)}else{const Z=$-1;x.right(P,Z)}});const ve=e.unmaskedValue===!0?K(q):q;String(e.modelValue)!==ve&&(e.modelValue!==null||ve!=="")&&i(ve,!0)}function f(R,l,U){const P=F(K(R.value));l=Math.max(0,m.indexOf(pe),Math.min(P.length,l)),N=l,R.setSelectionRange(l,U,"forward")}const x={left(R,l){const U=m.slice(l-1).indexOf(pe)===-1;let P=Math.max(0,l-1);for(;P>=0;P--)if(m[P]===pe){l=P,U===!0&&l++;break}if(P<0&&m[l]!==void 0&&m[l]!==pe)return x.right(R,0);l>=0&&R.setSelectionRange(l,l,"backward")},right(R,l){const U=R.value.length;let P=Math.min(U,l+1);for(;P<=U;P++)if(m[P]===pe){l=P;break}else m[P-1]===pe&&(l=P);if(P>U&&m[l-1]!==void 0&&m[l-1]!==pe)return x.left(R,U);R.setSelectionRange(l,l,"forward")},leftReverse(R,l){const U=c(R.value.length);let P=Math.max(0,l-1);for(;P>=0;P--)if(U[P-1]===pe){l=P;break}else if(U[P]===pe&&(l=P,P===0))break;if(P<0&&U[l]!==void 0&&U[l]!==pe)return x.rightReverse(R,0);l>=0&&R.setSelectionRange(l,l,"backward")},rightReverse(R,l){const U=R.value.length,P=c(U),$=P.slice(0,l+1).indexOf(pe)===-1;let I=Math.min(U,l+1);for(;I<=U;I++)if(P[I-1]===pe){l=I,l>0&&$===!0&&l--;break}if(I>U&&P[l-1]!==void 0&&P[l-1]!==pe)return x.leftReverse(R,U);R.setSelectionRange(l,l,"forward")}};function S(R){t("click",R),M=void 0}function O(R){if(t("keydown",R),tn(R)===!0||R.altKey===!0)return;const l=r.value,U=l.selectionStart,P=l.selectionEnd;if(R.shiftKey||(M=void 0),R.keyCode===37||R.keyCode===39){R.shiftKey&&M===void 0&&(M=l.selectionDirection==="forward"?U:P);const $=x[(R.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(R.preventDefault(),$(l,M===U?P:U),R.shiftKey){const I=l.selectionStart;l.setSelectionRange(Math.min(M,I),Math.max(M,I),"forward")}}else R.keyCode===8&&e.reverseFillMask!==!0&&U===P?(x.left(l,U),l.setSelectionRange(l.selectionStart,P,"backward")):R.keyCode===46&&e.reverseFillMask===!0&&U===P&&(x.rightReverse(l,P),l.setSelectionRange(U,l.selectionEnd,"forward"))}function F(R){if(R==null||R==="")return"";if(e.reverseFillMask===!0)return J(R);const l=T;let U=0,P="";for(let $=0;$<l.length;$++){const I=R[U],Y=l[$];if(typeof Y=="string")P+=Y,I===Y&&U++;else if(I!==void 0&&Y.regex.test(I))P+=Y.transform!==void 0?Y.transform(I):I,U++;else return P}return P}function J(R){const l=T,U=m.indexOf(pe);let P=R.length-1,$="";for(let I=l.length-1;I>=0&&P!==-1;I--){const Y=l[I];let G=R[P];if(typeof Y=="string")$=Y+$,G===Y&&P--;else if(G!==void 0&&Y.regex.test(G))do $=(Y.transform!==void 0?Y.transform(G):G)+$,P--,G=R[P];while(U===I&&G!==void 0&&Y.regex.test(G));else return $}return $}function K(R){return typeof R!="string"||w===void 0?typeof R=="number"?w(""+R):R:w(R)}function oe(R){return h.length-R.length<=0?R:e.reverseFillMask===!0&&R.length!==0?h.slice(0,-R.length)+R:R+h.slice(R.length)}return{innerValue:L,hasMask:j,moveCursorForPaste:f,updateMaskValue:u,onMaskedKeydown:O,onMaskedClick:S}}function bn(e,t){function i(){const r=e.modelValue;try{const m="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(h=>{m.items.add(h)}),{files:m.files}}catch{return{files:void 0}}}return t===!0?ge(()=>{if(e.type==="file")return i()}):ge(i)}var ue=Ve({name:"QInput",inheritAttrs:!1,props:{...Wt,...Sn,...Kt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Gt,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:i}){const{proxy:r}=Ze(),{$q:m}=r,h={};let T=NaN,w,N,M=null,j;const L=He(null),n=Jt(e),{innerValue:o,hasMask:c,moveCursorForPaste:a,updateMaskValue:u,onMaskedKeydown:f,onMaskedClick:x}=xn(e,t,G,L),S=bn(e,!0),O=ge(()=>dt(o.value)),F=Yt(I),J=Qt(),K=ge(()=>e.type==="textarea"||e.autogrow===!0),oe=ge(()=>K.value===!0||["text","search","url","tel","password"].includes(e.type)),R=ge(()=>{const k={...J.splitAttrs.listeners.value,onInput:I,onPaste:$,onChange:me,onBlur:ve,onFocus:lt};return k.onCompositionstart=k.onCompositionupdate=k.onCompositionend=F,c.value===!0&&(k.onKeydown=f,k.onClick=x),e.autogrow===!0&&(k.onAnimationend=Y),k}),l=ge(()=>{const k={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:n.value,...J.splitAttrs.attributes.value,id:J.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return K.value===!1&&(k.type=e.type),e.autogrow===!0&&(k.rows=1),k});Pe(()=>e.type,()=>{L.value&&(L.value.value=e.modelValue)}),Pe(()=>e.modelValue,k=>{if(c.value===!0){if(N===!0&&(N=!1,String(k)===T))return;u(k)}else o.value!==k&&(o.value=k,e.type==="number"&&h.hasOwnProperty("value")===!0&&(w===!0?w=!1:delete h.value));e.autogrow===!0&&$e(q)}),Pe(()=>e.autogrow,k=>{k===!0?$e(q):L.value!==null&&i.rows>0&&(L.value.style.height="auto")}),Pe(()=>e.dense,()=>{e.autogrow===!0&&$e(q)});function U(){Pt(()=>{const k=document.activeElement;L.value!==null&&L.value!==k&&(k===null||k.id!==J.targetUid.value)&&L.value.focus({preventScroll:!0})})}function P(){L.value!==null&&L.value.select()}function $(k){if(c.value===!0&&e.reverseFillMask!==!0){const te=k.target;a(te,te.selectionStart,te.selectionEnd)}t("paste",k)}function I(k){if(!k||!k.target)return;if(e.type==="file"){t("update:modelValue",k.target.files);return}const te=k.target.value;if(k.target.qComposing===!0){h.value=te;return}if(c.value===!0)u(te,!1,k.inputType);else if(G(te),oe.value===!0&&k.target===document.activeElement){const{selectionStart:fe,selectionEnd:de}=k.target;fe!==void 0&&de!==void 0&&$e(()=>{k.target===document.activeElement&&te.indexOf(k.target.value)===0&&k.target.setSelectionRange(fe,de)})}e.autogrow===!0&&q()}function Y(k){t("animationend",k),q()}function G(k,te){j=()=>{M=null,e.type!=="number"&&h.hasOwnProperty("value")===!0&&delete h.value,e.modelValue!==k&&T!==k&&(T=k,te===!0&&(N=!0),t("update:modelValue",k),$e(()=>{T===k&&(T=NaN)})),j=void 0},e.type==="number"&&(w=!0,h.value=k),e.debounce!==void 0?(M!==null&&clearTimeout(M),h.value=k,M=setTimeout(j,e.debounce)):j()}function q(){requestAnimationFrame(()=>{const k=L.value;if(k!==null){const te=k.parentNode.style,{scrollTop:fe}=k,{overflowY:de,maxHeight:ae}=m.platform.is.firefox===!0?{}:window.getComputedStyle(k),Ie=de!==void 0&&de!=="scroll";Ie===!0&&(k.style.overflowY="hidden"),te.marginBottom=k.scrollHeight-1+"px",k.style.height="1px",k.style.height=k.scrollHeight+"px",Ie===!0&&(k.style.overflowY=parseInt(ae,10)<k.scrollHeight?"auto":"hidden"),te.marginBottom="",k.scrollTop=fe}})}function me(k){F(k),M!==null&&(clearTimeout(M),M=null),j!==void 0&&j(),t("change",k.target.value)}function ve(k){k!==void 0&&lt(k),M!==null&&(clearTimeout(M),M=null),j!==void 0&&j(),w=!1,N=!1,delete h.value,e.type!=="file"&&setTimeout(()=>{L.value!==null&&(L.value.value=o.value!==void 0?o.value:"")})}function Z(){return h.hasOwnProperty("value")===!0?h.value:o.value!==void 0?o.value:""}nn(()=>{ve()}),Ut(()=>{e.autogrow===!0&&q()}),Object.assign(J,{innerValue:o,fieldClass:ge(()=>`q-${K.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:ge(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:L,emitValue:G,hasValue:O,floatingLabel:ge(()=>O.value===!0&&(e.type!=="number"||isNaN(o.value)===!1)||dt(e.displayValue)),getControl:()=>Oe(K.value===!0?"textarea":"input",{ref:L,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...l.value,...R.value,...e.type!=="file"?{value:Z()}:S.value}),getShadowControl:()=>Oe("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(K.value===!0?"":" text-no-wrap")},[Oe("span",{class:"invisible"},Z()),Oe("span",e.shadowText)])});const re=Xt(J);return Object.assign(r,{focus:U,select:P,getNativeElement:()=>L.value}),on(r,"nativeEl",()=>L.value),re}}),Tn=Ve({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:i}){const r=Ze(),m=He(null);let h=0;const T=[];function w(o){const c=typeof o=="boolean"?o:e.noErrorFocus!==!0,a=++h,u=(S,O)=>{i("validation"+(S===!0?"Success":"Error"),O)},f=S=>{const O=S.validate();return typeof O.then=="function"?O.then(F=>({valid:F,comp:S}),F=>({valid:!1,comp:S,err:F})):Promise.resolve({valid:O,comp:S})};return(e.greedy===!0?Promise.all(T.map(f)).then(S=>S.filter(O=>O.valid!==!0)):T.reduce((S,O)=>S.then(()=>f(O).then(F=>{if(F.valid===!1)return Promise.reject(F)})),Promise.resolve()).catch(S=>[S])).then(S=>{if(S===void 0||S.length===0)return a===h&&u(!0),!0;if(a===h){const{comp:O,err:F}=S[0];if(F!==void 0&&console.error(F),u(!1,O),c===!0){const J=S.find(({comp:K})=>typeof K.focus=="function"&&dn(K.$)===!1);J!==void 0&&J.comp.focus()}}return!1})}function N(){h++,T.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function M(o){o!==void 0&&ut(o);const c=h+1;w().then(a=>{c===h&&a===!0&&(e.onSubmit!==void 0?i("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function j(o){o!==void 0&&ut(o),i("reset"),$e(()=>{N(),e.autofocus===!0&&e.noResetFocus!==!0&&L()})}function L(){Pt(()=>{if(m.value===null)return;const o=m.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||m.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||m.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(m.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);o!=null&&o.focus({preventScroll:!0})})}rn(ln,{bindComponent(o){T.push(o)},unbindComponent(o){const c=T.indexOf(o);c!==-1&&T.splice(c,1)}});let n=!1;return an(()=>{n=!0}),sn(()=>{n===!0&&e.autofocus===!0&&L()}),Ut(()=>{e.autofocus===!0&&L()}),Object.assign(r.proxy,{validate:w,resetValidation:N,submit:M,reset:j,focus:L,getValidationComponents:()=>T}),()=>Oe("form",{class:"q-form",ref:m,onSubmit:M,onReset:j},je(t.default))}});const wn=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],_n=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var rt=Ve({name:"QSkeleton",props:{...Dt,tag:{type:String,default:"div"},type:{type:String,validator:e=>wn.includes(e),default:"rect"},animation:{type:String,validator:e=>_n.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const i=Ze(),r=Rt(e,i.proxy.$q),m=ge(()=>{const T=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:T[0],height:T[1]}}),h=ge(()=>`q-skeleton q-skeleton--${r.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>Oe(e.tag,{class:h.value,style:m.value},je(t.default))}});const In={id:"IdCardFront",class:"front-id",style:{"background-color":"white",width:"640px",height:"1014px","font-size":"22pt",position:"absolute","background-image":"url(/images/REG_ID_Front_Temp.jpg)","background-position":"center center","background-repeat":"no-repeat","background-size":"contain",transform:"scale(0.5)",top:"-200px",left:"-142px"}},Cn={style:{"writing-mode":"vertical-rl","text-orientation":"upright",position:"absolute",top:"151px",left:"6px","font-size":"26.05pt",color:"white","font-weight":"500","text-shadow":"0px 2px 2px black"}},kn={style:{width:"373px",height:"373px","border-radius":"100%",position:"absolute",top:"160px",left:"159px",overflow:"hidden"}},Dn=["hidden","src"],Rn={style:{"text-align":"left",position:"absolute",top:"556px",left:"237px","font-size":"22pt","font-weight":"500"}},Pn=D("b",null,"ID NO.:",-1),mt=Object.assign({name:"IdCardFront",data(){return{imageIsLoading:"loaded",imgSrcFromServer:null}},watch:{"details.employees_id"(e,t){e&&this.$nextTick(()=>{this.getPhoto()})},timestamp(e){e&&(this.imageIsLoading="loading",this.$nextTick(()=>{this.getPhoto()}))}},methods:{getPhoto(){this.imageIsLoading="loading",this.imgSrcFromServer="#",this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getPhoto:!0,employees_id:this.details.employees_id}).then(({data:e})=>{this.imgSrcFromServer=e,this.imageIsLoading="loaded"}).catch(e=>{console.error(e)})}}},{__name:"IdCardFront",props:{details:{type:Object,required:!0},timestamp:{type:Number,required:!0},textFormat:{type:Object,required:!0},photoFormat:{type:Object,required:!0}},setup(e){return(t,i)=>(Ue(),Ne("div",In,[D("div",Cn,z(e.details.employmentStatus?`${e.details.employmentStatus} EMPLOYEE`:""),1),D("div",kn,[D("img",{hidden:t.imageIsLoading=="loading",onLoad:i[0]||(i[0]=r=>t.imageIsLoading="loaded"),src:t.imgSrcFromServer,style:Be([{position:"relative"},`bottom:${e.photoFormat.top*2}px; right: ${e.photoFormat.left*2}px; width: ${e.photoFormat.width*2.06}px;`])},null,44,Dn),E(rt,{style:{width:"250px",height:"188px"},hidden:t.imageIsLoading=="loaded"},null,8,["hidden"])]),D("div",Rn,[Pn,ke(" "+z(e.details.empno?`${e.details.empno.substr(0,1)}-${e.details.empno.substr(-4,4)}`:"_ - ____"),1)]),D("div",{style:Be([`font-size:${e.textFormat.lastName.font_size*2.05}px; bottom: ${e.textFormat.lastName.bottom*2.15}px;
        left: ${e.textFormat.lastName.left*2}px; `,{width:"100%","text-align":"left","font-weight":"500",position:"absolute"}])},z(e.details.lastName)+z(e.details.extName?", "+e.details.extName:""),5),D("div",{style:Be([{width:"100%","text-align":"left","font-weight":"700",position:"absolute"},`font-size:${e.textFormat.firstName.font_size*2.05}px; bottom: ${e.textFormat.firstName.bottom*2.15}px;
        left: ${e.textFormat.firstName.left*2}px; `])},z(e.details.firstName)+" "+z(e.details.middleName?e.details.middleName[0]+". ":""),5),D("div",{style:Be([{width:"539px","text-align":"left","font-stretch":"ultra-expanded",position:"absolute"},`font-size:${e.textFormat.position.font_size*2.05}px; bottom: ${e.textFormat.position.bottom*2.23}px;
        left: ${e.textFormat.position.left*2}px; line-height: ${e.textFormat.position.line_height*2}px;`])},z(e.details.position),5)]))}}),Un={id:"IdCardFrontV2",class:"front-id",style:{"background-color":"white",width:"640px",height:"1014px","font-size":"22pt",position:"relative","background-image":"url('/images/REG_ID_Front_Temp.jpg')","background-position":"center","background-repeat":"no-repeat","background-size":"contain"}},En={style:{"writing-mode":"vertical-rl","text-orientation":"upright",position:"absolute",top:"151px",left:"6px","font-size":"26.05pt",color:"white","font-weight":"500","text-shadow":"0px 2px 2px black"}},Mn={style:{width:"373px",height:"373px","border-radius":"100%",position:"absolute",top:"160px",left:"159px",overflow:"hidden"}},On=["hidden","src"],Fn={style:{"text-align":"left",position:"absolute",top:"556px",left:"237px","font-size":"22pt","font-weight":"500"}},Nn=D("b",null,"ID NO.:",-1),ht=Object.assign({name:"IdCardFront",data(){return{imageIsLoading:"loaded",imgSrcFromServer:null}},watch:{"details.employees_id"(e,t){e&&this.$nextTick(()=>{this.getPhoto()})},timestamp(e){e&&(this.imageIsLoading="loading",this.$nextTick(()=>{this.getPhoto()}))}},methods:{getPhoto(){this.imageIsLoading="loading",this.imgSrcFromServer="#",this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getPhoto:!0,employees_id:this.details.employees_id}).then(({data:e})=>{this.imgSrcFromServer=e,this.imageIsLoading="loaded"}).catch(e=>{console.error(e)})}}},{__name:"IdCardFrontV2",props:{details:{type:Object,required:!0},timestamp:{type:Number,required:!0},textFormat:{type:Object,required:!0},photoFormat:{type:Object,required:!0}},setup(e){return(t,i)=>(Ue(),Ne("div",Un,[D("div",En,z(e.details.employmentStatus?`${e.details.employmentStatus} EMPLOYEE`:""),1),D("div",Mn,[D("img",{hidden:t.imageIsLoading=="loading",onLoad:i[0]||(i[0]=r=>t.imageIsLoading="loaded"),src:t.imgSrcFromServer,style:Be([{position:"relative"},`bottom:${e.photoFormat.top*2}px; right: ${e.photoFormat.left*2}px; width: ${e.photoFormat.width*2.06}px;`])},null,44,On),E(rt,{style:{width:"250px",height:"188px"},hidden:t.imageIsLoading=="loaded"},null,8,["hidden"])]),D("div",Fn,[Nn,ke(" "+z(e.details.empno?`${e.details.empno.substr(0,1)}-${e.details.empno.substr(-4,4)}`:"_ - ____"),1)]),D("div",{style:Be([`font-size:${e.textFormat.lastName.font_size*2.05}px; bottom: ${e.textFormat.lastName.bottom*2.15}px;
        left: ${e.textFormat.lastName.left*2}px; `,{width:"100%","text-align":"left","font-weight":"500",position:"absolute"}])},z(e.details.lastName)+z(e.details.extName?", "+e.details.extName:""),5),D("div",{style:Be([{width:"100%","text-align":"left","font-weight":"700",position:"absolute"},`font-size:${e.textFormat.firstName.font_size*2.05}px; bottom: ${e.textFormat.firstName.bottom*2.15}px;
        left: ${e.textFormat.firstName.left*2}px; `])},z(e.details.firstName)+" "+z(e.details.middleName?e.details.middleName[0]+". ":""),5),D("div",{style:Be([{width:"539px","text-align":"left","font-stretch":"ultra-expanded",position:"absolute"},`font-size:${e.textFormat.position.font_size*2.05}px; bottom: ${e.textFormat.position.bottom*2.23}px;
        left: ${e.textFormat.position.left*2}px; line-height: ${e.textFormat.position.line_height*2}px;`])},z(e.details.position),5)]))}});var Le=Ve({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const i=ge(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Oe(e.tag,{class:i.value},je(t.default))}}),Qe=Ve({name:"QCard",props:{...Dt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=Ze(),r=Rt(e,i),m=ge(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>Oe(e.tag,{class:m.value},je(t.default))}}),Nt="/assets/get_sig.0d2f964a.png";/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define(e);else if(typeof ses!="undefined")if(ses.ok())ses.makeQ=e;else return;else if(typeof window!="undefined"||typeof self!="undefined"){var t=typeof window!="undefined"?window:self,i=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=i,this}}else throw new Error("This environment was not anticipated by Q. Please file a bug.")})(function(){var e=!1;try{throw new Error}catch(d){e=!!d.stack}var t=oe(),i,r=function(){},m=function(){var d={task:void 0,next:null},p=d,g=!1,_=void 0,V=!1,W=[];function H(){for(var ce,xe;d.next;)d=d.next,ce=d.task,d.task=void 0,xe=d.domain,xe&&(d.domain=void 0,xe.enter()),le(ce,xe);for(;W.length;)ce=W.pop(),le(ce);g=!1}function le(ce,xe){try{ce()}catch(ze){if(V)throw xe&&xe.exit(),setTimeout(H,0),xe&&xe.enter(),ze;setTimeout(function(){throw ze},0)}xe&&xe.exit()}if(m=function(ce){p=p.next={task:ce,domain:V&&process.domain,next:null},g||(g=!0,_())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)V=!0,_=function(){process.nextTick(H)};else if(typeof setImmediate=="function")typeof window!="undefined"?_=setImmediate.bind(window,H):_=function(){setImmediate(H)};else if(typeof MessageChannel!="undefined"){var ne=new MessageChannel;ne.port1.onmessage=function(){_=se,ne.port1.onmessage=H,H()};var se=function(){ne.port2.postMessage(0)};_=function(){setTimeout(H,0),se()}}else _=function(){setTimeout(H,0)};return m.runAfter=function(ce){W.push(ce),g||(g=!0,_())},m}(),h=Function.call;function T(d){return function(){return h.apply(d,arguments)}}var w=T(Array.prototype.slice),N=T(Array.prototype.reduce||function(d,p){var g=0,_=this.length;if(arguments.length===1)do{if(g in this){p=this[g++];break}if(++g>=_)throw new TypeError}while(1);for(;g<_;g++)g in this&&(p=d(p,this[g],g));return p}),M=T(Array.prototype.indexOf||function(d){for(var p=0;p<this.length;p++)if(this[p]===d)return p;return-1}),j=T(Array.prototype.map||function(d,p){var g=this,_=[];return N(g,function(V,W,H){_.push(d.call(p,W,H,g))},void 0),_}),L=Object.create||function(d){function p(){}return p.prototype=d,new p},n=T(Object.prototype.hasOwnProperty),o=Object.keys||function(d){var p=[];for(var g in d)n(d,g)&&p.push(g);return p},c=T(Object.prototype.toString);function a(d){return d===Object(d)}function u(d){return c(d)==="[object StopIteration]"||d instanceof f}var f;typeof ReturnValue!="undefined"?f=ReturnValue:f=function(d){this.value=d};var x="From previous event:";function S(d,p){if(e&&p.stack&&typeof d=="object"&&d!==null&&d.stack&&d.stack.indexOf(x)===-1){for(var g=[],_=p;_;_=_.source)_.stack&&g.unshift(_.stack);g.unshift(d.stack);var V=g.join(`
`+x+`
`);d.stack=O(V)}}function O(d){for(var p=d.split(`
`),g=[],_=0;_<p.length;++_){var V=p[_];!K(V)&&!F(V)&&V&&g.push(V)}return g.join(`
`)}function F(d){return d.indexOf("(module.js:")!==-1||d.indexOf("(node.js:")!==-1}function J(d){var p=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(d);if(p)return[p[1],Number(p[2])];var g=/at ([^ ]+):(\d+):(?:\d+)$/.exec(d);if(g)return[g[1],Number(g[2])];var _=/.*@(.+):(\d+)$/.exec(d);if(_)return[_[1],Number(_[2])]}function K(d){var p=J(d);if(!p)return!1;var g=p[0],_=p[1];return g===i&&_>=t&&_<=ie}function oe(){if(!!e)try{throw new Error}catch(_){var d=_.stack.split(`
`),p=d[0].indexOf("@")>0?d[1]:d[2],g=J(p);return g?(i=g[0],g[1]):void 0}}function R(d,p,g){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(p+" is deprecated, use "+g+" instead.",new Error("").stack),d.apply(d,arguments)}}function l(d){return d instanceof I?d:me(d)?Re(d):De(d)}l.resolve=l,l.nextTick=m,l.longStackSupport=!1,typeof process=="object"&&process&&process.env&&{}.Q_DEBUG&&(l.longStackSupport=!0),l.defer=U;function U(){var d=[],p=[],g,_=L(U.prototype),V=L(I.prototype);if(V.promiseDispatch=function(H,le,ne){var se=w(arguments);d?(d.push(se),le==="when"&&ne[1]&&p.push(ne[1])):l.nextTick(function(){g.promiseDispatch.apply(g,se)})},V.valueOf=function(){if(d)return V;var H=G(g);return q(H)&&(g=H),H},V.inspect=function(){return g?g.inspect():{state:"pending"}},l.longStackSupport&&e)try{throw new Error}catch(H){V.stack=H.stack.substring(H.stack.indexOf(`
`)+1)}function W(H){g=H,V.source=H,N(d,function(le,ne){l.nextTick(function(){H.promiseDispatch.apply(H,ne)})},void 0),d=void 0,p=void 0}return _.promise=V,_.resolve=function(H){g||W(l(H))},_.fulfill=function(H){g||W(De(H))},_.reject=function(H){g||W(Se(H))},_.notify=function(H){g||N(p,function(le,ne){l.nextTick(function(){ne(H)})},void 0)},_}U.prototype.makeNodeResolver=function(){var d=this;return function(p,g){p?d.reject(p):arguments.length>2?d.resolve(w(arguments,1)):d.resolve(g)}},l.Promise=P,l.promise=P;function P(d){if(typeof d!="function")throw new TypeError("resolver must be a function.");var p=U();try{d(p.resolve,p.reject,p.notify)}catch(g){p.reject(g)}return p.promise}P.race=$,P.all=y,P.reject=Se,P.resolve=l,l.passByCopy=function(d){return d},I.prototype.passByCopy=function(){return this},l.join=function(d,p){return l(d).join(p)},I.prototype.join=function(d){return l([this,d]).spread(function(p,g){if(p===g)return p;throw new Error("Q can't join: not the same: "+p+" "+g)})},l.race=$;function $(d){return P(function(p,g){for(var _=0,V=d.length;_<V;_++)l(d[_]).then(p,g)})}I.prototype.race=function(){return this.then(l.race)},l.makePromise=I;function I(d,p,g){p===void 0&&(p=function(W){return Se(new Error("Promise does not support operation: "+W))}),g===void 0&&(g=function(){return{state:"unknown"}});var _=L(I.prototype);if(_.promiseDispatch=function(W,H,le){var ne;try{d[H]?ne=d[H].apply(_,le):ne=p.call(_,H,le)}catch(se){ne=Se(se)}W&&W(ne)},_.inspect=g,g){var V=g();V.state==="rejected"&&(_.exception=V.reason),_.valueOf=function(){var W=g();return W.state==="pending"||W.state==="rejected"?_:W.value}}return _}I.prototype.toString=function(){return"[object Promise]"},I.prototype.then=function(d,p,g){var _=this,V=U(),W=!1;function H(se){try{return typeof d=="function"?d(se):se}catch(ce){return Se(ce)}}function le(se){if(typeof p=="function"){S(se,_);try{return p(se)}catch(ce){return Se(ce)}}return Se(se)}function ne(se){return typeof g=="function"?g(se):se}return l.nextTick(function(){_.promiseDispatch(function(se){W||(W=!0,V.resolve(H(se)))},"when",[function(se){W||(W=!0,V.resolve(le(se)))}])}),_.promiseDispatch(void 0,"when",[void 0,function(se){var ce,xe=!1;try{ce=ne(se)}catch(ze){if(xe=!0,l.onerror)l.onerror(ze);else throw ze}xe||V.notify(ce)}]),V.promise},l.tap=function(d,p){return l(d).tap(p)},I.prototype.tap=function(d){return d=l(d),this.then(function(p){return d.fcall(p).thenResolve(p)})},l.when=Y;function Y(d,p,g,_){return l(d).then(p,g,_)}I.prototype.thenResolve=function(d){return this.then(function(){return d})},l.thenResolve=function(d,p){return l(d).thenResolve(p)},I.prototype.thenReject=function(d){return this.then(function(){throw d})},l.thenReject=function(d,p){return l(d).thenReject(p)},l.nearer=G;function G(d){if(q(d)){var p=d.inspect();if(p.state==="fulfilled")return p.value}return d}l.isPromise=q;function q(d){return d instanceof I}l.isPromiseAlike=me;function me(d){return a(d)&&typeof d.then=="function"}l.isPending=ve;function ve(d){return q(d)&&d.inspect().state==="pending"}I.prototype.isPending=function(){return this.inspect().state==="pending"},l.isFulfilled=Z;function Z(d){return!q(d)||d.inspect().state==="fulfilled"}I.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},l.isRejected=re;function re(d){return q(d)&&d.inspect().state==="rejected"}I.prototype.isRejected=function(){return this.inspect().state==="rejected"};var k=[],te=[],fe=[],de=!0;function ae(){k.length=0,te.length=0,de||(de=!0)}function Ie(d,p){!de||(typeof process=="object"&&typeof process.emit=="function"&&l.nextTick.runAfter(function(){M(te,d)!==-1&&(process.emit("unhandledRejection",p,d),fe.push(d))}),te.push(d),p&&typeof p.stack!="undefined"?k.push(p.stack):k.push("(no stack) "+p))}function Ee(d){if(!!de){var p=M(te,d);p!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&l.nextTick.runAfter(function(){var g=M(fe,d);g!==-1&&(process.emit("rejectionHandled",k[p],d),fe.splice(g,1))}),te.splice(p,1),k.splice(p,1))}}l.resetUnhandledRejections=ae,l.getUnhandledReasons=function(){return k.slice()},l.stopUnhandledRejectionTracking=function(){ae(),de=!1},ae(),l.reject=Se;function Se(d){var p=I({when:function(g){return g&&Ee(this),g?g(d):this}},function(){return this},function(){return{state:"rejected",reason:d}});return Ie(p,d),p}l.fulfill=De;function De(d){return I({when:function(){return d},get:function(p){return d[p]},set:function(p,g){d[p]=g},delete:function(p){delete d[p]},post:function(p,g){return p==null?d.apply(void 0,g):d[p].apply(d,g)},apply:function(p,g){return d.apply(p,g)},keys:function(){return o(d)}},void 0,function(){return{state:"fulfilled",value:d}})}function Re(d){var p=U();return l.nextTick(function(){try{d.then(p.resolve,p.reject,p.notify)}catch(g){p.reject(g)}}),p.promise}l.master=Ae;function Ae(d){return I({isDef:function(){}},function(g,_){return B(d,g,_)},function(){return l(d).inspect()})}l.spread=Ce;function Ce(d,p,g){return l(d).spread(p,g)}I.prototype.spread=function(d,p){return this.all().then(function(g){return d.apply(void 0,g)},p)},l.async=Me;function Me(d){return function(){function p(W,H){var le;if(typeof StopIteration=="undefined"){try{le=g[W](H)}catch(ne){return Se(ne)}return le.done?l(le.value):Y(le.value,_,V)}else{try{le=g[W](H)}catch(ne){return u(ne)?l(ne.value):Se(ne)}return Y(le,_,V)}}var g=d.apply(this,arguments),_=p.bind(p,"next"),V=p.bind(p,"throw");return _()}}l.spawn=v;function v(d){l.done(l.async(d)())}l.return=b;function b(d){throw new f(d)}l.promised=C;function C(d){return function(){return Ce([this,y(arguments)],function(p,g){return d.apply(p,g)})}}l.dispatch=B;function B(d,p,g){return l(d).dispatch(p,g)}I.prototype.dispatch=function(d,p){var g=this,_=U();return l.nextTick(function(){g.promiseDispatch(_.resolve,d,p)}),_.promise},l.get=function(d,p){return l(d).dispatch("get",[p])},I.prototype.get=function(d){return this.dispatch("get",[d])},l.set=function(d,p,g){return l(d).dispatch("set",[p,g])},I.prototype.set=function(d,p){return this.dispatch("set",[d,p])},l.del=l.delete=function(d,p){return l(d).dispatch("delete",[p])},I.prototype.del=I.prototype.delete=function(d){return this.dispatch("delete",[d])},l.mapply=l.post=function(d,p,g){return l(d).dispatch("post",[p,g])},I.prototype.mapply=I.prototype.post=function(d,p){return this.dispatch("post",[d,p])},l.send=l.mcall=l.invoke=function(d,p){return l(d).dispatch("post",[p,w(arguments,2)])},I.prototype.send=I.prototype.mcall=I.prototype.invoke=function(d){return this.dispatch("post",[d,w(arguments,1)])},l.fapply=function(d,p){return l(d).dispatch("apply",[void 0,p])},I.prototype.fapply=function(d){return this.dispatch("apply",[void 0,d])},l.try=l.fcall=function(d){return l(d).dispatch("apply",[void 0,w(arguments,1)])},I.prototype.fcall=function(){return this.dispatch("apply",[void 0,w(arguments)])},l.fbind=function(d){var p=l(d),g=w(arguments,1);return function(){return p.dispatch("apply",[this,g.concat(w(arguments))])}},I.prototype.fbind=function(){var d=this,p=w(arguments);return function(){return d.dispatch("apply",[this,p.concat(w(arguments))])}},l.keys=function(d){return l(d).dispatch("keys",[])},I.prototype.keys=function(){return this.dispatch("keys",[])},l.all=y;function y(d){return Y(d,function(p){var g=0,_=U();return N(p,function(V,W,H){var le;q(W)&&(le=W.inspect()).state==="fulfilled"?p[H]=le.value:(++g,Y(W,function(ne){p[H]=ne,--g===0&&_.resolve(p)},_.reject,function(ne){_.notify({index:H,value:ne})}))},void 0),g===0&&_.resolve(p),_.promise})}I.prototype.all=function(){return y(this)},l.any=A;function A(d){if(d.length===0)return l.resolve();var p=l.defer(),g=0;return N(d,function(_,V,W){var H=d[W];g++,Y(H,le,ne,se);function le(ce){p.resolve(ce)}function ne(){g--,g===0&&p.reject(new Error("Q can't get fulfillment value from any promise, all promises were rejected."))}function se(ce){p.notify({index:W,value:ce})}},void 0),p.promise}I.prototype.any=function(){return A(this)},l.allResolved=R(X,"allResolved","allSettled");function X(d){return Y(d,function(p){return p=j(p,l),Y(y(j(p,function(g){return Y(g,r,r)})),function(){return p})})}I.prototype.allResolved=function(){return X(this)},l.allSettled=he;function he(d){return l(d).allSettled()}I.prototype.allSettled=function(){return this.then(function(d){return y(j(d,function(p){p=l(p);function g(){return p.inspect()}return p.then(g,g)}))})},l.fail=l.catch=function(d,p){return l(d).then(void 0,p)},I.prototype.fail=I.prototype.catch=function(d){return this.then(void 0,d)},l.progress=Te;function Te(d,p){return l(d).then(void 0,void 0,p)}I.prototype.progress=function(d){return this.then(void 0,void 0,d)},l.fin=l.finally=function(d,p){return l(d).finally(p)},I.prototype.fin=I.prototype.finally=function(d){if(!d||typeof d.apply!="function")throw new Error("Q can't apply finally callback");return d=l(d),this.then(function(p){return d.fcall().then(function(){return p})},function(p){return d.fcall().then(function(){throw p})})},l.done=function(d,p,g,_){return l(d).done(p,g,_)},I.prototype.done=function(d,p,g){var _=function(W){l.nextTick(function(){if(S(W,V),l.onerror)l.onerror(W);else throw W})},V=d||p||g?this.then(d,p,g):this;typeof process=="object"&&process&&process.domain&&(_=process.domain.bind(_)),V.then(void 0,_)},l.timeout=function(d,p,g){return l(d).timeout(p,g)},I.prototype.timeout=function(d,p){var g=U(),_=setTimeout(function(){(!p||typeof p=="string")&&(p=new Error(p||"Timed out after "+d+" ms"),p.code="ETIMEDOUT"),g.reject(p)},d);return this.then(function(V){clearTimeout(_),g.resolve(V)},function(V){clearTimeout(_),g.reject(V)},g.notify),g.promise},l.delay=function(d,p){return p===void 0&&(p=d,d=void 0),l(d).delay(p)},I.prototype.delay=function(d){return this.then(function(p){var g=U();return setTimeout(function(){g.resolve(p)},d),g.promise})},l.nfapply=function(d,p){return l(d).nfapply(p)},I.prototype.nfapply=function(d){var p=U(),g=w(d);return g.push(p.makeNodeResolver()),this.fapply(g).fail(p.reject),p.promise},l.nfcall=function(d){var p=w(arguments,1);return l(d).nfapply(p)},I.prototype.nfcall=function(){var d=w(arguments),p=U();return d.push(p.makeNodeResolver()),this.fapply(d).fail(p.reject),p.promise},l.nfbind=l.denodeify=function(d){if(d===void 0)throw new Error("Q can't wrap an undefined function");var p=w(arguments,1);return function(){var g=p.concat(w(arguments)),_=U();return g.push(_.makeNodeResolver()),l(d).fapply(g).fail(_.reject),_.promise}},I.prototype.nfbind=I.prototype.denodeify=function(){var d=w(arguments);return d.unshift(this),l.denodeify.apply(void 0,d)},l.nbind=function(d,p){var g=w(arguments,2);return function(){var _=g.concat(w(arguments)),V=U();_.push(V.makeNodeResolver());function W(){return d.apply(p,arguments)}return l(W).fapply(_).fail(V.reject),V.promise}},I.prototype.nbind=function(){var d=w(arguments,0);return d.unshift(this),l.nbind.apply(void 0,d)},l.nmapply=l.npost=function(d,p,g){return l(d).npost(p,g)},I.prototype.nmapply=I.prototype.npost=function(d,p){var g=w(p||[]),_=U();return g.push(_.makeNodeResolver()),this.dispatch("post",[d,g]).fail(_.reject),_.promise},l.nsend=l.nmcall=l.ninvoke=function(d,p){var g=w(arguments,2),_=U();return g.push(_.makeNodeResolver()),l(d).dispatch("post",[p,g]).fail(_.reject),_.promise},I.prototype.nsend=I.prototype.nmcall=I.prototype.ninvoke=function(d){var p=w(arguments,1),g=U();return p.push(g.makeNodeResolver()),this.dispatch("post",[d,p]).fail(g.reject),g.promise},l.nodeify=we;function we(d,p){return l(d).nodeify(p)}I.prototype.nodeify=function(d){if(d)this.then(function(p){l.nextTick(function(){d(null,p)})},function(p){l.nextTick(function(){d(p)})});else return this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ie=oe();return l});var s=s||{};s.STUConstructor=function(){var e,t=65535,i=0,r=0,m={},h={};function T(n){return typeof n!="undefined"}function w(){return i++}function N(){return r++}function M(n){var o=9e3,c=this;T(n)||(n=o),this.onDCAtimeout=null,e=new WebSocket("wss://localhost:"+n.toString()+"/ws"),e.onopen=function(){console.log("connected")},e.onmessage=j,e.onclose=function(){console.log("disconnected"),typeof c.onDCAtimeout=="function"&&c.onDCAtimeout()}}M.prototype.Reinitialize=function(){s.STU=new s.STUConstructor},M.prototype.isServiceReady=function(){return e.readyState==1},M.prototype.isDCAReady=function(){var n=Q.defer();return s.STU.isServiceReady()?(setTimeout(function(){n.promise.isPending()&&(s.STU.isServiceReady()&&s.STU.close(),n.resolve(!1))},1e3),s.STU.getUsbDevices().then(function(o){n.promise.isPending()&&n.resolve(!0)}).fail(function(o){n.promise.isPending()&&n.resolve(!0)})):n.resolve(!1),n.promise},M.prototype.close=function(){e.close()};function j(n){if(typeof n.data!="undefined"&&n.data!=""){var o=JSON.parse(n.data);if(T(o.ticket)&&T(m[o.ticket]))T(o.success)&&o.success==!0&&T(o.data)?m[o.ticket].resolve(o.data):m[o.ticket].reject(new Error(T(o.error)?o.error:"")),delete m[o.ticket];else if(T(o.stream)&&T(h[o.stream])&&T(o.data))h[o.stream].stream(o.data);else throw new Error("websocket invalid message: "+n.data)}else console.log("Unexpected message type "+typeof n+" = "+JSON.stringify(n))}function L(n){for(var o=n.length,c=0;c<o;){var a=c+t<o?"0":"1",u=n.substr(c,t);e.send(a+u),c+=t}}return M.prototype.VendorId={VendorId_Wacom:1386},M.prototype.ProductId={ProductId_500:161,ProductId_300:162,ProductId_520A:163,ProductId_430:164,ProductId_530:165,ProductId_430V:166,ProductId_540:168,ProductId_541:169},M.prototype.ProductId_min=161,M.prototype.ProductId_max=175,M.prototype.send=function(n){var o=Q.defer();try{var c=w();n.ticket=c;var a=JSON.stringify(n);L(a),m[c]=o}catch(u){o.reject(u)}return o.promise},M.prototype.sendNoReturn=function(n){var o=JSON.stringify(n);L(o)},M.prototype.setStream=function(n){var o=N();return h[o]=n,o},M.prototype.removeStream=function(n){delete h[n]},M.prototype.getUsbDevices=function(){return s.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"getUsbDevices"})},M.prototype.getTlsDevices=function(){return s.STU.send({scope:"WacomGSS.STU.GetTlsDevices",function:"getTlsDevices"})},M.prototype.isSupportedUsbDevice=function(n,o){return s.STU.send({scope:"WacomGSS.STU.GetUsbDevices",function:"isSupportedUsbDevice",idVendor:n,idProduct:o})},M.prototype.getStringUsbDevice=function(n){function o(c){return("0000"+c.toString(16)).substr(-4)}return o(n.idVendor)+":"+o(n.idProduct)+":"+o(n.bcdDevice)},M.prototype.SerialPort={Type:{Unknown:0,Physical:1,Virtual:2,Remote:3}},M.prototype.getSerialPorts=function(){return s.STU.send({scope:"WacomGSS.STU.GetSerialPorts",function:"getSerialPorts"})},M.prototype.UsbInterface=function(){var n="WacomGSS.STU.UsbInterface",o="";function c(){}return c.prototype.Constructor=function(){return s.STU.send({scope:n,function:"Constructor"}).then(function(a){return o=a.id,a})},c.prototype.connect=function(a,u){return s.STU.send({scope:n,id:o,function:"connect",usbDevice:a,exclusiveLock:u})},c.prototype.toJSON=function(){return{id:o,scope:n}},c.prototype.disconnect=function(){return s.STU.send({scope:n,id:o,function:"disconnect"})},c.prototype.isConnected=function(){return s.STU.send({scope:n,id:o,function:"isConnected"})},c.prototype.queueNotifyAll=function(){return s.STU.send({scope:n,id:o,function:"queueNotifyAll"})},c.prototype.queueSetPredicateAll=function(a){return s.STU.send({scope:n,id:o,function:"queueSetPredicateAll",predicate:a})},c.prototype.get=function(a){return s.STU.send({scope:n,id:o,function:"get_",length:a})},c.prototype.set=function(a){return s.STU.send({scope:n,id:o,function:"set",base64Data:a})},c.prototype.supportsWrite=function(){return s.STU.send({scope:n,id:o,function:"supportsWrite"})},c.prototype.write=function(a){return s.STU.send({scope:n,id:o,function:"write",base64Data:a})},c.prototype.getReportCountLengths=function(){return s.STU.send({scope:n,id:o,function:"getReportCountLengths"})},c.prototype.getProductId=function(){return s.STU.send({scope:n,id:o,function:"getProductId"})},c}(),M.prototype.Protocol=function(){var n="WacomGSS.STU.Protocol",o="",c={};function a(){}return a.prototype.PenDataOptionMode={PenDataOptionMode_None:0,PenDataOptionMode_TimeCount:1,PenDataOptionMode_SequenceNumber:2,PenDataOptionMode_TimeCountSequence:3},a.prototype.InkingMode={InkingMode_Off:0,InkingMode_On:1},a.prototype.ReportId={ReportId_PenData:1,ReportId_Status:3,ReportId_Reset:4,ReportId_HidInformation:6,ReportId_Information:8,ReportId_Capability:9,ReportId_Uid:10,ReportId_Uid2:11,ReportId_DefaultMode:12,ReportId_ReportRate:13,ReportId_RenderingMode:14,ReportId_Eserial:15,ReportId_PenDataEncrypted:16,ReportId_HostPublicKey:19,ReportId_DevicePublicKey:20,ReportId_StartCapture:21,ReportId_EndCapture:22,ReportId_DHprime:26,ReportId_DHbase:27,ReportId_ClearScreen:32,ReportId_InkingMode:33,ReportId_InkThreshold:34,ReportId_ClearScreenArea:35,ReportId_StartImageDataArea:36,ReportId_StartImageData:37,ReportId_ImageDataBlock:38,ReportId_EndImageData:39,ReportId_HandwritingThicknessColor:40,ReportId_BackgroundColor:41,ReportId_HandwritingDisplayArea:42,ReportId_BacklightBrightness:43,ReportId_ScreenContrast:44,ReportId_HandwritingThicknessColor24:45,ReportId_BackgroundColor24:46,ReportId_BootScreen:47,ReportId_PenDataOption:48,ReportId_PenDataEncryptedOption:49,ReportId_PenDataOptionMode:50,ReportId_PenDataTimeCountSequenceEncrypted:51,ReportId_PenDataTimeCountSequence:52,ReportId_EncryptionCommand:64,ReportId_EncryptionStatus:80,ReportId_GetReport:128,ReportId_SetResult:129,ReportId_PinPadData:144,ReportId_PinPadDataEncrypted:145,ReportId_PinOperationMode:146,ReportId_OperationMode:147,ReportId_RomStartImageData:148,ReportId_RomImageOccupancy:149,ReportId_RomImageHash:150,ReportId_RomImageDelete:151,ReportId_CurrentImageArea:152,ReportId_EventData:153,ReportId_EventDataEncrypted:154,ReportId_RomImageDisplay:155,ReportId_ReportSizeCollection:255,Decrypt:256,SigCaptX_Decrypt:256,SigCaptX_TabletDisconnected:257},a.prototype.DefaultMode={DefaultMode_HID:1,DefaultMode_Serial:2},a.prototype.StatusCode={StatusCode_Ready:0,StatusCode_Image:1,StatusCode_Capture:2,StatusCode_Calculation:3,StatusCode_Image_Boot:4,StatusCode_RomBusy:5,StatusCode_SystemReset:255},a.prototype.ErrorCode={ErrorCode_None:0,ErrorCode_WrongReportId:1,ErrorCode_WrongState:2,ErrorCode_CRC:3,ErrorCode_GraphicsWrongEncodingType:16,ErrorCode_GraphicsImageTooLong:17,ErrorCode_GraphicsZlibError:18,ErrorCode_GraphicsWrongParameters:21,ErrorCode_PadNotExist:32,ErrorCode_RomSizeOverflow:51,ErrorCode_RomInvalidParameter:52,ErrorCode_RomErrorCRC:53},a.prototype.Rectangle={upperLeftXpixel:0,upperLeftYpixel:0,lowerRightXpixel:0,lowerRightYpixel:0},a.prototype.InkThreshold={onPressureMark:0,offPressureMark:0},a.prototype.HandwritingThicknessColor={penColor:0,penThickness:0},a.prototype.HandwritingThicknessColor24={penColor:0,penThickness:0},a.prototype.EncryptionCommandNumber={EncryptionCommandNumber_SetEncryptionType:1,EncryptionCommandNumber_SetParameterBlock:2,EncryptionCommandNumber_GetStatusBlock:3,EncryptionCommandNumber_GetParameterBlock:4,EncryptionCommandNumber_GenerateSymmetricKey:5},a.prototype.EncodingMode={EncodingMode_1bit:0,EncodingMode_1bit_Zlib:1,EncodingMode_16bit:2,EncodingMode_24bit:4,EncodingMode_1bit_Bulk:16,EncodingMode_16bit_Bulk:18,EncodingMode_24bit_Bulk:20},a.prototype.EndImageDataFlag={EndImageDataFlag_Commit:0,EndImageDataFlag_Abandon:1},a.prototype.ResetFlag={ResetFlag_Software:0,ResetFlag_Hardware:1},a.prototype.EncodingFlag={EncodingFlag_Zlib:1,EncodingFlag_1bit:2,EncodingFlag_16bit:4,EncodingFlag_24bit:8},a.prototype.StatusCodeRSA={StatusCodeRSA_Ready:0,StatusCodeRSA_Calculating:250,StatusCodeRSA_Even:251,StatusCodeRSA_Long:252,StatusCodeRSA_Short:253,StatusCodeRSA_Invalid:254,StatusCodeRSA_NotReady:255},a.prototype.ErrorCodeRSA={ErrorCodeRSA_None:0,ErrorCodeRSA_BadParameter:1,ErrorCodeRSA_ParameterTooLong:2,ErrorCodeRSA_PublicKeyNotReady:3,ErrorCodeRSA_PublicExponentNotReady:4,ErrorCodeRSA_SpecifiedKeyInUse:5,ErrorCodeRSA_SpecifiedKeyNotInUse:6,ErrorCodeRSA_BadCommandCode:7,ErrorCodeRSA_CommandPending:8,ErrorCodeRSA_SpecifiedKeyExists:9,ErrorCodeRSA_SpecifiedKeyNotExist:10,ErrorCodeRSA_NotInitialized:11},a.prototype.SymmetricKeyType={SymmetricKeyType_AES128:0,SymmetricKeyType_AES192:1,SymmetricKeyType_AES256:2},a.prototype.AsymmetricKeyType={AsymmetricKeyType_RSA1024:0,AsymmetricKeyType_RSA1536:1,AsymmetricKeyType_RSA2048:2},a.prototype.AsymmetricPaddingType={AsymmetricPaddingType_None:0,AsymmetricPaddingType_PKCS1:1,AsymmetricPaddingType_OAEP:2},a.prototype.AsymmetricPaddingType={EncryptionCommandParameterBlockIndex_RSAe:0,EncryptionCommandParameterBlockIndex_RSAn:1,EncryptionCommandParameterBlockIndex_RSAc:2,EncryptionCommandParameterBlockIndex_RSAm:3},a.prototype.RomImageDeleteMode={RomImageDeleteMode_All:0,RomImageDeleteMode_PinPad_All:1,RomImageDeleteMode_SlideShow_All:2,RomImageDeleteMode_KeyPad_All:3,RomImageDeleteMode_Signature_All:4,RomImageDeleteMode_MessageBox_All:5,RomImageDeleteMode_PinPad_Number:6,RomImageDeleteMode_SlideShow_Number:7,RomImageDeleteMode_KeyPad_Number:8,RomImageDeleteMode_Signature_Number:9,RomImageDeleteMode_MessageBox_Number:10},a.prototype.OperationModeType={OperationModeType_Normal:0,OperationModeType_PinPad:1,OperationModeType_SlideShow:2,OperationModeType_KeyPad:3,OperationModeType_Signature:4,OperationModeType_MessageBox:5},a.prototype.ImageDataBlock_maxLengthHID=253,a.prototype.ImageDataBlock_maxLengthSerial=2557,a.prototype.ImageDataBlock_maxLength540=2557,a.prototype.toJSON=function(){return{id:o,scope:n}},a.prototype.Constructor=function(u){return c=u,s.STU.send({scope:n,function:"Constructor",intf:c.toJSON()}).then(function(f){return o=f.id,f})},a.prototype.getInterface=function(){return c},a.prototype.getInformation=function(){return s.STU.send({scope:n,id:o,function:"getInformation"})},a.prototype.getPenDataOptionMode=function(){return s.STU.send({scope:n,id:o,function:"getPenDataOptionMode"})},a.prototype.setPenDataOptionMode=function(u){return s.STU.send({scope:n,id:o,function:"setPenDataOptionMode",penDataOptionMode:u})},a.prototype.OperationMode_Normal=function(){function u(){this.operationMode=0,this.data=[]}return u}(),a.prototype.OperationMode_PinPad=function(){function u(f,x,S,O,F,J,K){this.operationMode=1,this.data=[],this.data[0]=f,this.data[1]=Number(x),this.data[2]=S,this.data[3]=O,this.data[4]=Number(F),this.data[5]=J,this.data[6]=K}return u}(),a.prototype.OperationMode_SlideShow=function(){function u(f,x,S,O){this.operationMode=2,this.data=[],this.data[0]=f,this.data[1]=x,this.data[2]=(S[0]&15)<<4|S[1]&15,this.data[3]=(S[2]&15)<<4|S[3]&15,this.data[4]=(S[4]&15)<<4|S[5]&15,this.data[5]=(S[6]&15)<<4|S[7]&15,this.data[6]=(S[8]&15)<<4|S[9]&15,this.data[7]=O>>24&255,this.data[8]=O>>16&255,this.data[9]=O>>8&255,this.data[10]=O&255}return u}(),a.prototype.OperationMode_KeyPad=function(){function u(f,x){this.operationMode=3,this.data=[],this.data[0]=f,this.data[1]=x}return u}(),a.prototype.OperationMode_Signature=function(){function u(f,x,S,O){this.operationMode=4,this.data=[],this.data[0]=f,this.data[1]=x[0],this.data[2]=x[1],this.data[3]=x[2],this.data[4]=S}return u}(),a.prototype.setOperationMode=function(u){return s.STU.send({scope:n,id:o,function:"setOperationMode",operationMode:u})},a.prototype.getOperationMode=function(){return s.STU.send({scope:n,id:o,function:"getOperationMode"})},a.prototype.RomStartImageData_PinPad=function(){function u(f,x,S,O,F){this.encodingMode=f,this.operationMode=1,this.imageType=x,this.imageNumber=S,this.data=[O,F,0]}return u}(),a.prototype.RomStartImageData_SlideShow=function(){function u(f,x,S){this.encodingMode=f,this.operationMode=2,this.imageType=x,this.imageNumber=S,this.data=[0,0,0]}return u}(),a.prototype.RomStartImageData_KeyPad=function(){function u(f,x,S,O,F){this.encodingMode=f,this.operationMode=3,this.imageType=x,this.imageNumber=S,this.data=[],this.data[0]=O,this.data[1]=F.length>8&&F[8]?1:0,this.data[2]=(F.length>7&&F[7]?128:0)|(F.length>6&&F[6]?64:0)|(F.length>5&&F[5]?32:0)|(F.length>4&&F[4]?16:0)|(F.length>3&&F[3]?8:0)|(F.length>2&&F[2]?4:0)|(F.length>1&&F[1]?2:0)|(F.length>0&&F[0]?1:0)}return u}(),a.prototype.RomStartImageData_Signature=function(){function u(f,x,S,O){this.encodingMode=f,this.operationMode=4,this.imageType=x,this.imageNumber=S,this.data=[],this.data[0]=(O[2]?4:0)|(O[1]?2:0)|(O[0]?1:0)}return u}(),a.prototype.RomStartImageData_MessageBox=function(){function u(f,x){this.encodingMode=f,this.operationMode=5,this.imageType=!1,this.imageNumber=x,this.data=[0,0,0]}return u}(),a.prototype.setRomStartImageData=function(u){return s.STU.send({scope:n,id:o,function:"setRomStartImageData",romStartImage:u})},a.prototype.setRomImageHash=function(u,f,x){return s.STU.send({scope:n,id:o,function:"setRomImageHash",operationModeType:u,imageType:f,imageNumber:x})},a.prototype.getRomImageHash=function(){return s.STU.send({scope:n,id:o,function:"getRomImageHash"})},a.prototype.setRomImageDelete=function(u,f,x){return s.STU.send({scope:n,id:o,function:"setRomImageDelete",romImageDeleteMode:u,imageType:f,imageNumber:x})},a.prototype.getCurrentImageArea=function(){return s.STU.send({scope:n,id:o,function:"getCurrentImageArea"})},a.prototype.setRomImageDisplay=function(u,f,x){return s.STU.send({scope:n,id:o,function:"setRomImageDisplay",operationModeType:u,imageType:f,imageNumber:x})},a.prototype.getEserial=function(){return s.STU.send({scope:n,id:o,function:"getEserial"})},a.prototype.setClearScreen=function(){return s.STU.send({scope:n,id:o,function:"setClearScreen"})},a.prototype.setInkingMode=function(u){return s.STU.send({scope:n,id:o,function:"setInkingMode",inkingMode:u})},a.prototype.rebind=function(u){var f=u;return s.STU.send({scope:n,id:o,function:"rebind",intf:u.toJSON()}).then(function(x){x===null&&(c=f)})},a.prototype.getStatus=function(){return s.STU.send({scope:n,id:o,function:"getStatus"})},a.prototype.setReset=function(u){return s.STU.send({scope:n,id:o,function:"setReset",flag:u})},a.prototype.getHidInformation=function(){return s.STU.send({scope:n,id:o,function:"getHidInformation"})},a.prototype.getCapability=function(){return s.STU.send({scope:n,id:o,function:"getCapability"})},a.prototype.getUid=function(){return s.STU.send({scope:n,id:o,function:"getUid"})},a.prototype.setUid=function(u){return s.STU.send({scope:n,id:o,function:"setUid",uid:u})},a.prototype.getUid2=function(){return s.STU.send({scope:n,id:o,function:"getUid2"})},a.prototype.setDefaultMode=function(u){return s.STU.send({scope:n,id:o,function:"setDefaultMode",defaultMode:u})},a.prototype.getDefaultMode=function(){return s.STU.send({scope:n,id:o,function:"getDefaultMode"})},a.prototype.getHostPublicKey=function(){return s.STU.send({scope:n,id:o,function:"getHostPublicKey"})},a.prototype.setHostPublicKey=function(u){return s.STU.send({scope:n,id:o,function:"setHostPublicKey",hostPublicKey:u})},a.prototype.getDevicePublicKey=function(){return s.STU.send({scope:n,id:o,function:"getDevicePublicKey"})},a.prototype.setStartCapture=function(u){return s.STU.send({scope:n,id:o,function:"setStartCapture",sessionId:u})},a.prototype.setEndCapture=function(){return s.STU.send({scope:n,id:o,function:"setEndCapture"})},a.prototype.getDHprime=function(){return s.STU.send({scope:n,id:o,function:"getDHprime"})},a.prototype.setDHprime=function(u){return s.STU.send({scope:n,id:o,function:"setDHprime",prime:u})},a.prototype.getDHbase=function(){return s.STU.send({scope:n,id:o,function:"getDHbase"})},a.prototype.setDHbase=function(u){return s.STU.send({scope:n,id:o,function:"setDHbase",base})},a.prototype.setClearScreenArea=function(u){return s.STU.send({scope:n,id:o,function:"setClearScreenArea",area:u})},a.prototype.getInkingMode=function(){return s.STU.send({scope:n,id:o,function:"getInkingMode"})},a.prototype.getInkThreshold=function(){return s.STU.send({scope:n,id:o,function:"getInkThreshold"})},a.prototype.setInkThreshold=function(u){return s.STU.send({scope:n,id:o,function:"setInkThreshold",inkThreshold:u})},a.prototype.setStartImageData=function(u){return s.STU.send({scope:n,id:o,function:"setStartImageData",encodingMode:u})},a.prototype.setStartImageDataArea=function(u,f){return s.STU.send({scope:n,id:o,function:"setStartImageDataArea",encodingMode:u,area:f})},a.prototype.setImageDataBlock=function(u){return s.STU.send({scope:n,id:o,function:"setEndImageData",imageDataBlock:u})},a.prototype.setEndImageData=function(u){return s.STU.send({scope:n,id:o,function:"setEndImageData",endImageDataFlag})},a.prototype.getHandwritingThicknessColor=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingThicknessColor"})},a.prototype.setHandwritingThicknessColor=function(u){return s.STU.send({scope:n,id:o,function:"setHandwritingThicknessColor",handwritingThicknessColor:u})},a.prototype.getHandwritingThicknessColor24=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingThicknessColor24"})},a.prototype.setHandwritingThicknessColor24=function(u){return s.STU.send({scope:n,id:o,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:u})},a.prototype.getBackgroundColor=function(){return s.STU.send({scope:n,id:o,function:"getBackgroundColor"})},a.prototype.setBackgroundColor=function(u){return s.STU.send({scope:n,id:o,function:"setBackgroundColor",backgroundColor:u})},a.prototype.getBackgroundColor24=function(){return s.STU.send({scope:n,id:o,function:"getBackgroundColor24"})},a.prototype.setBackgroundColor24=function(u){return s.STU.send({scope:n,id:o,function:"setBackgroundColor24",backgroundColor24:u})},a.prototype.BootScreenFlag={Disable:0,Enable:1},a.prototype.setBootScreen=function(u){return s.STU.send({scope:n,id:o,function:"setBootScreen",bootScreenFlag:u})},a.prototype.getBootScreen=function(){return s.STU.send({scope:n,id:o,function:"getBootScreen"})},a.prototype.getHandwritingDisplayArea=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingDisplayArea"})},a.prototype.setHandwritingDisplayArea=function(u){return s.STU.send({scope:n,id:o,function:"setHandwritingDisplayArea",handwritingDisplayArea:u})},a.prototype.getBacklightBrightness=function(){return s.STU.send({scope:n,id:o,function:"getBacklightBrightness"})},a.prototype.setBacklightBrightness=function(u){return s.STU.send({scope:n,id:o,function:"setBacklightBrightness",backlightBrightness:u})},a.prototype.getScreenContrast=function(){return s.STU.send({scope:n,id:o,function:"getScreenContrast"})},a.prototype.setScreenContrast=function(u){return s.STU.send({scope:n,id:o,function:"setScreenContrast",screenContrast:u})},a.prototype.getEncryptionStatus=function(){return s.STU.send({scope:n,id:o,function:"getEncryptionStatus"})},a.prototype.EncryptionCommand=function(){var u="WacomGSS.STU.Protocol";function f(S){this.encryptionCommandNumber=S.encryptionCommandNumber,this.parameter=S.parameter,this.lengthOrIndex=S.lengthOrIndex,this.data=S.data}function x(){this.encryptionCommandNumber=0,this.parameter=0,this.lengthOrIndex=0,this.data=[]}return x.prototype.initializeSetEncryptionType=function(S,O,F){return s.STU.send({scope:u,function:"EncryptionCommand_initializeSetEncryptionType",symmetricKeyType:S,asymmetricPaddingType:O,asymmetricKeyType:F}).then(function(J){return f.call(this,J),this})},x.prototype.initializeSetParameterBlock=function(S,O){return s.STU.send({scope:u,function:"EncryptionCommand_initializeSetParameterBlock",index:S,data:O}).then(function(F){return f.call(this,F),this})},x.prototype.initializeGenerateSymmetricKey=function(){return s.STU.send({scope:u,function:"EncryptionCommand_initializeGenerateSymmetricKey"}).then(function(S){return f.call(this,S),this})},x.prototype.initializeGetParameterBlock=function(S,O){return s.STU.send({scope:u,function:"EncryptionCommand_initializeGetParameterBlock"}).then(function(F){return f.call(this,F),this})},x}(),a.prototype.getEncryptionCommand=function(u){return s.STU.send({scope:n,id:o,function:"getEncryptionCommand",encryptionCommandNumber:u})},a.prototype.getReportSizeCollection=function(){return s.STU.send({scope:n,id:o,function:"getReportSizeCollection"})},a.prototype.setReportRate=function(u){return s.STU.send({scope:n,id:o,function:"setReportRate",reportRate:u})},a.prototype.getReportRate=function(){return s.STU.send({scope:n,id:o,function:"getReportRate"})},a.prototype.RenderingMode={RenderingMode_Legacy:0,RenderingMode_WILL:1},a.prototype.setRenderingMode=function(u){return s.STU.send({scope:n,id:o,function:"setRenderingMode",renderingMode:u})},a.prototype.getRenderingMode=function(){return s.STU.send({scope:n,id:o,function:"getRenderingMode"})},a}(),M.prototype.ProtocolHelper={ReportHandler:function(){var n="WacomGSS.STU.ProtocolHelper.ReportHandler",o=null,c=null;function a(){this.onReportPenData=function(u){},this.onReportPenDataOption=function(u){},this.onReportPenDataTimeCountSequence=function(u){},this.onReportPenDataEncrypted=function(u){},this.onReportPenDataEncryptedOption=function(u){},this.onReportPenDataTimeCountSequenceEncrypted=function(u){},this.onReportDevicePublicKey=function(u){},this.onReportEncryptionStatus=function(u){},this.onReportEventDataPinPad=function(u){},this.onReportEventDataKeyPad=function(u){},this.onReportEventDataSignature=function(u){},this.onReportEventDataPinPadEncrypted=function(u){},this.onReportEventDataKeyPadEncrypted=function(u){},this.onReportEventDataSignatureEncrypted=function(u){},this.decrypt=function(u){},this.tabletDisconnected=function(u){},this.stream=function(u){var f=new s.STU.Protocol;switch(u.reportId){case f.ReportId.ReportId_PenData:this.onReportPenData(u);break;case f.ReportId.ReportId_PenDataOption:this.onReportPenDataOption(u);break;case f.ReportId.ReportId_PenDataTimeCountSequence:this.onReportPenDataTimeCountSequence(u);break;case f.ReportId.ReportId_PenDataEncrypted:this.onReportPenDataEncrypted(u);break;case f.ReportId.ReportId_PenDataEncryptedOption:this.onReportPenDataEncryptedOption(u);break;case f.ReportId.ReportId_PenDataTimeCountSequenceEncrypted:this.onReportPenDataTimeCountSequenceEncrypted(u);break;case f.ReportId.ReportId_DevicePublicKey:this.onReportDevicePublicKey(u);break;case f.ReportId.ReportId_EncryptionStatus:this.onReportEncryptionStatus(u);break;case f.ReportId.ReportId_EventData:this.onEventData(f,u);break;case f.ReportId.ReportId_EventDataEncrypted:this.onEventDataEncrypted(f,u);break;case f.ReportId.SigCaptX_Decrypt:this.decrypt(u);break;case f.ReportId.SigCaptX_TabletDisconnected:this.tabletDisconnected(u);break}}}return a.prototype.startReporting=function(u,f){return o=s.STU.setStream(this),s.STU.send({interfaceQueueHolder:u.toJSON(),scope:n,function:"startReporting",streamId:o,tabletDecrypt:f===!0}).then(function(x){return c=x.id,x})},a.prototype.stopReporting=function(){if(o===null)throw"Error: trying to stop reporting before starting";return s.STU.send({id:c,scope:n,function:"stopReporting"}).then(function(u){return s.STU.removeStream(o),u})},a.prototype.onEventData=function(u,f){switch(f.operationModeType){case u.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPad(f);break;case u.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPad(f);break;case u.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignature(f);break}},a.prototype.onEventDataEncrypted=function(u,f){switch(f.operationModeType){case u.OperationModeType.OperationModeType_PinPad:this.onReportEventDataPinPadEncrypted(f);break;case u.OperationModeType.OperationModeType_KeyPad:this.onReportEventDataKeyPadEncrypted(f);break;case u.OperationModeType.OperationModeType_Signature:this.onReportEventDataSignatureEncrypted(f);break}},a}(),InkState_isOff:1,InkState_isOn:2,InkState_isInk:4,InkState_isFirst:8,InkState_isLast:16,InkState:{InkState_Up:1,InkState_Down:2,InkState_Inking:6,InkState_First:14,InkState_Last:17},OpDirection:{OpDirection_Get:256,OpDirection_Set:512},statusCanSend:function(n,o,c){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"statusCanSend",statusCode:n,reportId:o,opDirection:c})},waitForStatusToSend:function(n,o,c,a,u){var f=Q.defer();function x(){n.getStatus().then(function(S){return s.STU.ProtocolHelper.statusCanSend(S.statusCode,o,c)}).then(function(S){if(S===!0){f.resolve();return}if(a<=0){f.reject(new Error("timeout error"));return}a--,setTimeout(x,u)})}return setTimeout(x,0),f.promise},waitForStatus:function(n,o,c,a){var u=Q.defer();function f(){n.getStatus().then(function(x){if(x.statusCode===o){u.resolve();return}if(c<=0){u.reject(new Error("timeout error"));return}c--,setTimeout(f,a)})}return setTimeout(f,0),u.promise},supportsEncryption:function(n){var o=s.STU.ProtocolHelper.OpDirection.OpDirection_Get;return s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_DHprime,o,25,50).then(function(c){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption",protocol:n})})},supportsEncryption_DHprime:function(n){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"supportsEncryption_DHprime",dhPrime:n})},setHostPublicKeyAndPollForDevicePublicKey:function(n,o,c,a){return n.setHostPublicKey(o).then(function(u){var f=s.STU.ProtocolHelper.OpDirection.OpDirection_Get;return s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_DevicePublicKey,f,c,a)}).then(function(u){return n.getDevicePublicKey()}).then(function(u){if(u.length!==o.length)throw new Error("Unexpected key size");return u})},writeImage:function(n,o,c,a,u){a=typeof a=="undefined"?25:a,u=typeof u=="undefined"?25:u;var f=s.STU.ProtocolHelper.OpDirection.OpDirection_Set;return s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_StartImageData,f,a,u).then(function(x){return n.setStartImageData(o)}).then(function(x){var S=n.ImageDataBlock_maxLengthHID;return s.STU.ProtocolHelper.writeImageCommon(n,o,S,c,a,u)})},writeImageCommon:function(n,o,c,a,u,f){if(c>n.ImageDataBlock_maxLengthSerial)throw new Error("Invalid maxImageBlockSize");var x=s.STU.ProtocolHelper.OpDirection.OpDirection_Set;return s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_ImageDataBlock,x,u,f).then(function(S){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeImageCommon",protocol:n.toJSON(),intf:n.getInterface().toJSON(),encodingMode:o,imageData:a,maxImageBlockSize:c})})},flattenMonochrome:function(n,o,c,a){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenMonochrome",b64Data:n,screenWidth:o,screenHeight:c,dataStore:a===!0}).then(function(u){if(typeof u=="string")return u;var f=new s.STU.DataStore;return f.setId(u.id),f})},flatten:function(n,o,c,a,u){var f=new s.STU.Protocol;switch(n){case f.EncodingMode.EncodingMode_24bit:case f.EncodingMode.EncodingMode_24bit_Bulk:return s.STU.ProtocolHelper.flattenColor24(o,c,a,u);case f.EncodingMode.EncodingMode_16bit:case f.EncodingMode.EncodingMode_16bit_Bulk:return s.STU.ProtocolHelper.flattenColor16(o,c,a,u);case f.EncodingMode.EncodingMode_1bit:case f.EncodingMode.EncodingMode_1bit_Bulk:return s.STU.ProtocolHelper.flattenMonochrome(o,c,a,u)}},resizeAndFlatten:function(n,o,c,a,u,f,x,S,O,F,J,K){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"resizeAndFlatten",b64Data:n,offsetX:o,offsetY:c,bitmapWidth:a,bitmapHeight:u,screenWidth:f,screenHeight:x,encodingMode:S,scale:O,backgroundColor:F,clip:J,dataStore:K===!0}).then(function(oe){if(typeof oe=="string")return oe;var R=new s.STU.DataStore;return R.setId(oe.id),R})},encodingFlagSupportsColor:function(n){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"encodingFlagSupportsColor",screenWidth:n})},flattenColor16:function(n,o,c,a){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor16",b64Data:n,screenWidth:o,screenHeight:c,dataStore:a===!0}).then(function(u){if(typeof u=="string")return u;var f=new s.STU.DataStore;return f.setId(u.id),f})},flattenColor24:function(n,o,c,a){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"flattenColor24",b64Data:n,screenWidth:o,screenHeight:c,dataStore:a===!0}).then(function(u){if(typeof u=="string")return u;var f=new s.STU.DataStore;return f.setId(u.id),f})},generateSymmetricKeyAndWaitForEncryptionStatus:function(n,o,c,a){var u=s.STU.ProtocolHelper.OpDirection.OpDirection_Set,f=Q.defer(),x=w();return m[x]=f,s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_EncryptionCommand,u,o,c).then(function(S){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"generateSymmetricKeyAndWaitForEncryptionStatus",protocol:n.toJSON(),intf:n.getInterface().toJSON(),timeout:a,sleepBetweenRetries:c,ticket2:x}).then(function(O){return f.promise})})},simulateEncodingFlag:function(n,o){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"simulateEncodingFlag",idProduct:n,encodingFlag:typeof obj=="undefined"?0:o})},writeImageArea:function(n,o,c,a,u,f){u=typeof u=="undefined"?25:u,f=typeof f=="undefined"?25:f;var x=s.STU.ProtocolHelper.OpDirection.OpDirection_Set;return s.STU.ProtocolHelper.waitForStatusToSend(n,s.STU.Protocol.ReportId.ReportId_StartImageDataArea,x,u,f).then(function(S){return n.setStartImageDataArea(o,c)}).then(function(S){var O=n.ImageDataBlock_maxLengthHID;return s.STU.ProtocolHelper.writeImageCommon(n,o,O,a,u,f)})},writeRomImage:function(n,o,c,a,u,f){return s.STU.send({scope:"WacomGSS.STU.ProtocolHelper",function:"writeRomImage",protocol:n,romStartImageData:o,maxImageBlockSize:c,imageData:a,retries:u,sleepBetweenRetries:f})}},M.prototype.Tablet=function(){var n="WacomGSS.STU.Tablet",o=null;function c(){}return c.prototype.toJSON=function(){return{id:o,scope:n}},c.prototype.Constructor=function(a,u,f){return s.STU.send({scope:n,function:"Constructor",hasIntf:typeof a!="undefined",intf:typeof a=="undefined"?null:a.toJSON(),encryptionHandler:typeof u=="undefined"||u===null?null:u.toJSON(),encryptionHandler2:typeof f=="undefined"||f===null?null:f.toJSON()}).then(function(x){return o=x.id,x})},c.prototype.attach=function(a){return s.STU.send({scope:n,id:o,function:"attach",intf:typeof a=="undefined"?null:a.toJSON()})},c.prototype.detach=function(a){return s.STU.send({scope:n,id:o,function:"detach"}).then(function(u){var f;return T(u.scope)&&T(u.id)&&(u.scope==="WacomGSS.STU.UsbInterface"?(f=new M.UsbInterface,f.id=u.id):u.scope==="WacomGSS.STU.SerialInterface"&&(f=new M.SerialInterface,f.id=u.id)),f})},c.prototype.getInformation=function(){return s.STU.send({scope:n,id:o,function:"getInformation"})},c.prototype.setClearScreen=function(){return s.STU.send({scope:n,id:o,function:"setClearScreen"})},c.prototype.isSupported=function(a){return s.STU.send({scope:n,id:o,function:"isSupported",reportId:a})},c.prototype.getProductId=function(a){return s.STU.send({scope:n,id:o,function:"getProductId"})},c.prototype.setPenDataOptionMode=function(a){return s.STU.send({scope:n,id:o,function:"setPenDataOptionMode",penDataOptionMode:a})},c.prototype.getDHprime=function(){return s.STU.send({scope:n,id:o,function:"getDHprime"})},c.prototype.startCapture=function(a){return s.STU.send({scope:n,id:o,function:"startCapture",sessionId:a})},c.prototype.setInkingMode=function(a){return s.STU.send({scope:n,id:o,function:"setInkingMode",inkingMode:a})},c.prototype.queueSetPredicateAll=function(a){return s.STU.send({scope:n,id:o,function:"queueSetPredicateAll",predicate:a})},c.prototype.endCapture=function(){return s.STU.send({scope:n,id:o,function:"endCapture"})},c.prototype.disconnect=function(){return s.STU.send({scope:n,id:o,function:"disconnect"})},c.prototype.empty=function(){return s.STU.send({scope:n,id:o,function:"empty"})},c.prototype.isConnected=function(){return s.STU.send({scope:n,id:o,function:"isConnected"})},c.prototype.supportsWrite=function(){return s.STU.send({scope:n,id:o,function:"supportsWrite"})},c.prototype.getReportCountLengths=function(){return s.STU.send({scope:n,id:o,function:"getReportCountLengths"})},c.prototype.getStatus=function(){return s.STU.send({scope:n,id:o,function:"getStatus"})},c.prototype.reset=function(){return s.STU.send({scope:n,id:o,function:"reset"})},c.prototype.getHidInformation=function(){return s.STU.send({scope:n,id:o,function:"getHidInformation"})},c.prototype.getCapability=function(){return s.STU.send({scope:n,id:o,function:"getCapability"})},c.prototype.getUid=function(){return s.STU.send({scope:n,id:o,function:"getUid"})},c.prototype.setUid=function(a){return s.STU.send({scope:n,id:o,function:"setUid",uid:a})},c.prototype.getUid2=function(){return s.STU.send({scope:n,id:o,function:"getUid2"})},c.prototype.setDefaultMode=function(a){return s.STU.send({scope:n,id:o,function:"setDefaultMode",defaultMode:a})},c.prototype.getDefaultMode=function(){return s.STU.send({scope:n,id:o,function:"getDefaultMode"})},c.prototype.getHostPublicKey=function(){return s.STU.send({scope:n,id:o,function:"getHostPublicKey"})},c.prototype.getDevicePublicKey=function(){return s.STU.send({scope:n,id:o,function:"getDevicePublicKey"})},c.prototype.setDHprime=function(a){return s.STU.send({scope:n,id:o,function:"setDHprime",prime:a})},c.prototype.getDHbase=function(){return s.STU.send({scope:n,id:o,function:"getDHbase"})},c.prototype.setDHbase=function(a){return s.STU.send({scope:n,id:o,function:"setDHbase",base})},c.prototype.setClearScreenArea=function(a){return s.STU.send({scope:n,id:o,function:"setClearScreenArea",area:a})},c.prototype.getInkingMode=function(){return s.STU.send({scope:n,id:o,function:"getInkingMode"})},c.prototype.getInkThreshold=function(){return s.STU.send({scope:n,id:o,function:"getInkThreshold"})},c.prototype.setInkThreshold=function(a){return s.STU.send({scope:n,id:o,function:"setInkThreshold",inkThreshold:a})},c.prototype.writeImage=function(a,u){var f=null;return typeof u=="string"?f=u:f=u.toJSON(),s.STU.send({scope:n,id:o,function:"writeImage",encodingMode:a,b64Data:f})},c.prototype.writeImageArea=function(a,u,f){var x=null;return typeof f=="string"?x=f:x=f.toJSON(),s.STU.send({scope:n,id:o,function:"writeImageArea",encodingMode:a,area:u,b64Data:x})},c.prototype.endImageData=function(a){return s.STU.send({scope:n,id:o,function:"endImageData"})},c.prototype.getHandwritingThicknessColor=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingThicknessColor"})},c.prototype.setHandwritingThicknessColor=function(a){return s.STU.send({scope:n,id:o,function:"setHandwritingThicknessColor",handwritingThicknessColor:a})},c.prototype.getHandwritingThicknessColor24=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingThicknessColor24"})},c.prototype.setHandwritingThicknessColor24=function(a){return s.STU.send({scope:n,id:o,function:"setHandwritingThicknessColor24",handwritingThicknessColor24:a})},c.prototype.getBackgroundColor=function(){return s.STU.send({scope:n,id:o,function:"getBackgroundColor"})},c.prototype.setBackgroundColor=function(a){return s.STU.send({scope:n,id:o,function:"setBackgroundColor",backgroundColor:a})},c.prototype.getBackgroundColor24=function(){return s.STU.send({scope:n,id:o,function:"getBackgroundColor24"})},c.prototype.setBackgroundColor24=function(a){return s.STU.send({scope:n,id:o,function:"setBackgroundColor24",backgroundColor24:a})},c.prototype.getHandwritingDisplayArea=function(){return s.STU.send({scope:n,id:o,function:"getHandwritingDisplayArea"})},c.prototype.setHandwritingDisplayArea=function(a){return s.STU.send({scope:n,id:o,function:"setHandwritingDisplayArea",handwritingDisplayArea:a})},c.prototype.getBacklightBrightness=function(){return s.STU.send({scope:n,id:o,function:"getBacklightBrightness"})},c.prototype.setBacklightBrightness=function(a){return s.STU.send({scope:n,id:o,function:"setBacklightBrightness",backlightBrightness:a})},c.prototype.getScreenContrast=function(){return s.STU.send({scope:n,id:o,function:"getScreenContrast"})},c.prototype.setScreenContrast=function(a){return s.STU.send({scope:n,id:o,function:"setScreenContrast",screenContrast:a})},c.prototype.getPenDataOptionMode=function(){return s.STU.send({scope:n,id:o,function:"getPenDataOptionMode"})},c.prototype.getEncryptionStatus=function(){return s.STU.send({scope:n,id:o,function:"getEncryptionStatus"})},c.prototype.getEncryptionCommand=function(a){return s.STU.send({scope:n,id:o,function:"getEncryptionCommand",encryptionCommandNumber:a})},c.prototype.decrypt=function(a){return s.STU.send({scope:n,id:o,decrypt:"decrypt",data:a})},c.prototype.setReportRate=function(a){return s.STU.send({scope:n,id:o,function:"setReportRate",reportRate:a})},c.prototype.getReportRate=function(){return s.STU.send({scope:n,id:o,function:"getReportRate"})},c.prototype.setRenderingMode=function(a){return s.STU.send({scope:n,id:o,function:"setRenderingMode",renderingMode:a})},c.prototype.getRenderingMode=function(){return s.STU.send({scope:n,id:o,function:"getRenderingMode"})},c.prototype.setOperationMode=function(a){return s.STU.send({scope:n,id:o,function:"setOperationMode",operationMode:a})},c.prototype.getOperationMode=function(){return s.STU.send({scope:n,id:o,function:"getOperationMode"})},c.prototype.writeRomImage=function(a,u){return s.STU.send({scope:n,id:o,function:"writeRomImage",romStartImageData:a,imageData:u})},c.prototype.setRomImageHash=function(a,u,f){return s.STU.send({scope:n,id:o,function:"setRomImageHash",operationModeType:a,imageType:u,imageNumber:f})},c.prototype.getRomImageHash=function(){return s.STU.send({scope:n,id:o,function:"getRomImageHash"})},c.prototype.setRomImageDelete=function(a,u,f){return s.STU.send({scope:n,id:o,function:"setRomImageDelete",romImageDeleteMode:a,imageType:u,imageNumber:f})},c.prototype.getCurrentImageArea=function(){return s.STU.send({scope:n,id:o,function:"getCurrentImageArea"})},c.prototype.setRomImageDisplay=function(a,u,f){return s.STU.send({scope:n,id:o,function:"setRomImageDisplay",operationModeType:a,imageType:u,imageNumber:f})},c.prototype.getEserial=function(){return s.STU.send({scope:n,id:o,function:"getEserial"})},c}(),M.prototype.SerialInterface=function(){var n="WacomGSS.STU.SerialInterface",o="";function c(){}return c.prototype.Constructor=function(){return s.STU.send({scope:n,function:"Constructor"}).then(function(a){return o=a.id,a})},c.prototype.BaudRate_STU500=115200,c.prototype.BaudRate_STU430_530_prerelease=460800,c.prototype.BaudRate_STU430_530=3e6,c.prototype.connect=function(a,u,f){return s.STU.send({scope:n,id:o,function:"connect",fileName:a,baudRate:u,useCrc:f})},c.prototype.toJSON=function(){return{id:o,scope:n}},c.prototype.disconnect=function(){return s.STU.send({scope:n,id:o,function:"disconnect"})},c.prototype.isConnected=function(){return s.STU.send({scope:n,id:o,function:"isConnected"})},c.prototype.queueNotifyAll=function(){return s.STU.send({scope:n,id:o,function:"queueNotifyAll"})},c.prototype.queueSetPredicateAll=function(a){return s.STU.send({scope:n,id:o,function:"queueSetPredicateAll",predicate:a})},c.prototype.get=function(a){return s.STU.send({scope:n,id:o,function:"get_",length:a})},c.prototype.set=function(a){return s.STU.send({scope:n,id:o,function:"set",base64Data:a})},c.prototype.supportsWrite=function(){return s.STU.send({scope:n,id:o,function:"supportsWrite"})},c.prototype.write=function(a){return s.STU.send({scope:n,id:o,function:"write",base64Data:a})},c.prototype.getReportCountLengths=function(){return s.STU.send({scope:n,id:o,function:"getReportCountLengths"})},c.prototype.getProductId=function(){return s.STU.send({scope:n,id:o,function:"getProductId"})},c}(),M.prototype.TlsInterface=function(){var n="WacomGSS.STU.TlsInterface",o="";function c(){}return c.prototype.Constructor=function(){return s.STU.send({scope:n,function:"Constructor"}).then(function(a){return o=a.id,a})},c.prototype.ConnectOption={ConnectOption_OOB:1,ConnectOption_SSL:2},c.prototype.connect=function(a,u){return s.STU.send({scope:n,id:o,function:"connect",fileName:a,connectOption:u})},c.prototype.toJSON=function(){return{id:o,scope:n}},c.prototype.disconnect=function(){return s.STU.send({scope:n,id:o,function:"disconnect"})},c.prototype.isConnected=function(){return s.STU.send({scope:n,id:o,function:"isConnected"})},c.prototype.get=function(a){return s.STU.send({scope:n,id:o,function:"get_",length:a})},c.prototype.set=function(a){return s.STU.send({scope:n,id:o,function:"set",base64Data:a})},c.prototype.supportsWrite=function(){return s.STU.send({scope:n,id:o,function:"supportsWrite"})},c.prototype.write=function(a){return s.STU.send({scope:n,id:o,function:"write",base64Data:a})},c.prototype.getReportCountLengths=function(){return s.STU.send({scope:n,id:o,function:"getReportCountLengths"})},c.prototype.getProductId=function(){return s.STU.send({scope:n,id:o,function:"getProductId"})},c}(),M.prototype.DataStore=function(){var n="WacomGSS.STU.DataStore",o=null;function c(){}return c.prototype.setId=function(a){o=a},c.prototype.toJSON=function(){return{id:o,scope:n}},c.prototype.Constructor=function(a){return s.STU.send({scope:n,function:"Constructor",b64Data:a})},c.prototype.getData=function(){return s.STU.send({scope:n,id:o,function:"getData"})},c.prototype.getRemove=function(){return s.STU.send({scope:n,id:o,function:"getRemove"}).then(function(a){return o=null,a})},c.prototype.remove=function(){return s.STU.send({scope:n,id:o,function:"remove"}).then(function(a){return o=null,a})},c.prototype.setData=function(a){return s.STU.send({scope:n,id:o,function:"setData",b64Data:a})},c}(),M.prototype.SerialProtocol={getHeaderLength:function(){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"getHeaderLength"})},isStartReport:function(n){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"isStartReport",byte:n})},decodeHasCrc:function(n){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeHasCrc",header1:n})},decodeEncodedDataLength:function(n,o){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeEncodedDataLength",header1:n,header2:o})},calcEncodedDataLength:function(n,o){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"calcEncodedDataLength",useCrc:n,length:o})},encodeHeader:function(n,o,c){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeHeader",encodedData:n,useCrc:o,encodedDataLength:c})},encodeReport:function(n,o){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"encodeReport",report:n,useCrc:o})},decodeData:function(n){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"decodeData",data:n})},checkCrcAndRemove:function(n){return s.STU.send({scope:"WacomGSS.STU.SerialProtocol",function:"checkCrcAndRemove",container:n})}},M.prototype.EncryptionHandler=function(){var n="WacomGSS.STU.EncryptionHandler",o=null,c=null,a=null,u=new Object;function f(x){a=x,this.stream=function(S){try{u[S.function](S)}catch(O){throw new Error("EncryptionHandler."+S.function+" : "+O+`
message was:
`+JSON.stringify(S))}}}return f.prototype.Constructor=function(){return o=s.STU.setStream(this),s.STU.send({scope:n,function:"Constructor",streamId:o}).then(function(x){return c=x.id,x})},f.prototype.toJSON=function(){return{id:c,scope:n}},u.reset=function(x){a.reset(),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.clearKeys=function(x){a.clearKeys(),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.requireDH=function(x){var S=a.requireDH();s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},u.setDH=function(x){a.setDH(x.data.dhPrime,x.data.dhBase),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.generateHostPublicKey=function(x){var S=a.generateHostPublicKey();s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},u.computeSharedKey=function(x){a.computeSharedKey(x.data),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.decrypt=function(x){var S=a.decrypt(x.data);s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},f}(),M.prototype.EncryptionHandler2=function(){var n="WacomGSS.STU.EncryptionHandler2",o=null,c=null,a=null,u=new Object;function f(x){a=x,this.stream=function(S){try{u[S.function](S)}catch(O){throw new Error("EncryptionHandler2."+S.function+" : "+O+`
message was:
`+JSON.stringify(S))}}}return f.prototype.Constructor=function(){return o=s.STU.setStream(this),s.STU.send({scope:n,function:"Constructor",streamId:o}).then(function(x){return c=x.id,x})},f.prototype.toJSON=function(){return{id:c,scope:n}},u.reset=function(x){a.reset(),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.clearKeys=function(x){a.clearKeys(),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.getParameters=function(x){var S=a.getParameters(x.data.symmetricKeyType,x.data.asymmetricPaddingType,x.data.asymmetricKeyType),O=S[0],F=S[1],J=S[2];s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:{symmetricKeyType:O,asymmetricPaddingType:F,asymmetricKeyType:J}})},u.getPublicExponent=function(x){var S=a.getPublicExponent();s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},u.generatePublicKey=function(x){var S=a.generatePublicKey();s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},u.computeSessionKey=function(x){a.computeSessionKey(x.data),s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:null})},u.decrypt=function(x){var S=a.decrypt(x.data);s.STU.sendNoReturn({scope:n,function:"set_value",promiseId:x.promiseId,data:S})},f}(),M}();s.STU=new s.STUConstructor;const Bn={id:"IdCardBack",style:{width:"640px",height:"1014px","font-size":"7pt",position:"relative","background-image":"url('/images/REG_ID_Back_Temp.jpg')","background-position":"center","background-size":"contain","font-family":"sans-serif",transform:"scale(0.5)",top:"-200px",left:"185px"}},An={class:"detail",style:{position:"absolute",top:"170px",left:"35px",overflow:"hidden",width:"559px",height:"57px","font-size":"22pt","line-height":"23pt"}},$n={class:"detail",style:{position:"absolute",top:"283px",left:"42px","font-size":"22pt"}},Hn={class:"detail",style:{position:"absolute",top:"363px",left:"42px","font-size":"22pt"}},Ln={class:"detail",style:{position:"absolute",top:"442px",left:"42px","font-size":"22pt"}},Vn={class:"detail",style:{position:"absolute",top:"521px",left:"42px","font-size":"22pt"}},zn={style:{width:"100%","text-align":"left",position:"absolute",bottom:"376px",left:"53px","font-size":"22pt"}},jn={style:{width:"100%","text-align":"left",position:"absolute",bottom:"344px",left:"53px","font-size":"22pt"}},qn={class:"detail",style:{position:"absolute",top:"671px",left:"204px","font-size":"19pt"}},Wn={class:"detail",style:{position:"absolute",top:"705px",left:"204px","font-size":"19pt"}},Kn=D("img",{id:"signatureImage",class:"signatureImage",src:Nt,style:{height:"227px",width:"359px",position:"absolute",bottom:"-584px",left:"151px"}},null,-1),Gn=[Kn],Jn=D("div",{id:"sigPreviewContainer",style:{position:"relative"}},null,-1),gt=Object.assign({name:"IdCardBack"},{__name:"IdCardBack",props:{details:{type:Object,required:!0}},emits:["onPenDataSave"],setup(e,{emit:t}){const i=e,r=t;function m(){r("onPenDataSave",K)}var h=He(!1),T="Cancel",w="Clear",N="OK",M=20,j=1e3,L=500,n,o,c,a,u,f,x=-1,S,O,F,J,K,oe,R=0,l;Pe(()=>i.details,(v,b)=>{v.sig_src&&(K=v.sig_src,S={encodingFlag:3,maxReportRate:200,resolution:64e3,screenHeight:227,screenWidth:359,tabletMaxPressure:1023,tabletMaxX:9600,tabletMaxY:6e3},J={offPressureMark:16,onPressureMark:21},Ae())},{deep:!0});function U(){R=R+1,s.STU.isServiceReady()?(R=0,console.log("SigCaptX Web Service: ready")):(console.log("SigCaptX Web Service: not connected"),R<M?setTimeout(U,j):alert("Unable to establish connection to SigCaptX"))}setTimeout(U,L);function P(){console.log("DCA disconnected"),setTimeout(Ce,0)}function $(v,b,C,B){this.x=v,this.y=b,this.width=C,this.height=B,this.Contains=function(y){return y.x>=this.x&&y.x<=this.x+this.width&&y.y>=this.y&&y.y<=this.y+this.height}}function I(){this.Bounds,this.Text,this.Click}function Y(v,b){this.x=v,this.y=b}function G(v,b){c=document.createElement("div"),c.id="signatureWindow",c.className="active",c.style.position="relative",c.style.top=0+"px",c.style.left=0+"px",c.style.width=v+"px",c.style.height=b+"px",document.getElementById("sigPreviewContainer").appendChild(c),n=document.createElement("canvas"),n.id="myCanvas",n.height=c.offsetHeight,n.width=c.offsetWidth,n.style.zIndex=999,c.appendChild(n),o=n.getContext("2d"),console.log("canvas.addEventListener:",n.addEventListener),n.addEventListener?(n.addEventListener("click",Me,!1),console.log("onCanvasClick 0")):n.attachEvent?(n.attachEvent("onClick",Me),console.log("onCanvasClick 1")):(n.onClick=Me,console.log("onCanvasClick 2"))}function q(){var v=Q.defer();if(l!=null){var b=new s.STU.Protocol;l.setInkingMode(b.InkingMode.InkingMode_Off).then(function(C){return console.log("received: "+JSON.stringify(C)),l.endCapture()}).then(function(C){return console.log("received: "+JSON.stringify(C)),F!==null?F.remove():C}).then(function(C){return console.log("received: "+JSON.stringify(C)),F=null,l.setClearScreen()}).then(function(C){return console.log("received: "+JSON.stringify(C)),l.disconnect()}).then(function(C){console.log("received: "+JSON.stringify(C)),l=null,Ee(n,o)}).then(function(C){v.resolve()}).fail(function(C){console.log("disconnect error: "+C),v.resolve()})}else v.resolve();return v.promise}window.addEventListener("beforeunload",function(v){var b="";return s.STU.close(),(v||window.event).returnValue=b,b});function me(){}me.prototype=new Error;function ve(){h.value=!0,Z()}function Z(){var v=new s.STU.Protocol,b,C,B;s.STU.isDCAReady().then(function(y){if(!y)throw new me;return s.STU.onDCAtimeout=P,s.STU.getUsbDevices()}).then(function(y){if(y==null||y.length==0)throw new Error("No STU devices found");return console.log("received: "+JSON.stringify(y)),oe=y,s.STU.isSupportedUsbDevice(oe[0].idVendor,oe[0].idProduct)}).then(function(y){return console.log("received: "+JSON.stringify(y)),b=new s.STU.UsbInterface,b.Constructor()}).then(function(y){return console.log("received: "+JSON.stringify(y)),b.connect(oe[0],!0)}).then(function(y){return console.log("received: "+JSON.stringify(y)),l=new s.STU.Tablet,l.Constructor(b,C,B)}).then(function(y){return console.log("received: "+JSON.stringify(y)),b=null,l.getInkThreshold()}).then(function(y){return console.log("m_inkThreshold received: "+JSON.stringify(y)),J=y,l.getCapability()}).then(function(y){return console.log("m_capability received: "+JSON.stringify(y)),S=y,G(S.screenWidth,S.screenHeight),l.getInformation()}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.getInkThreshold()}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.getProductId()}).then(function(y){return console.log("received: "+JSON.stringify(y)),s.STU.ProtocolHelper.simulateEncodingFlag(y,S.encodingFlag)}).then(function(y){console.log("received: "+JSON.stringify(y));var A=y;if((A&v.EncodingFlag.EncodingFlag_24bit)!=0)return l.supportsWrite().then(function(X){O=X?v.EncodingMode.EncodingMode_24bit_Bulk:v.EncodingMode.EncodingMode_24bit});if((A&v.EncodingFlag.EncodingFlag_16bit)!=0)return l.supportsWrite().then(function(X){O=X?v.EncodingMode.EncodingMode_16bit_Bulk:v.EncodingMode.EncodingMode_16bit});O=v.EncodingMode.EncodingMode_1bit}).then(function(y){return l.setClearScreen()}).then(function(y){return console.log("received from setClearScreen: "+JSON.stringify(y)),y}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.isSupported(v.ReportId.ReportId_PenDataOptionMode)}).then(function(y){return console.log("received: "+JSON.stringify(y)),y?l.getProductId().then(function(A){var X=v.PenDataOptionMode.PenDataOptionMode_None;switch(A){case s.STU.ProductId.ProductId_520A:X=v.PenDataOptionMode.PenDataOptionMode_TimeCount;break;case s.STU.ProductId.ProductId_430:case s.STU.ProductId.ProductId_530:case s.STU.ProductId.ProductId_540:X=v.PenDataOptionMode.PenDataOptionMode_TimeCountSequence;break;default:console.log("Unknown tablet supporting PenDataOptionMode, setting to None.")}return l.setPenDataOptionMode(X)}):(O=v.EncodingMode.EncodingMode_1bit,O)}).then(function(y){console.log("received: "+JSON.stringify(y)),re();var A=n.toDataURL("image/png");return s.STU.ProtocolHelper.resizeAndFlatten(A,0,0,0,0,S.screenWidth,S.screenHeight,O,1,!1,0,!0)}).then(function(y){return F=y,console.log("received: "+JSON.stringify(y)),l.writeImage(O,y)}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.setInkingMode(v.InkingMode.InkingMode_On)}).then(function(y){console.log("received: "+JSON.stringify(y));var A=new s.STU.ProtocolHelper.ReportHandler;u={x:0,y:0},a=!1,o.lineWidth=1;var X=function(ie){De(ie,n),Re(ie,n,o),K.push(ie)},he=function(ie){De(ie.penData[0],n),Re(ie.penData[0],n,o),De(ie.penData[1],n),Re(ie.penData[1],n,o),K.push(ie.penData[0],ie.penData[1])},Te=function(ie){},we=function(ie){};return K=new Array,A.onReportPenData=X,A.onReportPenDataOption=X,A.onReportPenDataTimeCountSequence=X,A.onReportPenDataEncrypted=he,A.onReportPenDataEncryptedOption=he,A.onReportPenDataTimeCountSequenceEncrypted=X,A.onReportDevicePublicKey=Te,A.onReportEncryptionStatus=Te,A.decrypt=we,A.startReporting(l,!0)}).fail(function(y){console.log(y),y instanceof me?(s.STU.Reinitialize(),setTimeout(Z,j)):(alert(`promptSigDialog failed:
`+y),setTimeout(Ce(),0))})}function re(){if(f=new Array(3),f[0]=new I,f[1]=new I,f[2]=new I,oe[0].idProduct!=s.STU.ProductId.ProductId_300){var v=S.screenWidth/3,b=S.screenWidth/3,C=S.screenWidth-v-b,B=S.screenHeight*6/7,y=S.screenHeight-B;f[0].Bounds=new $(0,B,C,y),f[1].Bounds=new $(C,B,v,y),f[2].Bounds=new $(C+v,B,b,y)}else{var A=S.screenWidth*3/4,X=S.screenWidth-A,he=S.screenHeight/3,Te=S.screenHeight/3,we=S.screenHeight-he-Te;f[0].Bounds=new $(A,0,X,we),f[1].Bounds=new $(A,we,X,he),f[2].Bounds=new $(A,we+he,X,Te)}f[0].Text=N,f[1].Text=w,f[2].Text=T,f[0].Click=fe,f[1].Click=ae,f[2].Click=de,Ee(n,o),k()}function k(){o.save(),o.setTransform(1,0,0,1,0,0),o.beginPath(),o.lineWidth=1,o.strokeStyle="black",o.font="30px Arial";for(var v=0;v<f.length;++v){o.fillStyle="lightgrey",o.fillRect(f[v].Bounds.x,f[v].Bounds.y,f[v].Bounds.width,f[v].Bounds.height),o.fillStyle="black",o.rect(f[v].Bounds.x,f[v].Bounds.y,f[v].Bounds.width,f[v].Bounds.height);var b=f[v].Bounds.x+(f[v].Bounds.width/2-o.measureText(f[v].Text).width/2),C;oe[0].idProduct==s.STU.ProductId.ProductId_300?C=28:oe[0].idProduct==s.STU.ProductId.ProductId_430?C=26:C=40,o.fillText(f[v].Text,b,f[v].Bounds.y+C)}o.stroke(),o.closePath(),o.restore()}function te(){Ee(n,o),k(),K=new Array,l.writeImage(O,F)}function fe(){console.log("btnOk_Click: ",this),Ae(),setTimeout(Ce,0)}function de(){setTimeout(Ce,0)}function ae(){console.log("clear!"),te()}function Ie(v,b){return Math.pow(v.x-b.x,2)+Math.pow(v.y-b.y,2)}function Ee(v,b){b.save(),b.setTransform(1,0,0,1,0,0),b.fillStyle="white",b.fillRect(0,0,v.width,v.height),b.restore()}function Se(v,b){b.save(),b.setTransform(1,0,0,1,0,0),b.fillStyle="#ffffff00",b.fillRect(0,0,v.width,v.height),b.restore()}function De(v,b){var C={};C.x=Math.round(b.width*v.x/S.tabletMaxX),C.y=Math.round(b.height*v.y/S.tabletMaxY);for(var B=a?!(v.pressure<=J.offPressureMark):v.pressure>J.onPressureMark,y=-1,A=0;A<f.length;++A)if(f[A].Bounds.Contains(C)){y=A;break}return a&&!B?(y!=-1&&x===y&&f[y].Click(),x=-1):y!=-1&&!a&&B&&(x=y),y==-1}function Re(v,b,C){var B={};B.x=Math.round(b.width*v.x/S.tabletMaxX),B.y=Math.round(b.height*v.y/S.tabletMaxY);var y=a?!(v.pressure<=J.offPressureMark):v.pressure>J.onPressureMark;!a&&y&&(u=B),(y&&10<Ie(u,B)||a&&!y)&&(C.beginPath(),C.moveTo(u.x,u.y),C.lineTo(B.x,B.y),C.stroke(),C.closePath(),u=B),a=y}function Ae(){var v=document.getElementById("signatureImage"),b=document.createElement("canvas");b.id="signatureCanvas",b.height=v.height,b.width=v.width;var C=b.getContext("2d");Se(b,C),C.lineWidth="2.5",C.strokeStyle="black",u={x:0,y:0},a=!1;for(var B=0;B<K.length;B++)Re(K[B],b,C);m(),v.src=b.toDataURL("image/png")}function Ce(){h.value=!1,s.STU.onDCAtimeout=null,q(),document.getElementById("sigPreviewContainer").removeChild(c)}function Me(v){for(var b=v.pageX-c.offsetLeft,C=v.pageY-c.offsetTop,B=0;B<f.length;B++)if(f[B].Bounds.Contains(new Y(b,C))){f[B].Click();break}}return(v,b)=>(Ue(),Ne(et,null,[D("div",Bn,[D("div",An,z(e.details.address_res_barangay?e.details.address_res_barangay+", ":"")+" "+z(e.details.address_res_city)+", "+z(e.details.address_res_zip_code)+", "+z(e.details.address_res_province),1),D("div",$n,z(e.details.gender),1),D("div",Hn,z(e.details.date_of_birth),1),D("div",Ln,z(e.details.blood_type),1),D("div",Vn,z(e.details.contact_number),1),D("div",zn,z(e.details.emergency_name),1),D("div",jn,z(e.details.emergency_number),1),D("div",qn,z(e.details.date_issued_formatted),1),D("div",Wn,z(e.details.date_expire_formatted),1),D("div",{style:{width:"100%",position:"absolute",top:"354px","text-align":"center"},id:"signatureDiv",onClick:b[0]||(b[0]=C=>ve())},Gn)]),E(Ge,{modelValue:Et(h),"onUpdate:modelValue":b[2]||(b[2]=C=>Mt(h)?h.value=C:h=C),"backdrop-filter":"sepia(90%)",persistent:""},{default:ee(()=>[E(Qe,null,{default:ee(()=>[E(Le,{class:"row items-center q-pb-none text-h6"},{default:ee(()=>[ke(" Signature ")]),_:1}),E(Le,null,{default:ee(()=>[Jn,D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"16px"},onClick:b[1]||(b[1]=C=>fe())}),D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"125px"},onClick:ae}),D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",right:"12px"},onClick:de})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const Qn={id:"IdCardBackV2",style:{width:"640px",height:"1014px","font-size":"7pt",position:"relative","background-image":"url('/images/REG_ID_Back_Temp.jpg')","background-position":"center","background-size":"contain","font-family":"sans-serif"}},Xn={class:"detail",style:{position:"absolute",top:"170px",left:"35px",overflow:"hidden",width:"559px",height:"57px","font-size":"22pt","line-height":"23pt"}},Yn={class:"detail",style:{position:"absolute",top:"283px",left:"42px","font-size":"22pt"}},Zn={class:"detail",style:{position:"absolute",top:"363px",left:"42px","font-size":"22pt"}},eo={class:"detail",style:{position:"absolute",top:"442px",left:"42px","font-size":"22pt"}},to={class:"detail",style:{position:"absolute",top:"521px",left:"42px","font-size":"22pt"}},no={style:{width:"100%","text-align":"left",position:"absolute",bottom:"376px",left:"53px","font-size":"22pt"}},oo={style:{width:"100%","text-align":"left",position:"absolute",bottom:"344px",left:"53px","font-size":"22pt"}},io={class:"detail",style:{position:"absolute",top:"671px",left:"204px","font-size":"19pt"}},ro={class:"detail",style:{position:"absolute",top:"705px",left:"204px","font-size":"19pt"}},ao=D("img",{id:"signatureImageV2",class:"signatureImage",src:Nt,style:{height:"227px",width:"359px",position:"absolute",bottom:"-584px",left:"151px"}},null,-1),so=[ao],lo=D("div",{id:"sigPreviewContainer",style:{position:"relative"}},null,-1),yt=Object.assign({name:"IdCardBack"},{__name:"IdCardBackV2",props:{details:{type:Object,required:!0}},emits:["onPenDataSave"],setup(e,{emit:t}){const i=e,r=t;function m(){r("onPenDataSave",K)}var h=He(!1),T="Cancel",w="Clear",N="OK",M=20,j=1e3,L=500,n,o,c,a,u,f,x=-1,S,O,F,J,K,oe,R=0,l;Pe(()=>i.details,(v,b)=>{v.sig_src&&(K=v.sig_src,S={encodingFlag:3,maxReportRate:200,resolution:64e3,screenHeight:227,screenWidth:359,tabletMaxPressure:1023,tabletMaxX:9600,tabletMaxY:6e3},J={offPressureMark:16,onPressureMark:21},Ae())},{deep:!0});function U(){R=R+1,s.STU.isServiceReady()?(R=0,console.log("SigCaptX Web Service: ready")):(console.log("SigCaptX Web Service: not connected"),R<M?setTimeout(U,j):alert("Unable to establish connection to SigCaptX"))}setTimeout(U,L);function P(){console.log("DCA disconnected"),setTimeout(Ce,0)}function $(v,b,C,B){this.x=v,this.y=b,this.width=C,this.height=B,this.Contains=function(y){return y.x>=this.x&&y.x<=this.x+this.width&&y.y>=this.y&&y.y<=this.y+this.height}}function I(){this.Bounds,this.Text,this.Click}function Y(v,b){this.x=v,this.y=b}function G(v,b){c=document.createElement("div"),c.id="signatureWindow",c.className="active",c.style.position="relative",c.style.top=0+"px",c.style.left=0+"px",c.style.width=v+"px",c.style.height=b+"px",document.getElementById("sigPreviewContainer").appendChild(c),n=document.createElement("canvas"),n.id="myCanvas",n.height=c.offsetHeight,n.width=c.offsetWidth,n.style.zIndex=999,c.appendChild(n),o=n.getContext("2d"),console.log("canvas.addEventListener:",n.addEventListener),n.addEventListener?(n.addEventListener("click",Me,!1),console.log("onCanvasClick 0")):n.attachEvent?(n.attachEvent("onClick",Me),console.log("onCanvasClick 1")):(n.onClick=Me,console.log("onCanvasClick 2"))}function q(){var v=Q.defer();if(l!=null){var b=new s.STU.Protocol;l.setInkingMode(b.InkingMode.InkingMode_Off).then(function(C){return console.log("received: "+JSON.stringify(C)),l.endCapture()}).then(function(C){return console.log("received: "+JSON.stringify(C)),F!==null?F.remove():C}).then(function(C){return console.log("received: "+JSON.stringify(C)),F=null,l.setClearScreen()}).then(function(C){return console.log("received: "+JSON.stringify(C)),l.disconnect()}).then(function(C){console.log("received: "+JSON.stringify(C)),l=null,Ee(n,o)}).then(function(C){v.resolve()}).fail(function(C){console.log("disconnect error: "+C),v.resolve()})}else v.resolve();return v.promise}window.addEventListener("beforeunload",function(v){var b="";return s.STU.close(),(v||window.event).returnValue=b,b});function me(){}me.prototype=new Error;function ve(){h.value=!0,Z()}function Z(){var v=new s.STU.Protocol,b,C,B;s.STU.isDCAReady().then(function(y){if(!y)throw new me;return s.STU.onDCAtimeout=P,s.STU.getUsbDevices()}).then(function(y){if(y==null||y.length==0)throw new Error("No STU devices found");return console.log("received: "+JSON.stringify(y)),oe=y,s.STU.isSupportedUsbDevice(oe[0].idVendor,oe[0].idProduct)}).then(function(y){return console.log("received: "+JSON.stringify(y)),b=new s.STU.UsbInterface,b.Constructor()}).then(function(y){return console.log("received: "+JSON.stringify(y)),b.connect(oe[0],!0)}).then(function(y){return console.log("received: "+JSON.stringify(y)),l=new s.STU.Tablet,l.Constructor(b,C,B)}).then(function(y){return console.log("received: "+JSON.stringify(y)),b=null,l.getInkThreshold()}).then(function(y){return console.log("m_inkThreshold received: "+JSON.stringify(y)),J=y,l.getCapability()}).then(function(y){return console.log("m_capability received: "+JSON.stringify(y)),S=y,G(S.screenWidth,S.screenHeight),l.getInformation()}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.getInkThreshold()}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.getProductId()}).then(function(y){return console.log("received: "+JSON.stringify(y)),s.STU.ProtocolHelper.simulateEncodingFlag(y,S.encodingFlag)}).then(function(y){console.log("received: "+JSON.stringify(y));var A=y;if((A&v.EncodingFlag.EncodingFlag_24bit)!=0)return l.supportsWrite().then(function(X){O=X?v.EncodingMode.EncodingMode_24bit_Bulk:v.EncodingMode.EncodingMode_24bit});if((A&v.EncodingFlag.EncodingFlag_16bit)!=0)return l.supportsWrite().then(function(X){O=X?v.EncodingMode.EncodingMode_16bit_Bulk:v.EncodingMode.EncodingMode_16bit});O=v.EncodingMode.EncodingMode_1bit}).then(function(y){return l.setClearScreen()}).then(function(y){return console.log("received from setClearScreen: "+JSON.stringify(y)),y}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.isSupported(v.ReportId.ReportId_PenDataOptionMode)}).then(function(y){return console.log("received: "+JSON.stringify(y)),y?l.getProductId().then(function(A){var X=v.PenDataOptionMode.PenDataOptionMode_None;switch(A){case s.STU.ProductId.ProductId_520A:X=v.PenDataOptionMode.PenDataOptionMode_TimeCount;break;case s.STU.ProductId.ProductId_430:case s.STU.ProductId.ProductId_530:case s.STU.ProductId.ProductId_540:X=v.PenDataOptionMode.PenDataOptionMode_TimeCountSequence;break;default:console.log("Unknown tablet supporting PenDataOptionMode, setting to None.")}return l.setPenDataOptionMode(X)}):(O=v.EncodingMode.EncodingMode_1bit,O)}).then(function(y){console.log("received: "+JSON.stringify(y)),re();var A=n.toDataURL("image/png");return s.STU.ProtocolHelper.resizeAndFlatten(A,0,0,0,0,S.screenWidth,S.screenHeight,O,1,!1,0,!0)}).then(function(y){return F=y,console.log("received: "+JSON.stringify(y)),l.writeImage(O,y)}).then(function(y){return console.log("received: "+JSON.stringify(y)),l.setInkingMode(v.InkingMode.InkingMode_On)}).then(function(y){console.log("received: "+JSON.stringify(y));var A=new s.STU.ProtocolHelper.ReportHandler;u={x:0,y:0},a=!1,o.lineWidth=1;var X=function(ie){De(ie,n),Re(ie,n,o),K.push(ie)},he=function(ie){De(ie.penData[0],n),Re(ie.penData[0],n,o),De(ie.penData[1],n),Re(ie.penData[1],n,o),K.push(ie.penData[0],ie.penData[1])},Te=function(ie){},we=function(ie){};return K=new Array,A.onReportPenData=X,A.onReportPenDataOption=X,A.onReportPenDataTimeCountSequence=X,A.onReportPenDataEncrypted=he,A.onReportPenDataEncryptedOption=he,A.onReportPenDataTimeCountSequenceEncrypted=X,A.onReportDevicePublicKey=Te,A.onReportEncryptionStatus=Te,A.decrypt=we,A.startReporting(l,!0)}).fail(function(y){console.log(y),y instanceof me?(s.STU.Reinitialize(),setTimeout(Z,j)):(alert(`promptSigDialog failed:
`+y),setTimeout(Ce(),0))})}function re(){if(f=new Array(3),f[0]=new I,f[1]=new I,f[2]=new I,oe[0].idProduct!=s.STU.ProductId.ProductId_300){var v=S.screenWidth/3,b=S.screenWidth/3,C=S.screenWidth-v-b,B=S.screenHeight*6/7,y=S.screenHeight-B;f[0].Bounds=new $(0,B,C,y),f[1].Bounds=new $(C,B,v,y),f[2].Bounds=new $(C+v,B,b,y)}else{var A=S.screenWidth*3/4,X=S.screenWidth-A,he=S.screenHeight/3,Te=S.screenHeight/3,we=S.screenHeight-he-Te;f[0].Bounds=new $(A,0,X,we),f[1].Bounds=new $(A,we,X,he),f[2].Bounds=new $(A,we+he,X,Te)}f[0].Text=N,f[1].Text=w,f[2].Text=T,f[0].Click=fe,f[1].Click=ae,f[2].Click=de,Ee(n,o),k()}function k(){o.save(),o.setTransform(1,0,0,1,0,0),o.beginPath(),o.lineWidth=1,o.strokeStyle="black",o.font="30px Arial";for(var v=0;v<f.length;++v){o.fillStyle="lightgrey",o.fillRect(f[v].Bounds.x,f[v].Bounds.y,f[v].Bounds.width,f[v].Bounds.height),o.fillStyle="black",o.rect(f[v].Bounds.x,f[v].Bounds.y,f[v].Bounds.width,f[v].Bounds.height);var b=f[v].Bounds.x+(f[v].Bounds.width/2-o.measureText(f[v].Text).width/2),C;oe[0].idProduct==s.STU.ProductId.ProductId_300?C=28:oe[0].idProduct==s.STU.ProductId.ProductId_430?C=26:C=40,o.fillText(f[v].Text,b,f[v].Bounds.y+C)}o.stroke(),o.closePath(),o.restore()}function te(){Ee(n,o),k(),K=new Array,l.writeImage(O,F)}function fe(){console.log("btnOk_Click: ",this),Ae(),setTimeout(Ce,0)}function de(){setTimeout(Ce,0)}function ae(){console.log("clear!"),te()}function Ie(v,b){return Math.pow(v.x-b.x,2)+Math.pow(v.y-b.y,2)}function Ee(v,b){b.save(),b.setTransform(1,0,0,1,0,0),b.fillStyle="white",b.fillRect(0,0,v.width,v.height),b.restore()}function Se(v,b){b.save(),b.setTransform(1,0,0,1,0,0),b.fillStyle="#ffffff00",b.fillRect(0,0,v.width,v.height),b.restore()}function De(v,b){var C={};C.x=Math.round(b.width*v.x/S.tabletMaxX),C.y=Math.round(b.height*v.y/S.tabletMaxY);for(var B=a?!(v.pressure<=J.offPressureMark):v.pressure>J.onPressureMark,y=-1,A=0;A<f.length;++A)if(f[A].Bounds.Contains(C)){y=A;break}return a&&!B?(y!=-1&&x===y&&f[y].Click(),x=-1):y!=-1&&!a&&B&&(x=y),y==-1}function Re(v,b,C){var B={};B.x=Math.round(b.width*v.x/S.tabletMaxX),B.y=Math.round(b.height*v.y/S.tabletMaxY);var y=a?!(v.pressure<=J.offPressureMark):v.pressure>J.onPressureMark;!a&&y&&(u=B),(y&&10<Ie(u,B)||a&&!y)&&(C.beginPath(),C.moveTo(u.x,u.y),C.lineTo(B.x,B.y),C.stroke(),C.closePath(),u=B),a=y}function Ae(){var v=document.getElementById("signatureImageV2"),b=document.createElement("canvas");b.id="signatureCanvas",b.height=v.height,b.width=v.width;var C=b.getContext("2d");Se(b,C),C.lineWidth="2.5",C.strokeStyle="black",u={x:0,y:0},a=!1;for(var B=0;B<K.length;B++)Re(K[B],b,C);m(),v.src=b.toDataURL("image/png")}function Ce(){h.value=!1,s.STU.onDCAtimeout=null,q(),document.getElementById("sigPreviewContainer").removeChild(c)}function Me(v){for(var b=v.pageX-c.offsetLeft,C=v.pageY-c.offsetTop,B=0;B<f.length;B++)if(f[B].Bounds.Contains(new Y(b,C))){f[B].Click();break}}return(v,b)=>(Ue(),Ne(et,null,[D("div",Qn,[D("div",Xn,z(e.details.address_res_barangay?e.details.address_res_barangay+", ":"")+" "+z(e.details.address_res_city)+", "+z(e.details.address_res_zip_code)+", "+z(e.details.address_res_province),1),D("div",Yn,z(e.details.gender),1),D("div",Zn,z(e.details.date_of_birth),1),D("div",eo,z(e.details.blood_type),1),D("div",to,z(e.details.contact_number),1),D("div",no,z(e.details.emergency_name),1),D("div",oo,z(e.details.emergency_number),1),D("div",io,z(e.details.date_issued_formatted),1),D("div",ro,z(e.details.date_expire_formatted),1),D("div",{style:{width:"100%",position:"absolute",top:"354px","text-align":"center"},id:"signatureDiv",onClick:b[0]||(b[0]=C=>ve())},so)]),E(Ge,{modelValue:Et(h),"onUpdate:modelValue":b[2]||(b[2]=C=>Mt(h)?h.value=C:h=C),"backdrop-filter":"sepia(90%)",persistent:""},{default:ee(()=>[E(Qe,null,{default:ee(()=>[E(Le,{class:"row items-center q-pb-none text-h6"},{default:ee(()=>[ke(" Signature ")]),_:1}),E(Le,null,{default:ee(()=>[lo,D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"16px"},onClick:b[1]||(b[1]=C=>fe())}),D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",left:"125px"},onClick:ae}),D("div",{style:{width:"107px",height:"29px",position:"absolute",bottom:"16px",right:"12px"},onClick:de})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});var vt=Ve({name:"QCardActions",props:{...un,vertical:Boolean},setup(e,{slots:t}){const i=cn(e),r=ge(()=>`q-card__actions ${i.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>Oe("div",{class:r.value},je(t.default))}});function St(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var xt=pn({name:"close-popup",beforeMount(e,{value:t}){const i={depth:St(t),handler(r){i.depth!==0&&setTimeout(()=>{const m=Zt(e);m!==void 0&&en(m,r,i.depth)})},handlerKey(r){fn(r,13)===!0&&i.handler(r)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:t,oldValue:i}){t!==i&&(e.__qclosepopup.depth=St(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var uo=(e,t)=>{const i=e.__vccOpts||e;for(const[r,m]of t)i[r]=m;return i};const co={props:{image:{type:String,default:""},accept:{type:String,default:"image/*"},placeholderSvg:{type:String,default:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 65"><defs><style>.cls-1{fill:#000;}</style></defs><title>Upload_Upload</title><path class="cls-1" d="M32.5,1A31.5,31.5,0,1,1,1,32.5,31.54,31.54,0,0,1,32.5,1m0-1A32.5,32.5,0,1,0,65,32.5,32.5,32.5,0,0,0,32.5,0h0Z"/><polygon class="cls-1" points="41.91 28.2 32.59 18.65 23.09 28.39 24.17 29.44 31.87 21.54 31.87 40.05 33.37 40.05 33.37 21.59 40.83 29.25 41.91 28.2"/><polygon class="cls-1" points="40.66 40.35 40.66 44.35 24.34 44.35 24.34 40.35 22.34 40.35 22.34 44.35 22.34 46.35 24.34 46.35 40.66 46.35 42.66 46.35 42.66 44.35 42.66 40.35 40.66 40.35"/></svg>'},border:{type:Number,default:25},borderRadius:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},color:{type:Array,default:()=>[0,0,0,.5]},scale:{type:Number,default:1},rotation:{type:Number,default:0}},data(){return{cursor:"cursorPointer",canvas:null,context:null,dragged:!1,imageLoaded:!1,changed:!1,state:{drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}}}},computed:{canvasWidth(){return this.getDimensions().canvas.width},canvasHeight(){return this.getDimensions().canvas.height},rotationRadian(){return this.rotation*Math.PI/180}},mounted(){let e=this;if(this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),this.paint(),this.image)this.loadImage(this.image);else{var t=this.svgToImage(this.placeholderSvg);t.onload=function(){var i=e.canvasWidth/2-this.width/2,r=e.canvasHeight/2-this.height/2;e.context.drawImage(t,i,r,this.width,this.height)}}},methods:{drawRoundedRect(e,t,i,r,m,h){if(h===0)e.rect(t,i,r,m);else{const T=r-h,w=m-h;e.translate(t,i),e.arc(h,h,h,Math.PI,Math.PI*1.5),e.lineTo(T,0),e.arc(T,h,h,Math.PI*1.5,Math.PI*2),e.lineTo(r,w),e.arc(T,w,h,Math.PI*2,Math.PI*.5),e.lineTo(h,m),e.arc(h,w,h,Math.PI*.5,Math.PI),e.translate(-t,-i)}},svgToImage(e){let t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=(self.URL||self.webkitURL||self).createObjectURL(t),m=new Image;return m.src=r,m},setState(e){var t=Math.ceil(1),i=Math.floor(1e4);this.state=e,this.state.cnt="HELLO"+Math.floor(Math.random()*(i-t))+t},paint(){this.context.save(),this.context.translate(0,0),this.context.fillStyle="rgba("+this.color.slice(0,4).join(",")+")";let e=this.borderRadius;const t=this.getDimensions(),i=t.border,r=t.canvas.height,m=t.canvas.width;e=Math.max(e,0),e=Math.min(e,m/2-i,r/2-i),this.context.beginPath(),this.drawRoundedRect(this.context,i,i,m-i*2,r-i*2,e),this.context.rect(m,0,-m,r),this.context.fill("evenodd"),this.context.restore()},getDimensions(){return{width:this.width,height:this.height,border:this.border,canvas:{width:this.width+this.border*2,height:this.height+this.border*2}}},onDrop(e){if(e=e||window.event,e.stopPropagation(),e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length){const t=new FileReader,i=e.dataTransfer.files[0];this.changed=!0,t.onload=r=>this.loadImage(r.target.result),t.readAsDataURL(i)}},onDragStart(e){e=e||window.event,e.preventDefault(),this.state.drag=!0,this.state.mx=null,this.state.my=null,this.cursor="cursorGrabbing";let t=document,i=!1,r=h=>{this.onDragEnd(h),!i&&h.targetTouches&&e.target.click(),t.removeEventListener("mouseup",r),t.removeEventListener("mousemove",m),t.removeEventListener("touchend",r),t.removeEventListener("touchmove",m)},m=h=>{i=!0,this.onMouseMove(h)};t.addEventListener("mouseup",r),t.addEventListener("mousemove",m),t.addEventListener("touchend",r),t.addEventListener("touchmove",m)},onDragEnd(e){this.state.drag&&(this.state.drag=!1,this.cursor="cursorPointer")},onMouseMove(e){if(e=e||window.event,this.state.drag===!1)return;this.dragged=!0,this.changed=!0;let t=this.state.image;const i=t.x,r=t.y,m=e.targetTouches?e.targetTouches[0].pageX:e.clientX,h=e.targetTouches?e.targetTouches[0].pageY:e.clientY,T={mx:m,my:h,image:t};if(this.state.mx&&this.state.my){const w=(this.state.mx-m)/this.scale,N=(this.state.my-h)/this.scale;t.y=this.getBoundedY(r-N,this.scale),t.x=this.getBoundedX(i-w,this.scale)}this.state.mx=T.mx,this.state.my=T.my,this.state.image=t},replaceImageInBounds(){let e=this.state.image;e.y=this.getBoundedY(e.y,this.scale),e.x=this.getBoundedX(e.x,this.scale)},loadImage(e){let t=new Image,i=this;t.onload=()=>{let r=i.getInitialSize(t.width,t.height);i.state.image.x=0,i.state.image.y=0,i.state.image.resource=t,i.state.image.width=r.width,i.state.image.height=r.height,i.state.drag=!1,i.$emit("vue-avatar-editor:image-ready",i.scale),i.imageLoaded=!0,this.$emit("imageLoaded",i.imageLoaded),i.cursor="cursorGrab"},t.onerror=r=>console.log("error loading image: ",r),this.isDataURL(e)||(t.crossOrigin="anonymous"),t.src=e},getInitialSize(e,t){let i,r;const m=this.getDimensions(),h=m.height/m.width,T=t/e;return h>T?(i=this.getDimensions().height,r=e*(i/t)):(r=this.getDimensions().width,i=t*(r/e)),{height:i,width:r}},isDataURL(e){return e===null?!1:!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i)},getBoundedX(e,t){var i=this.state.image,r=this.getDimensions();let m=Math.abs(i.width*Math.cos(this.rotationRadian))+Math.abs(i.height*Math.sin(this.rotationRadian)),h=Math.floor((m-r.width/t)/2);return h=Math.max(0,h),Math.max(-h,Math.min(e,h))},getBoundedY(e,t){var i=this.state.image,r=this.getDimensions();let m=Math.abs(i.width*Math.sin(this.rotationRadian))+Math.abs(i.height*Math.cos(this.rotationRadian)),h=Math.floor((m-r.height/t)/2);return h=Math.max(0,h),Math.max(-h,Math.min(e,h))},paintImage(e,t,i){if(t.resource){var r=this.calculatePosition(t,i);e.save(),e.globalCompositeOperation="destination-over";let m=this.getDimensions();e.translate(m.canvas.width/2,m.canvas.height/2),e.rotate(this.rotationRadian),e.translate(-m.canvas.width/2,-m.canvas.height/2),e.drawImage(t.resource,r.x,r.y,r.width,r.height),e.restore()}},transformDataWithRotation(e,t){let i=-this.rotationRadian,r=e*Math.cos(i)-t*Math.sin(i),m=e*Math.sin(i)+t*Math.cos(i);return[r,m]},calculatePosition(e,t){e=e||this.state.image;var i=this.getDimensions();let r=e.width*this.scale,m=e.height*this.scale;var h=(r-i.width)/2,T=(m-i.height)/2,w=e.x*this.scale,N=e.y*this.scale;return[w,N]=this.transformDataWithRotation(w,N),w+=t-h,N+=t-T,{x:w,y:N,height:m,width:r}},redraw(){this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint(),this.paintImage(this.context,this.state.image,this.border)},getImage(){const e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;const i=document.createElement("canvas");return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t.resource,-e.x,-e.y),i},getImageScaled(){const{width:e,height:t}=this.getDimensions(),i=document.createElement("canvas");return i.width=e,i.height=t,this.paintImage(i.getContext("2d"),this.state.image,0),i},imageChanged(){return this.changed},getCroppingRect(){const e=this.getDimensions(),t={x:e.border,y:e.border,width:e.width,height:e.height},i=this.calculatePosition(this.state.image,e.border);return{x:(t.x-i.x)/i.width,y:(t.y-i.y)/i.height,width:t.width/i.width,height:t.height/i.height}},clicked(e){this.dragged===!0?this.dragged=!1:this.$refs.input.click()},fileSelected(e){var t=e.target.files||e.dataTransfer.files;if(this.$emit("select-file",t),!!t.length){var i=new FileReader;this.changed=!0,i.onload=r=>this.loadImage(r.target.result),i.readAsDataURL(t[0])}},resetImage(){let e=this;this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),e.imageLoaded=!1,this.$emit("imageLoaded",e.imageLoaded),e.state={drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}},this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint();var t=this.svgToImage(this.placeholderSvg);t.onload=function(){var i=e.canvasWidth/2-this.width/2,r=e.canvasHeight/2-this.height/2;e.context.drawImage(t,i,r,this.width,this.height)}}},watch:{state:{handler(e,t){this.imageLoaded&&this.redraw()},deep:!0},scale(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},rotation(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},borderRadius(){this.redraw()}}},po=["width","height"],fo=["accept"];function mo(e,t,i,r,m,h){return Ue(),Ne("div",null,[D("canvas",{width:h.canvasWidth,height:h.canvasHeight,class:"cursorPointer",id:"avatarEditorCanvas",ref:"avatarEditorCanvas",onDragover:t[0]||(t[0]=Ot(()=>{},["prevent"])),onDrop:t[1]||(t[1]=(...T)=>h.onDrop&&h.onDrop(...T)),onMousedown:t[2]||(t[2]=(...T)=>h.onDragStart&&h.onDragStart(...T)),onTouchstart:t[3]||(t[3]=(...T)=>h.onDragStart&&h.onDragStart(...T)),onClick:t[4]||(t[4]=(...T)=>h.clicked&&h.clicked(...T))},null,40,po),D("input",{type:"file",ref:"input",accept:i.accept,onChange:t[5]||(t[5]=(...T)=>h.fileSelected&&h.fileSelected(...T)),style:{display:"none"}},null,40,fo)])}var ho=uo(co,[["render",mo]]);const go={id:"photoGetterContainer"},yo={id:"uploadedPhotoEditor",style:{width:"250px",height:"188px",overflow:"hidden",display:"relative","text-align":"center"}},vo=["hidden"],So=D("canvas",{hidden:"",id:"canvasCapture",width:"250px",height:"188px"},null,-1),xo={class:"q-mt-sm"},bo=D("video",{id:"player",autoplay:"",style:{width:"1000px"}},null,-1),To=D("br",null,null,-1),wo={id:"uploadForm",enctype:"multipart/form-data"},_o=D("input",{type:"file",id:"fileInput",name:"image",accept:"image/jpeg"},null,-1),Io=Object.assign({name:"PhotoGetter",components:{VueAvatar:ho},data(){return{imageIsLoading:"loaded",uploadDialog:!1,prompt:!1,selectedCamDevice:null,camDevices:[],player:null,rotation:0,scale:1,borderRadius:0,imgSrc:null}},watch:{"selected_employee_data.employees_id"(e){e&&(this.imageIsLoading="loading",this.$nextTick(()=>{this.getPhoto().then(()=>{})}))},prompt(e,t){e||window.stream&&window.stream.getTracks().forEach(i=>{i.stop()})},selectedCamDevice(e){this.getStream()}},methods:{imageLoaded(){this.imageIsLoading="loaded"},async getPhoto(){await this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getPhoto:!0,employees_id:this.selected_employee_data.employees_id}).then(({data:e})=>{this.$refs.uploadedPhotoRef.src=e,e||(this.imageIsLoading="loaded")}).catch(e=>{console.error(e)})},uploadImage(){this.imageIsLoading="loading";var e=document.getElementById("uploadForm"),t=new FormData(e);t.append("employees_id",this.selected_employee_data.employees_id),this.$api.post("http://192.168.50.50:8081/id_photo_upload.php",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:i})=>{this.getPhoto(),this.$emit("imageCaptured",t),this.uploadDialog=!this.uploadDialog,this.imageIsLoading="loaded"}).catch(i=>{console.error(i)})},saveClicked:function(){var t=this.$refs.vueavatar.getImageScaled();const i=t.toDataURL("image/jpeg",1),r=document.getElementById("uploadedPhoto");r.src=i;const m=document.getElementById("canvasCapture");m.getContext("2d").drawImage(r,0,0,m.width,m.height),this.$emit("imageCaptured",i),this.uploadDialog=!this.uploadDialog},onImageReady:function(){this.scale=1,this.rotation=0},uploadPhoto(e){const t=document.getElementById("uploadPhotoInput");var i=document.getElementById("uploadedPhoto");t.files&&t.files[0]&&(i.onload=()=>{URL.revokeObjectURL(i.src),document.getElementById("uploadedPhotoEditor");const r=document.getElementById("canvasCapture");r.getContext("2d").drawImage(i,0,0,i.width,i.height,0,0,r.width,r.height);const h=r.toDataURL("image/jpeg",1);this.$emit("imageCaptured",h)},i.src=URL.createObjectURL(t.files[0]))},promptDialog(){this.camDevices=[],this.getDevices().then(this.gotDevices),this.prompt=!this.prompt,this.$nextTick(()=>{this.player=document.getElementById("player");const e=document.getElementById("canvasCapture"),t=e.getContext("2d");document.getElementById("capture").addEventListener("click",()=>{t.drawImage(this.player,0,0,e.width,e.height);const r=e.toDataURL("image/jpeg",1),m=document.getElementById("uploadedPhoto");m.src=r,this.prompt=!this.prompt,this.$emit("imageCaptured",r),window.stream&&window.stream.getTracks().forEach(h=>{h.stop()})}),this.getStream()})},getStream(){window.stream&&window.stream.getTracks().forEach(i=>{i.stop()});const e=this.selectedCamDevice.value,t={video:{deviceId:e?{exact:e}:void 0}};return navigator.mediaDevices.getUserMedia(t).then(this.gotStream)},gotStream(e){window.stream=e,this.player.srcObject=e},async getDevices(){return await navigator.mediaDevices.enumerateDevices()},async gotDevices(e){window.deviceInfos=e;for(const t of e){const i={label:"",value:""};i.value=t.deviceId,t.kind==="videoinput"&&(i.label=t.label||`Camera ${videoSelect.length+1}`,this.camDevices.push(i))}this.selectedCamDevice==null&&(this.selectedCamDevice=this.camDevices[0])}},created(){}},{__name:"PhotoGetter",props:{selected_employee_data:{type:Object}},emits:["imageCaptured"],setup(e){return(t,i)=>(Ue(),Ne(et,null,[D("div",go,[D("div",yo,[D("img",{hidden:t.imageIsLoading=="loading",onLoad:i[0]||(i[0]=r=>t.imageLoaded()),id:"uploadedPhoto",ref:"uploadedPhotoRef",style:{transform:"scale(1)",width:"250px !important"}},null,40,vo),E(rt,{style:{width:"250px",height:"188px"},hidden:t.imageIsLoading=="loaded"},null,8,["hidden"])]),So]),D("div",xo,[E(ye,{unelevated:"",icon:"file_upload",onClick:i[1]||(i[1]=r=>t.uploadDialog=!t.uploadDialog),disable:!e.selected_employee_data.employees_id},{default:ee(()=>[ke("Upload")]),_:1},8,["disable"]),mn(t.$slots,"buttons")]),E(Ge,{modelValue:t.prompt,"onUpdate:modelValue":i[3]||(i[3]=r=>t.prompt=r),persistent:""},{default:ee(()=>[E(Qe,{style:{"min-width":"1500px","text-align":"center"}},{default:ee(()=>[E(Le,{class:"q-pt-none q-ma-lg"},{default:ee(()=>[E(ot,{modelValue:t.selectedCamDevice,"onUpdate:modelValue":i[2]||(i[2]=r=>t.selectedCamDevice=r),options:t.camDevices,label:"Device"},null,8,["modelValue","options"]),bo,To,E(ye,{id:"capture"},{default:ee(()=>[ke("Capture")]),_:1})]),_:1}),E(vt,{align:"right",class:"text-primary"},{default:ee(()=>[ct(E(ye,{flat:"",label:"Cancel"},null,512),[[xt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(Ge,{modelValue:t.uploadDialog,"onUpdate:modelValue":i[5]||(i[5]=r=>t.uploadDialog=r),persistent:""},{default:ee(()=>[E(Qe,{style:{"_min-width":"1500px","text-align":"center"}},{default:ee(()=>[E(Le,{class:"q-pt-none q-ma-lg"},{default:ee(()=>[D("form",wo,[_o,D("button",{type:"button",onClick:i[4]||(i[4]=r=>t.uploadImage())},"Upload")])]),_:1}),E(vt,{align:"right",class:"text-primary"},{default:ee(()=>[ct(E(ye,{flat:"",label:"Cancel"},null,512),[[xt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Co={style:{position:"relative",display:"inline"},ref:"clickBox"},ko=["hidden"],Do={style:{"font-size":"12pt"}},Ro={style:{"font-size":"12pt"}},Po={style:{"font-size":"12pt"}},Uo=Object.assign({name:"PhotoAdjuster",data:function(){return{displayModal:!1,photoFormat:this.photoProps,photoFormatDefault:Object.assign({},this.photoProps),interval:null,count:0,horizontalDir:null}},methods:{mousedown(e){this.horizontalDir=e,this.increment(),this.interval=setInterval(this.increment,100)},mouseup(){clearInterval(this.interval)},increment(){this.horizontalDir=="left"?this.photoFormat.left+=1:this.photoFormat.left-=1},promptDialog(){this.displayModal=!this.displayModal},reset(){this.photoFormat.top=this.photoFormatDefault.top,this.photoFormat.left=this.photoFormatDefault.left,this.photoFormat.width=this.photoFormatDefault.width}}},{__name:"PhotoAdjuster",props:{photoProps:{type:Object,required:!0},selected_employee_data:{type:Object}},setup(e){return(t,i)=>(Ue(),Ne("div",Co,[E(ye,{unelevated:"",icon:"format_shapes",onClick:i[0]||(i[0]=r=>t.promptDialog()),disable:!e.selected_employee_data.employees_id},null,8,["disable"]),D("div",{class:"q-pa-md",hidden:t.displayModal==!1,style:{position:"absolute","z-index":"999","background-color":"white",width:"250px","box-shadow":"10px 19px 60px -27px","border-radius":"5px",right:"-210px"}},[E(ye,{size:"xs",style:{position:"absolute",top:"10px",right:"10px"},onClick:i[1]||(i[1]=r=>t.reset())},{default:ee(()=>[ke("Reset")]),_:1}),D("label",Do,"Vertical: "+z(t.photoFormat.top)+"px",1),E(ue,{type:"number",dense:"",modelValue:t.photoFormat.top,"onUpdate:modelValue":i[2]||(i[2]=r=>t.photoFormat.top=r)},null,8,["modelValue"]),D("label",Ro,"Horizontal: "+z(t.photoFormat.left)+"px",1),E(ue,{type:"number",dense:"",modelValue:t.photoFormat.left,"onUpdate:modelValue":i[7]||(i[7]=r=>t.photoFormat.left=r),min:-6e3,max:440,step:1},{append:ee(()=>[E(ye,{round:"",dense:"",flat:"",icon:"chevron_left",type:"button",onMousedown:i[3]||(i[3]=r=>t.mousedown("left")),onMouseup:i[4]||(i[4]=r=>t.mouseup())}),E(ye,{round:"",dense:"",flat:"",icon:"chevron_right",onMousedown:i[5]||(i[5]=r=>t.mousedown("right")),onMouseup:i[6]||(i[6]=r=>t.mouseup())})]),_:1},8,["modelValue"]),D("label",Po,"Scale: "+z(t.photoFormat.width)+"px",1),E(ue,{type:"number",dense:"",modelValue:t.photoFormat.width,"onUpdate:modelValue":i[8]||(i[8]=r=>t.photoFormat.width=r),min:0,max:1e3,step:1},null,8,["modelValue"]),E(ye,{size:"xs",onClick:i[9]||(i[9]=r=>t.displayModal=!t.displayModal)},{default:ee(()=>[ke("Close")]),_:1})],8,ko)],512))}}),Eo={style:{position:"relative"},ref:"clickBox"},Mo=["hidden"],Oo={for:"",style:{"font-size":"12pt"}},Fo={for:"",style:{"font-size":"12pt"}},No={for:"",style:{"font-size":"12pt"}},qe=Object.assign({name:"TextFormatter",data:function(){return{displayModal:!1,text:this.textProps,textDefault:Object.assign({},this.textProps)}},methods:{adjustLastName(){this.displayModal=!this.displayModal,console.log(this.textProps)},reset(){this.text.font_size=this.textDefault.font_size,this.text.bottom=this.textDefault.bottom,this.text.left=this.textDefault.left}},mounted(){}},{__name:"TextFormatter",props:{textProps:{type:Object},textFor:{type:String}},setup(e){return(t,i)=>(Ue(),Ne("div",Eo,[E(ye,{round:"",dense:"",flat:"",icon:"format_shapes",onClick:i[0]||(i[0]=r=>t.adjustLastName())}),D("div",{class:"q-pa-md",hidden:t.displayModal==!1,style:{position:"absolute","z-index":"999","background-color":"white",width:"250px","box-shadow":"10px 10px 20px 10px","border-radius":"5px",right:"0px"}},[E(ye,{size:"xs",style:{position:"absolute",top:"10px",right:"10px"},onClick:i[1]||(i[1]=r=>t.reset())},{default:ee(()=>[ke("Reset")]),_:1}),D("label",Oo,"Font-size: "+z(t.text.font_size)+"px",1),E(ue,{type:"number",modelValue:t.text.font_size,"onUpdate:modelValue":i[2]||(i[2]=r=>t.text.font_size=r),min:8,max:60,step:1},null,8,["modelValue"]),D("label",Fo,"Vertical Position: "+z(t.text.bottom)+"px",1),E(ue,{type:"number",modelValue:t.text.bottom,"onUpdate:modelValue":i[3]||(i[3]=r=>t.text.bottom=r),min:0,max:300,step:1},null,8,["modelValue"]),e.textFor=="position"?(Ue(),Ne(et,{key:0},[D("label",No,"Line Height: "+z(t.text.line_height)+"px",1),E(ue,{type:"number",modelValue:t.text.line_height,"onUpdate:modelValue":i[4]||(i[4]=r=>t.text.line_height=r),min:0,max:238,step:1},null,8,["modelValue"])],64)):hn("",!0),E(ye,{size:"xs",onClick:i[5]||(i[5]=r=>t.displayModal=!t.displayModal)},{default:ee(()=>[ke("Close")]),_:1})],8,Mo)],512))}});function Bo(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const i=document.implementation.createHTMLDocument(),r=i.createElement("base"),m=i.createElement("a");return i.head.appendChild(r),i.body.appendChild(m),t&&(r.href=t),m.href=e,m.href}const Ao=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Fe(e){const t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i]);return t}function Xe(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function $o(e){const t=Xe(e,"border-left-width"),i=Xe(e,"border-right-width");return e.clientWidth+t+i}function Ho(e){const t=Xe(e,"border-top-width"),i=Xe(e,"border-bottom-width");return e.clientHeight+t+i}function Bt(e,t={}){const i=t.width||$o(e),r=t.height||Ho(e);return{width:i,height:r}}function Lo(){let e,t;try{t=process}catch{}const i=t&&t.env?t.env.devicePixelRatio:null;return i&&(e=parseInt(i,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const _e=16384;function Vo(e){(e.width>_e||e.height>_e)&&(e.width>_e&&e.height>_e?e.width>e.height?(e.height*=_e/e.width,e.width=_e):(e.width*=_e/e.height,e.height=_e):e.width>_e?(e.height*=_e/e.width,e.width=_e):(e.width*=_e/e.height,e.height=_e))}function Ye(e){return new Promise((t,i)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=i,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function zo(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function jo(e,t,i){const r="http://www.w3.org/2000/svg",m=document.createElementNS(r,"svg"),h=document.createElementNS(r,"foreignObject");return m.setAttribute("width",`${t}`),m.setAttribute("height",`${i}`),m.setAttribute("viewBox",`0 0 ${t} ${i}`),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("externalResourcesRequired","true"),m.appendChild(h),h.appendChild(e),zo(m)}const be=(e,t)=>{if(e instanceof t)return!0;const i=Object.getPrototypeOf(e);return i===null?!1:i.constructor.name===t.name||be(i,t)};function qo(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Wo(e){return Fe(e).map(t=>{const i=e.getPropertyValue(t),r=e.getPropertyPriority(t);return`${t}: ${i}${r?" !important":""};`}).join(" ")}function Ko(e,t,i){const r=`.${e}:${t}`,m=i.cssText?qo(i):Wo(i);return document.createTextNode(`${r}{${m}}`)}function bt(e,t,i){const r=window.getComputedStyle(e,i),m=r.getPropertyValue("content");if(m===""||m==="none")return;const h=Ao();try{t.className=`${t.className} ${h}`}catch{return}const T=document.createElement("style");T.appendChild(Ko(h,i,r)),t.appendChild(T)}function Go(e,t){bt(e,t,":before"),bt(e,t,":after")}const Tt="application/font-woff",wt="image/jpeg",Jo={woff:Tt,woff2:Tt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:wt,jpeg:wt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Qo(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function at(e){const t=Qo(e).toLowerCase();return Jo[t]||""}function Xo(e){return e.split(/,/)[1]}function it(e){return e.search(/^(data:)/)!==-1}function At(e,t){return`data:${t};base64,${e}`}async function $t(e,t,i){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const m=await r.blob();return new Promise((h,T)=>{const w=new FileReader;w.onerror=T,w.onloadend=()=>{try{h(i({res:r,result:w.result}))}catch(N){T(N)}},w.readAsDataURL(m)})}const nt={};function Yo(e,t,i){let r=e.replace(/\?.*/,"");return i&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function st(e,t,i){const r=Yo(e,t,i.includeQueryParams);if(nt[r]!=null)return nt[r];i.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let m;try{const h=await $t(e,i.fetchRequestInit,({res:T,result:w})=>(t||(t=T.headers.get("Content-Type")||""),Xo(w)));m=At(h,t)}catch(h){m=i.imagePlaceholder||"";let T=`Failed to fetch resource: ${e}`;h&&(T=typeof h=="string"?h:h.message),T&&console.warn(T)}return nt[r]=m,m}async function Zo(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Ye(t)}async function ei(e,t){if(e.currentSrc){const h=document.createElement("canvas"),T=h.getContext("2d");h.width=e.clientWidth,h.height=e.clientHeight,T==null||T.drawImage(e,0,0,h.width,h.height);const w=h.toDataURL();return Ye(w)}const i=e.poster,r=at(i),m=await st(i,r,t);return Ye(m)}async function ti(e){var t;try{if(!((t=e==null?void 0:e.contentDocument)===null||t===void 0)&&t.body)return await tt(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function ni(e,t){return be(e,HTMLCanvasElement)?Zo(e):be(e,HTMLVideoElement)?ei(e,t):be(e,HTMLIFrameElement)?ti(e):e.cloneNode(!1)}const oi=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function ii(e,t,i){var r,m;let h=[];return oi(e)&&e.assignedNodes?h=Fe(e.assignedNodes()):be(e,HTMLIFrameElement)&&((r=e.contentDocument)===null||r===void 0?void 0:r.body)?h=Fe(e.contentDocument.body.childNodes):h=Fe(((m=e.shadowRoot)!==null&&m!==void 0?m:e).childNodes),h.length===0||be(e,HTMLVideoElement)||await h.reduce((T,w)=>T.then(()=>tt(w,i)).then(N=>{N&&t.appendChild(N)}),Promise.resolve()),t}function ri(e,t){const i=t.style;if(!i)return;const r=window.getComputedStyle(e);r.cssText?(i.cssText=r.cssText,i.transformOrigin=r.transformOrigin):Fe(r).forEach(m=>{let h=r.getPropertyValue(m);m==="font-size"&&h.endsWith("px")&&(h=`${Math.floor(parseFloat(h.substring(0,h.length-2)))-.1}px`),be(e,HTMLIFrameElement)&&m==="display"&&h==="inline"&&(h="block"),m==="d"&&t.getAttribute("d")&&(h=`path(${t.getAttribute("d")})`),i.setProperty(m,h,r.getPropertyPriority(m))})}function ai(e,t){be(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),be(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function si(e,t){if(be(e,HTMLSelectElement)){const i=t,r=Array.from(i.children).find(m=>e.value===m.getAttribute("value"));r&&r.setAttribute("selected","")}}function di(e,t){return be(t,Element)&&(ri(e,t),Go(e,t),ai(e,t),si(e,t)),t}async function li(e,t){const i=e.querySelectorAll?e.querySelectorAll("use"):[];if(i.length===0)return e;const r={};for(let h=0;h<i.length;h++){const w=i[h].getAttribute("xlink:href");if(w){const N=e.querySelector(w),M=document.querySelector(w);!N&&M&&!r[w]&&(r[w]=await tt(M,t,!0))}}const m=Object.values(r);if(m.length){const h="http://www.w3.org/1999/xhtml",T=document.createElementNS(h,"svg");T.setAttribute("xmlns",h),T.style.position="absolute",T.style.width="0",T.style.height="0",T.style.overflow="hidden",T.style.display="none";const w=document.createElementNS(h,"defs");T.appendChild(w);for(let N=0;N<m.length;N++)w.appendChild(m[N]);e.appendChild(T)}return e}async function tt(e,t,i){return!i&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>ni(r,t)).then(r=>ii(e,r,t)).then(r=>di(e,r)).then(r=>li(r,t))}const Ht=/url\((['"]?)([^'"]+?)\1\)/g,ui=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ci=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function pi(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function fi(e){const t=[];return e.replace(Ht,(i,r,m)=>(t.push(m),i)),t.filter(i=>!it(i))}async function mi(e,t,i,r,m){try{const h=i?Bo(t,i):t,T=at(t);let w;if(m){const N=await m(h);w=At(N,T)}else w=await st(h,T,r);return e.replace(pi(t),`$1${w}$3`)}catch{}return e}function hi(e,{preferredFontFormat:t}){return t?e.replace(ci,i=>{for(;;){const[r,,m]=ui.exec(i)||[];if(!m)return"";if(m===t)return`src: ${r};`}}):e}function Lt(e){return e.search(Ht)!==-1}async function Vt(e,t,i){if(!Lt(e))return e;const r=hi(e,i);return fi(r).reduce((h,T)=>h.then(w=>mi(w,T,t,i)),Promise.resolve(r))}async function We(e,t,i){var r;const m=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(m){const h=await Vt(m,null,i);return t.style.setProperty(e,h,t.style.getPropertyPriority(e)),!0}return!1}async function gi(e,t){await We("background",e,t)||await We("background-image",e,t),await We("mask",e,t)||await We("mask-image",e,t)}async function yi(e,t){const i=be(e,HTMLImageElement);if(!(i&&!it(e.src))&&!(be(e,SVGImageElement)&&!it(e.href.baseVal)))return;const r=i?e.src:e.href.baseVal,m=await st(r,at(r),t);await new Promise((h,T)=>{e.onload=h,e.onerror=T;const w=e;w.decode&&(w.decode=h),w.loading==="lazy"&&(w.loading="eager"),i?(e.srcset="",e.src=m):e.href.baseVal=m})}async function vi(e,t){const r=Fe(e.childNodes).map(m=>zt(m,t));await Promise.all(r).then(()=>e)}async function zt(e,t){be(e,Element)&&(await gi(e,t),await yi(e,t),await vi(e,t))}function Si(e,t){const{style:i}=e;t.backgroundColor&&(i.backgroundColor=t.backgroundColor),t.width&&(i.width=`${t.width}px`),t.height&&(i.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(m=>{i[m]=r[m]}),e}const _t={};async function It(e){let t=_t[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},_t[e]=t,t}async function Ct(e,t){let i=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,h=(i.match(/url\([^)]+\)/g)||[]).map(async T=>{let w=T.replace(r,"$1");return w.startsWith("https://")||(w=new URL(w,e.url).href),$t(w,t.fetchRequestInit,({result:N})=>(i=i.replace(T,`url(${N})`),[T,N]))});return Promise.all(h).then(()=>i)}function kt(e){if(e==null)return[];const t=[],i=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(i,"");const m=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const N=m.exec(r);if(N===null)break;t.push(N[0])}r=r.replace(m,"");const h=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,T="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",w=new RegExp(T,"gi");for(;;){let N=h.exec(r);if(N===null){if(N=w.exec(r),N===null)break;h.lastIndex=w.lastIndex}else w.lastIndex=h.lastIndex;t.push(N[0])}return t}async function xi(e,t){const i=[],r=[];return e.forEach(m=>{if("cssRules"in m)try{Fe(m.cssRules||[]).forEach((h,T)=>{if(h.type===CSSRule.IMPORT_RULE){let w=T+1;const N=h.href,M=It(N).then(j=>Ct(j,t)).then(j=>kt(j).forEach(L=>{try{m.insertRule(L,L.startsWith("@import")?w+=1:m.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:L,error:n})}})).catch(j=>{console.error("Error loading remote css",j.toString())});r.push(M)}})}catch(h){const T=e.find(w=>w.href==null)||document.styleSheets[0];m.href!=null&&r.push(It(m.href).then(w=>Ct(w,t)).then(w=>kt(w).forEach(N=>{T.insertRule(N,m.cssRules.length)})).catch(w=>{console.error("Error loading remote stylesheet",w)})),console.error("Error inlining remote css file",h)}}),Promise.all(r).then(()=>(e.forEach(m=>{if("cssRules"in m)try{Fe(m.cssRules||[]).forEach(h=>{i.push(h)})}catch(h){console.error(`Error while reading CSS rules from ${m.href}`,h)}}),i))}function bi(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Lt(t.style.getPropertyValue("src")))}async function Ti(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const i=Fe(e.ownerDocument.styleSheets),r=await xi(i,t);return bi(r)}async function wi(e,t){const i=await Ti(e,t);return(await Promise.all(i.map(m=>{const h=m.parentStyleSheet?m.parentStyleSheet.href:null;return Vt(m.cssText,h,t)}))).join(`
`)}async function _i(e,t){const i=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await wi(e,t);if(i){const r=document.createElement("style"),m=document.createTextNode(i);r.appendChild(m),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Ii(e,t={}){const{width:i,height:r}=Bt(e,t),m=await tt(e,t,!0);return await _i(m,t),await zt(m,t),Si(m,t),await jo(m,i,r)}async function Ci(e,t={}){const{width:i,height:r}=Bt(e,t),m=await Ii(e,t),h=await Ye(m),T=document.createElement("canvas"),w=T.getContext("2d"),N=t.pixelRatio||Lo(),M=t.canvasWidth||i,j=t.canvasHeight||r;return T.width=M*N,T.height=j*N,t.skipAutoScale||Vo(T),T.style.width=`${M}`,T.style.height=`${j}`,t.backgroundColor&&(w.fillStyle=t.backgroundColor,w.fillRect(0,0,T.width,T.height)),w.drawImage(h,0,0,T.width,T.height),T}async function Ke(e,t={}){return(await Ci(e,t)).toDataURL("image/jpeg",t.quality||1)}const ki={class:"row",style:{position:"inherit"}},Di={class:"col-6",style:{}},Ri={class:"row"},Pi={class:"col"},Ui={style:{"margin-left":"30px"}},Ei={class:"col-7"},Mi={class:"row"},Oi={class:"row"},Fi={class:"col"},Ni={class:"col q-ml-sm"},Bi={class:"row"},Ai={class:"row"},$i={class:"row"},Hi={class:"row"},Li={class:"col"},Vi={class:"col q-ml-sm"},zi=D("div",{class:"q-mt-sm"},null,-1),ji={id:"cardFrontAndBack",class:"flex",style:{position:"relative"}},qi=D("div",{style:{"margin-bottom":"10px",width:"100%",height:"100px","background-color":"green",color:"wheat","text-align":"center"}},[D("h1",null,"PRE-RENDERED")],-1),Wi={class:"flex flex-center"},Xi=Object.assign({name:"IndexPage",components:{IdCardFront:mt,IdCardFrontV2:ht,IdCardBack:gt,IdCardBackV2:yt,TextFormatter:qe},data:function(){return{photoFormat:{top:27,left:117,width:401},textFormat:{position:{font_size:17,bottom:83,left:40,line_height:20},lastName:{font_size:43,bottom:119,left:40},firstName:{font_size:28,bottom:97,left:40}},selected_employee_input:null,selected_employee_data:{empno:null,lastName:null,firstName:null,middleName:null,extName:null,position:null,position_function:null,address:null},employees:[],selections:this.employees,timestamp:0}},methods:{saveImageCaptured(e){this.timestamp=new Date().valueOf()},savePendata(e){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{savePendata:!0,m_penData:e,employees_id:this.selected_employee_data.employees_id}).then(({data:t})=>{}).catch(t=>{console.error(t)})},adjustLastName(){},downloadAsPdf(){var e=document.getElementById("IdCardFront"),t=document.getElementById("IdCardBack");Ke(e,{quality:1}).then(i=>{this.$api.post("http://192.168.50.50:8081/id_card_upload.php",{employees_id:this.selected_employee_data.employees_id,side:"front",image:i},{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{Ke(t,{quality:1}).then(r=>{this.$api.post("http://192.168.50.50:8081/id_card_upload.php",{employees_id:this.selected_employee_data.employees_id,side:"back",image:r},{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{var m=document.createElement("a");m.href="http://192.168.50.50:8081/id_card_print_pdf.php?employee_id="+this.selected_employee_data.employees_id,m.click()})})})})},downloadImage(){var e=document.getElementById("IdCardFrontV2"),t=document.getElementById("IdCardBackV2");Ke(e,{quality:1}).then(i=>{var r=document.createElement("a");r.download=this.selected_employee_data.lastName+"_"+this.selected_employee_data.empno+"_FRONT.jpeg",r.href=i,r.click()}),Ke(t,{quality:1}).then(i=>{var r=document.createElement("a");r.download=this.selected_employee_data.lastName+"_"+this.selected_employee_data.empno+"_BACK.jpeg",r.href=i,r.click()}),this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{tagAsPrinted:!0,selected_employee_data:this.selected_employee_data}).catch(i=>{console.error(i)})},onClearForm(){window.location.reload()},onSubmit(){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{saveEmployeeData:!0,selected_employee_data:this.selected_employee_data,textFormat:this.textFormat,photoFormat:this.photoFormat}).then(({data:e})=>{this.getEmployeeData()}).catch(e=>{console.error(e)})},onReset(){},getEmployeeData(){!this.selected_employee_input||this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getEmployeeData:!0,employeeId:this.selected_employee_input.value}).then(({data:e})=>{this.selected_employee_data=e,e.text_formatting&&(this.textFormat.position.font_size=e.text_formatting.position.font_size,this.textFormat.position.bottom=e.text_formatting.position.bottom,this.textFormat.position.line_height=e.text_formatting.position.line_height,this.textFormat.lastName.font_size=e.text_formatting.lastName.font_size,this.textFormat.lastName.bottom=e.text_formatting.lastName.bottom,this.textFormat.firstName.font_size=e.text_formatting.firstName.font_size,this.textFormat.firstName.bottom=e.text_formatting.firstName.bottom),e.photo_formatting&&(this.photoFormat.top=e.photo_formatting.top,this.photoFormat.left=e.photo_formatting.left,this.photoFormat.scale=e.photo_formatting.scale)}).catch(e=>{console.error(e)})},filterFn(e,t){if(e===""){t(()=>{this.selections=this.employees});return}t(()=>{const i=e.toLowerCase();this.selections=this.employees.filter(r=>r.label.toLowerCase().indexOf(i)>-1)})}},created(){this.$api.post("http://192.168.50.50:8081/id_card_backend.php",{getEmployeeList:"true"}).then(({data:e})=>{console.log(e),this.employees=e}).catch(e=>{console.error(e)})},mounted(){}},{__name:"IndexPage",setup(e){return(t,i)=>(Ue(),gn(yn,{class:"q-pa-md",style:{position:"relative"}},{default:ee(()=>[D("div",null,[D("div",ki,[D("div",Di,[E(ot,{clearable:"",class:"q-mb-md",filled:"",modelValue:t.selected_employee_input,"onUpdate:modelValue":[i[0]||(i[0]=r=>t.selected_employee_input=r),i[2]||(i[2]=r=>t.getEmployeeData())],"use-input":"","input-debounce":"0",label:"Select Employee",options:t.selections,onFilter:t.filterFn,onClear:i[1]||(i[1]=r=>t.onClearForm()),behavior:"menu"},{"no-option":ee(()=>[E(jt,null,{default:ee(()=>[E(qt,{class:"text-grey"},{default:ee(()=>[ke(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"]),E(ye,{label:"Dashboard",to:"dashboard"}),D("div",Ri,[D("div",Pi,[D("div",Ui,[E(Io,{onImageCaptured:t.saveImageCaptured,selected_employee_data:t.selected_employee_data},{buttons:ee(()=>[E(Uo,{photoProps:t.photoFormat,selected_employee_data:t.selected_employee_data},null,8,["photoProps","selected_employee_data"])]),_:1},8,["onImageCaptured","selected_employee_data"])])]),D("div",Ei,[E(Tn,{onSubmit:Ot(t.onSubmit,["prevent"]),onReset:t.onReset,class:"q-gutter-sm_"},{default:ee(()=>[E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.empno,"onUpdate:modelValue":i[3]||(i[3]=r=>t.selected_employee_data.empno=r),label:"ID Number *",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"Please enter the ID number"]},null,8,["disable","modelValue","rules"]),E(ue,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.position,"onUpdate:modelValue":i[4]||(i[4]=r=>t.selected_employee_data.position=r),label:"Position",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Position should not be empty!"]},{append:ee(()=>[E(qe,{textProps:t.textFormat.position,textFor:"position"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"]),D("div",Mi,[E(ue,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.lastName,"onUpdate:modelValue":i[5]||(i[5]=r=>t.selected_employee_data.lastName=r),label:"Last Name",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Last Name should not be empty!"]},{append:ee(()=>[E(qe,{textProps:t.textFormat.lastName,textFor:"lastName"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"]),E(ue,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.firstName,"onUpdate:modelValue":i[6]||(i[6]=r=>t.selected_employee_data.firstName=r),label:"First Name",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* First Name should not be empty!"]},{append:ee(()=>[E(qe,{textProps:t.textFormat.firstName,textFor:"firstName"},null,8,["textProps"])]),_:1},8,["disable","modelValue","rules"])]),D("div",Oi,[D("div",Fi,[E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.middleName,"onUpdate:modelValue":i[7]||(i[7]=r=>t.selected_employee_data.middleName=r),label:"Middle Name",hint:""},null,8,["disable","modelValue"])]),D("div",Ni,[E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.extName,"onUpdate:modelValue":i[8]||(i[8]=r=>t.selected_employee_data.extName=r),label:"Name Extension"},null,8,["disable","modelValue"])])]),E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_barangay,"onUpdate:modelValue":i[9]||(i[9]=r=>t.selected_employee_data.address_res_barangay=r),label:"Barangay",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),D("div",Bi,[E(ue,{class:"col q-mr-sm",disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_city,"onUpdate:modelValue":i[10]||(i[10]=r=>t.selected_employee_data.address_res_city=r),label:"City/Municipality",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),E(ue,{class:"col",disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_zip_code,"onUpdate:modelValue":i[11]||(i[11]=r=>t.selected_employee_data.address_res_zip_code=r),label:"Zipcode",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"])]),E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.address_res_province,"onUpdate:modelValue":i[12]||(i[12]=r=>t.selected_employee_data.address_res_province=r),label:"Province",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),D("div",Ai,[E(ot,{disable:!t.selected_employee_input,class:"col",dense:"",outlined:"",modelValue:t.selected_employee_data.gender,"onUpdate:modelValue":i[13]||(i[13]=r=>t.selected_employee_data.gender=r),options:["MALE","FEMALE"],label:"Gender"},null,8,["disable","modelValue"]),E(ue,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.birthdate,"onUpdate:modelValue":i[14]||(i[14]=r=>t.selected_employee_data.birthdate=r),label:"Birthdate",type:"date"},null,8,["disable","modelValue"])]),D("div",$i,[E(ue,{disable:!t.selected_employee_input,class:"col",dense:"",filled:"",modelValue:t.selected_employee_data.blood_type,"onUpdate:modelValue":i[15]||(i[15]=r=>t.selected_employee_data.blood_type=r),label:"Blood Type",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),E(ue,{disable:!t.selected_employee_input,class:"col q-ml-sm",dense:"",filled:"",modelValue:t.selected_employee_data.contact_number,"onUpdate:modelValue":i[16]||(i[16]=r=>t.selected_employee_data.contact_number=r),label:"Contact Number",hint:""},null,8,["disable","modelValue"])]),E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.emergency_name,"onUpdate:modelValue":i[17]||(i[17]=r=>t.selected_employee_data.emergency_name=r),label:"Emergency Contact Person",hint:"","lazy-rules":"",rules:[r=>r&&r.length>0||"* Field should not be empty!"]},null,8,["disable","modelValue","rules"]),E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.emergency_number,"onUpdate:modelValue":i[18]||(i[18]=r=>t.selected_employee_data.emergency_number=r),label:"Emergency Contact Number",hint:""},null,8,["disable","modelValue"]),D("div",Hi,[D("div",Li,[E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.date_issued,"onUpdate:modelValue":i[19]||(i[19]=r=>t.selected_employee_data.date_issued=r),label:"Date Issued",type:"date"},null,8,["disable","modelValue"])]),D("div",Vi,[E(ue,{disable:!t.selected_employee_input,dense:"",filled:"",modelValue:t.selected_employee_data.date_expire,"onUpdate:modelValue":i[20]||(i[20]=r=>t.selected_employee_data.date_expire=r),label:"Valid Until",type:"date"},null,8,["disable","modelValue"])])]),zi,E(ye,{disable:!t.selected_employee_input,class:"q-mr-sm",type:"submit"},{default:ee(()=>[ke("Save")]),_:1},8,["disable"]),E(ye,{disable:!t.selected_employee_input,label:"Download",onClick:i[21]||(i[21]=r=>t.downloadImage())},null,8,["disable"])]),_:1},8,["onSubmit","onReset"])])])]),D("div",ji,[E(mt,{style:{transform:"scale(0.5)",position:"absolute"},details:t.selected_employee_data,timestamp:t.timestamp,textFormat:t.textFormat,photoFormat:t.photoFormat},null,8,["details","timestamp","textFormat","photoFormat"]),E(gt,{style:{transform:"scale(0.5)",position:"absolute"},details:t.selected_employee_data,onOnPenDataSave:t.savePendata},null,8,["details","onOnPenDataSave"])])]),qi,D("div",Wi,[E(ht,{details:t.selected_employee_data,timestamp:t.timestamp,textFormat:t.textFormat,photoFormat:t.photoFormat},null,8,["details","timestamp","textFormat","photoFormat"]),E(yt,{details:t.selected_employee_data,onOnPenDataSave:t.savePendata},null,8,["details","onOnPenDataSave"])])])]),_:1}))}});export{Xi as default};
